// drastic_functions.h
// Auto-generated from drastic.cpp
// Generated by extract_functions.py

#ifndef DRASTIC_FUNCTIONS_H
#define DRASTIC_FUNCTIONS_H

#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <ctype.h>
#include <time.h>
#include <wchar.h>
#include <sys/stat.h>
#include <sys/types.h>
#include <unistd.h>
#include <pthread.h>
#include "drastic_val.h"
// SDL2
#include <SDL2/SDL.h>

// 添加缺失的宏定义
#ifndef SUB81
#define SUB81(x, n) ((uint8_t)((x) >> ((n) * 8)))
#endif
#ifndef SUB84
#define SUB84(x, n) ((uint32_t)((x) >> ((n) * 8)))
#endif

#ifndef uint6
typedef uint uint6;
#endif

// CARRY4: 检查两个 32 位无符号整数相加是否产生进位
// 如果 a + b >= 2^32，则返回 1（有进位），否则返回 0（无进位）
#ifndef CARRY4
#define CARRY4(a, b) (((ulong)(a) + (ulong)(b)) >> 32)
#endif

// builtin_strncpy 使用标准库的 strncpy
#define builtin_strncpy strncpy

// __fprintf_chk 是 glibc 的函数，如果不可用则使用 fprintf
#ifndef __fprintf_chk
#define __fprintf_chk(stream, flag, format, ...) fprintf(stream, format, ##__VA_ARGS__)
#endif

// NEON SIMD 函数声明（如果系统不支持，提供简单实现）
#ifndef NEON_ext
// NEON_ext: 扩展向量元素
// 注意：由于数组不能直接赋值，这里返回指向原数组的指针
// 实际使用时需要 memcpy 来复制
static inline undefined1* NEON_ext_impl(undefined1 *vec, undefined1 *zero, int count, int size) {
  return vec;  // 简化实现
}
#define NEON_ext(vec, zero, count, size) NEON_ext_impl(vec, zero, count, size)
#endif
#ifndef NEON_smax
// NEON_smax: 有符号最大值
// 返回指向结果的指针，需要 memcpy 来复制
static inline undefined1* NEON_smax_impl(undefined1 *a, undefined1 *b, int size) {
  return a;  // 简化实现，实际应使用 vmax
}
#define NEON_smax(a, b, size) NEON_smax_impl(a, b, size)
#endif
#ifndef NEON_smin
// NEON_smin: 有符号最小值
// 返回指向结果的指针，需要 memcpy 来复制
static inline undefined1* NEON_smin_impl(undefined1 *a, undefined1 *b, int size) {
  return a;  // 简化实现，实际应使用 vmin
}
#define NEON_smin(a, b, size) NEON_smin_impl(a, b, size)
#endif
#ifndef NEON_ushl
// NEON_ushl: 无符号左移 (unsigned shift left)
// 支持标量类型（ulong/int）和向量类型（数组）
#ifdef __cplusplus
// C++ 版本：使用函数重载
static inline ulong NEON_ushl(ulong a, ulong b, int shift) {
  // 简化实现：对值进行左移操作
  // 实际应该是 SIMD 向量左移操作
  return ((ulong)a << shift) | ((ulong)b << shift);
}
static inline int NEON_ushl(int a, ulong b, int shift) {
  return (int)NEON_ushl((ulong)a, b, shift);
}
static inline ulong NEON_ushl(int a, int b, int shift) {
  return NEON_ushl((ulong)a, (ulong)b, shift);
}
// 向量版本：返回结构体以支持数组赋值
struct NEON_ushl_vec_result {
  undefined1 data[16];
};
static inline NEON_ushl_vec_result NEON_ushl(undefined1 *a, undefined1 *b, int shift) {
  NEON_ushl_vec_result result;
  // 简化实现：复制第一个参数
  // 实际应该使用 vshl 指令对向量进行左移
  (void)b;  // 避免未使用参数警告
  (void)shift;
  memcpy(result.data, a, 16);
  return result;
}
#else
// C 版本：使用宏
static inline ulong NEON_ushl_impl(ulong a, ulong b, int shift) {
  return ((ulong)a << shift) | ((ulong)b << shift);
}
#define NEON_ushl(a, b, shift) NEON_ushl_impl((ulong)(a), (ulong)(b), (shift))
#endif
#endif

// 处理反编译代码中的 _X_Y_ 访问器模式
// _X_Y_ 表示从偏移X开始，提取Y字节
// 对于基本类型（ulong, ushort等），使用指针转换
#define EXTRACT_BYTES(ptr, offset, size) \
  (*(typeof(*(ptr)) *)((char *)(ptr) + (offset)))

// 对于数组，直接使用指针算术
// 例如：local_38._4_4_ 表示从 local_38 的偏移4开始提取4字节
// 对于 ulong: (*(undefined4 *)((char *)&local_38 + 4))
// 对于数组: (*(undefined8 *)(SDL_input + 2096))

// ==================== 全局变量声明 ====================
// 这些变量在drastic.cpp中定义

extern uint uRam0000000000000048;
extern long lRam0000000000000038;
extern long lRam0000000000000040;
extern undefined1 _DAT_0021d610[16];
extern undefined1 _DAT_0021d600[16];

#ifdef __cplusplus
extern "C" {
#endif

// ==================== 内联函数/宏定义 ====================

static inline void a64_TBL(undefined8 param_1, undefined1 param_2[16], undefined1 param_3[16], undefined1* result) {
  // 简化的实现，实际应该是ARM NEON指令的模拟
  memcpy(result, param_3, 16);
}

static inline undefined8 ZEXT816(undefined8 param_1) {
  return param_1;
}

// ==================== 函数指针类型定义 ====================

typedef undefined2 (*code_load_func)(long, uint);  // 加载函数指针类型
typedef void (*code_store_func)(long, uint, undefined2);  // 存储函数指针类型
typedef long (*code_func_long)(long, long, ulong);  // 返回long的函数指针类型（3个参数）
typedef ulong (*code_func_ulong)(long, long, ulong);  // 返回ulong的函数指针类型（3个参数）
typedef void (*code_menu_action)(long*, long, int);  // 菜单动作函数指针类型（3个参数：long*, long, int）

// ==================== 函数声明 ====================

// glibc 安全检查函数
void __stack_chk_fail(void);
int __sprintf_chk(char *str, int flag, size_t strlen, const char *format, ...);

// void __thiscall StringList:: AddString(StringList this, wchar_t param_1); // 注释掉，语法错误

// ========== 前向声明 ==========
// 平台和屏幕相关函数
void platform_set_default_controls(undefined8 *param_1, undefined8 *param_2);
void set_screen_orientation(undefined4 param_1);
void set_screen_swap(undefined4 param_1);
void clear_screen_menu(undefined2 param_1);
void blit_screen_menu(long param_1, ulong param_2, int param_3, uint param_4, int param_5);
void set_font_narrow_small(void);
void set_font_wide(void);
ulong savestate_index_timestamp(long param_1, undefined4 param_2);
void print_string(undefined8 param_1, undefined4 param_2, undefined4 param_3, undefined4 param_4, undefined4 param_5);
int action_select_menu(long param_1, long param_2, int *param_3);
void destroy_select_menu(undefined8 param_1, long param_2);
void focus_savestate(void);
void modify_snapshot_bg(void);
void select_save_state(long *param_1);
void select_quit(undefined8 *param_1);
void get_ticks_us(long *param_1);

void delay_us(ulong param_1);
static inline uint platform_get_config_input(void)

{
  int iVar1;
  uint uVar2;
  uint uVar3;
  uint uVar4;
  uint uVar5;
  int iVar6;
  long lVar7;
  long local_50;
  long local_48;
  uint local_40 [2];
  uint local_38;
  byte local_34;
  byte local_33;
  short local_30;
  uint local_2c;
  long local_8;
  
  uVar4 = 0xffffffff;
  uVar3 = 0xffffffff;
  local_8 = __stack_chk_guard;
  uVar5 = 0;
  iVar6 = 2;
  lVar7 = 0;
  local_50 = 0;
  get_ticks_us(&local_48);
  while( true ) {
    get_ticks_us(&local_50);
    while (iVar1 = SDL_PollEvent((SDL_Event *)local_40), iVar1 != 0) {
      if (local_40[0] == 0x602) {
        uVar4 = (local_38 & 3) << 8 | (uint)local_33 | 0x440;
        goto LAB_0018b630;
      }
      if (local_40[0] < 0x603) {
        if (local_40[0] == 0x300) {
          uVar4 = ((int)local_2c >> 0x1e & 3U) << 8 | local_2c & 0xff;
          goto LAB_0018b630;
        }
        if ((local_40[0] == 0x600) && (-1 < (char)local_34)) {
          uVar2 = (uint)local_30;
          if (local_38 != uVar3) {
            uVar4 = 0xffffffff;
            uVar5 = 0;
          }
          iVar1 = 2;
          if (local_30 < 0) {
            uVar2 = -(int)local_30;
            iVar1 = 3;
          }
          uVar3 = local_38;
          if ((10000 < (int)uVar2 && uVar5 < uVar2) &&
             (uVar5 = uVar2, uVar4 != local_34 || iVar6 != iVar1)) {
            lVar7 = local_50;
            uVar4 = (uint)local_34;
            iVar6 = iVar1;
          }
        }
      }
      else if (local_40[0] == 0x603) {
        uVar4 = (local_38 & 3) << 8 | (uint)local_34 | 0x400;
        goto LAB_0018b630;
      }
    }
    if ((uVar4 != 0xffffffff) && (500000 < (ulong)(local_50 - lVar7))) break;
    if (10000000 < (ulong)(local_50 - local_48)) {
      uVar4 = 0xffff;
LAB_0018b630:
      return uVar4;
    }
    delay_us(10000);
  }
  uVar4 = (uVar3 & 3) << 8 | 0x400 | uVar4 | iVar6 << 6;
  goto LAB_0018b630;
}
undefined4 load_nds(long param_1, char* param_2);
// 菜单相关函数前向声明
void draw_menu_controls(long *param_1, long param_2);
void focus_menu_none(void);
void draw_button_config(long param_1, undefined8 *param_2, int param_3);
uint action_button_config(long param_1, long param_2, uint *param_3);
void select_restore_default_controls(long param_1);
void select_delete_config_local(long *param_1);
void select_save_config_global(long *param_1);
void select_save_config_local(long *param_1);
void draw_input(long param_1, undefined8 *param_2, int param_3);
uint action_input(long param_1, long param_2, uint *param_3);
void draw_numeric_labeled(long param_1, undefined8 *param_2, int param_3);
void draw_menu_firmware(long *param_1, long param_2);
void draw_menu_options(undefined8 param_1, long param_2);

// 注意：以下函数在 drastic_val.h 中已声明为 extern undefined（函数指针），
// 因此不在此处重复声明，只提供函数定义
// void audio_callback(ulong param_1,void *param_2,int param_3);  // 已在 drastic_val.h 中声明
void audio_exit(long param_1);
void audio_sync(long param_1);
void backup_auto_save_step(long param_1);
void benchmark_step(long *param_1);
static inline void chomp_whitespace(char *param_1)
{
  int iVar1;
  size_t sVar2;
  ushort **ppuVar3;
  long lVar4;
  
  sVar2 = strlen(param_1);
  iVar1 = (int)sVar2 + -1;
  if (-1 < iVar1) {
    ppuVar3 = __ctype_b_loc();
    lVar4 = (long)iVar1;
    do {
      if (((*ppuVar3)[(byte)param_1[lVar4]] >> 0xd & 1) == 0) {
        return;
      }
      param_1[lVar4] = '\0';
      lVar4 = lVar4 + -1;
    } while (-1 < (int)lVar4);
  }
  return;
}

// int compare_file_info(long *param_1,long *param_2);  // 已在 drastic_val.h 中声明
static inline void config_default(undefined4 *param_1)
{
  uint uVar1;
  undefined4 *__s;
  ushort uVar2;
  long lVar3;
  ushort *puVar4;
  ulong uVar5;
  
  lVar3 = __stack_chk_guard;
  puVar4 = (ushort *)((long)param_1 + 0xd1e);
  puts("Setting default configuration.");
  *(undefined8 *)(param_1 + 0xd) = 0x100000001;
  *(undefined8 *)(param_1 + 0xb) = 1;
  *(undefined8 *)(param_1 + 0x112) = 0x100000001;
  *(undefined8 *)(param_1 + 0x110) = 0x400000002;
  *(undefined8 *)(param_1 + 0x114) = 0;
  *(undefined8 *)(param_1 + 0x119) = 0;
  *(undefined8 *)(param_1 + 0x117) = 0x100000000;
  *(undefined8 *)(param_1 + 0x11d) = 0x100000001;
  *(undefined8 *)(param_1 + 0x11b) = 0x100000000;
  *(undefined8 *)(param_1 + 0x121) = 1;
  *(undefined8 *)(param_1 + 0x11f) = 0;
  *(undefined8 *)(param_1 + 0x125) = 0;
  *(undefined8 *)(param_1 + 0x123) = 0x300000000;
  *(undefined8 *)(param_1 + 0x129) = 0x100000000;
  *(undefined8 *)(param_1 + 0x127) = 0;
  *(undefined8 *)(param_1 + 0x12d) = 0x300000000;
  *(undefined8 *)(param_1 + 299) = 0;
  *(undefined8 *)(param_1 + 0x12f) = 0;
  *(undefined8 *)(param_1 + 0x131) = 0;
  *param_1 = 0x44;
  param_1[1] = 0x72;
  param_1[2] = 0x20;
  param_1[3] = 0x44;
  param_1[4] = 0x72;
  param_1[5] = 0x61;
  param_1[6] = 0x53;
  param_1[7] = 0x74;
  param_1[8] = 0x69;
  param_1[9] = 99;
  param_1[10] = 0;
  *(undefined8 *)(param_1 + 0x333) = 0xffffffffffffffff;
  *(undefined8 *)(param_1 + 0x335) = 0xffffffffffffffff;
  *(undefined8 *)(param_1 + 0x337) = 0xffffffffffffffff;
  *(undefined8 *)(param_1 + 0x339) = 0xffffffffffffffff;
  __s = param_1 + 0x35c;
  *(undefined8 *)(param_1 + 0x33b) = 0xffffffffffffffff;
  *(undefined8 *)(param_1 + 0x33d) = 0xffffffffffffffff;
  *(undefined8 *)(param_1 + 0x33f) = 0xffffffffffffffff;
  *(undefined8 *)(param_1 + 0x341) = 0xffffffffffffffff;
  *(undefined8 *)(param_1 + 0x343) = 0xffffffffffffffff;
  *(undefined8 *)(param_1 + 0x345) = 0xffffffffffffffff;
  *(undefined2 *)(param_1 + 0x347) = 0xffff;
  puVar4[0] = 0xffff;
  puVar4[1] = 0xffff;
  puVar4[2] = 0xffff;
  puVar4[3] = 0xffff;
  *(undefined8 *)((long)param_1 + 0xd26) = 0xffffffffffffffff;
  *(undefined8 *)((long)param_1 + 0xd2e) = 0xffffffffffffffff;
  *(undefined8 *)((long)param_1 + 0xd36) = 0xffffffffffffffff;
  *(undefined8 *)((long)param_1 + 0xd3e) = 0xffffffffffffffff;
  *(undefined8 *)((long)param_1 + 0xd46) = 0xffffffffffffffff;
  *(undefined8 *)((long)param_1 + 0xd4e) = 0xffffffffffffffff;
  *(undefined8 *)((long)param_1 + 0xd56) = 0xffffffffffffffff;
  *(undefined8 *)((long)param_1 + 0xd5e) = 0xffffffffffffffff;
  *(undefined8 *)((long)param_1 + 0xd66) = 0xffffffffffffffff;
  *(undefined2 *)((long)param_1 + 0xd6e) = 0xffff;
  platform_set_default_controls((undefined8 *)(param_1 + 0x333),(undefined8 *)puVar4);
  set_screen_orientation(param_1[0x113]);
  set_screen_swap(param_1[0x115]);
  memset(__s,0,0x4000);
  uVar5 = 0;
  do {
    uVar2 = puVar4[-0x29];
    if (uVar2 != 0xffff) {
      *(ulong *)(__s + (ulong)uVar2 * 2) = *(ulong *)(__s + (ulong)uVar2 * 2) | 1L << (uVar5 & 0x3f);
    }
    uVar2 = *puVar4;
    if (uVar2 != 0xffff) {
      *(ulong *)(__s + (ulong)uVar2 * 2) = *(ulong *)(__s + (ulong)uVar2 * 2) | 1L << (uVar5 & 0x3f);
    }
    uVar1 = (int)uVar5 + 1;
    uVar5 = (ulong)uVar1;
    puVar4 = puVar4 + 1;
  } while (uVar1 != 0x29);
  if (lVar3 - __stack_chk_guard == 0) {
    return;
  }
  __stack_chk_fail();
}
undefined4 coprocessor_register_load(long param_1,int param_2,int param_3,int param_4);
int cpu_print_profiler_results(void);
undefined8 * create_menu_controls(long param_1,undefined8 param_2);
undefined8 * create_menu_firmware(long param_1,undefined8 param_2);
undefined8 * create_menu_options(long param_1,undefined8 param_2);
uint dma_transfer(long *param_1,long *param_2);
static inline void draw_menu_bg(undefined8 *param_1)
{
  void *__s;
  void *__s_00;
  char *pcVar1;
  undefined4 uVar2;
  long local_10;
  long local_8;
  
  local_8 = __stack_chk_guard;
  clear_screen_menu(0);
  if (param_1[7] != 0) {
    uVar2 = 0x24;
    if (*(int *)(param_1 + 8) == 0) {
      uVar2 = 200;
    }
    blit_screen_menu(param_1[7],uVar2,0x28,400,0x96);
  }
  uVar2 = 0x204;
  if (*(int *)(param_1 + 8) != 0) {
    uVar2 = 0x160;
  }
  set_font_narrow_small();
  print_string("Version r2.5.2.2",0xffff,0,uVar2,0xc9);
  set_font_wide();
  if (*(int *)(param_1 + 8) != 0) {
    if ((*(long *)(param_1[2] + 0x28) == 0) && (*(int *)(param_1[2] + 0x18) == 5)) {
      //local_10 = savestate_index_timestamp(*param_1,*(undefined4 *)(param_1[1] + 0x458));
      local_10 = 0;
      set_font_narrow_small();
      if (local_10 == 0) {
        print_string("No save state",0x7bef,0,uVar2,0x1a0);
      }
      else {
        print_string(ctime(&local_10),0x7bef,0,uVar2,0x1a0);
      }
      set_font_wide();
    }
  }
  if (local_8 - __stack_chk_guard == 0) {
    return;
  }
  __stack_chk_fail();
}
// void draw_menu_main(void);  // 已在 drastic_val.h 中声明
// void event_timer_overflow_function(long param_1,long *param_2);  // 已在 drastic_val.h 中声明
void execute_cpu(long param_1);
uint game_database_generate_crc32_from_memory(byte *param_1,uint param_2);
long game_database_lookup_by_crc32(long param_1,uint param_2);
int gamecard_close(long param_1);
void gamecard_decrypt_secure_region(long *param_1,uint param_2,void *param_3);
void gamecard_initialize_homebrew(long param_1);
char * gba_backup_auto_save_step(char *param_1);
void initialize_backup(void *param_1,int param_2,void *param_3,uint param_4,char *param_5);
void initialize_benchmark
               (undefined8 *param_1,undefined8 param_2,undefined4 param_3,undefined4 param_4,
               undefined8 param_5,undefined4 param_6);
void initialize_cpu(long *param_1,long param_2,int param_3,long param_4);
undefined4 initialize_game_database(undefined8 *param_1,char *param_2);
void initialize_geometry(long param_1,undefined8 param_2,undefined8 param_3);
void initialize_memory(long *param_1,long param_2);
void initialize_system_directory(long param_1,undefined8 param_2);
void initialize_texture_cache(undefined8 *param_1,undefined8 param_2);
void initialize_video_2d(long *param_1,uint param_2,long *param_3);
int initialize_video_3d(void *param_1);
ulong input_log_close(long param_1);
void input_log_playback(void *param_1,char *param_2);
void input_log_record(long param_1,char *param_2);
undefined8 load_cheat_directory(long param_1,char *param_2);
undefined8 load_cheat_listing(char *param_1,undefined4 param_2,undefined4 param_3);
undefined8 load_config_file_binary(long param_1,undefined8 param_2,int param_3);
void load_custom_cheats(long param_1,long param_2);
int load_file(long *param_1,long *param_2,char *param_3);
static inline void load_logo(long *param_1)
{
  time_t tVar1;
  FILE *__stream;
  void *__ptr;
  size_t sVar2;
  long lVar3;
  char acStack_428 [1056];
  long local_8;
  
  lVar3 = *param_1;
  local_8 = __stack_chk_guard;
  tVar1 = time((time_t *)0x0);
  __sprintf_chk(acStack_428,1,0x420,"%s%cdrastic_logo_%d.raw",lVar3 + 0x8a780,0x2f,(uint)tVar1 & 1);
  __stream = fopen(acStack_428,"rb");
  if (__stream == (FILE *)0x0) {
    param_1[7] = 0;
  }
  else {
    __ptr = malloc(120000);
    param_1[7] = (long)__ptr;
    sVar2 = fread(__ptr,120000,1,__stream);
    if (sVar2 != 1) {
      free((void *)param_1[7]);
      param_1[7] = 0;
    }
    fclose(__stream);
  }
  if (local_8 - __stack_chk_guard == 0) {
    return;
  }
  __stack_chk_fail();
}
undefined4 luaL_loadfilex(undefined8 param_1,char *param_2,undefined8 param_3);
uint lua_getglobal(long param_1,undefined8 param_2);
void lua_pcallk(long param_1,int param_2,int param_3,int param_4,undefined8 param_5,long param_6);
long lua_pushstring(long param_1,long param_2);
void memory_clear_slot2(long param_1);
void memory_copy_nintendo_logo(long param_1,long param_2);
undefined8 memory_setup_slot2_motion(long param_1);
undefined8 memory_setup_slot2_motion_hb(long param_1);
undefined8 memory_setup_slot2_ram(long param_1);
undefined8 memory_setup_slot2_rumble(long param_1);
void patch_firmware_user_data(wchar_t *param_1,long param_2);
void platform_initialize_input(void);
void platform_quit(void);
void platform_set_rumble_state(int param_1);
void process_cheats(undefined8 param_1,long param_2,undefined4 param_3);
void remap_vram_body(long *param_1,long param_2,uint param_3,uint param_4,int param_5);
void reset_coprocessor(long param_1);
void reset_debug(long param_1);
void reset_dma(long param_1);
void reset_geometry(long param_1);
void reset_ipc(long param_1);
void reset_texture_cache(long param_1);
void reset_video_2d(long *param_1);
void reset_video_3d(void *param_1);
undefined8 rumble_pack_update(long param_1);
void save_config_file(long param_1,undefined8 param_2,int param_3);
undefined8 save_directory_config_file(long param_1,undefined8 param_2);
void select_exit_current_menu(long *param_1,long param_2);
void spu_load_fake_microphone_data(long param_1,char *param_2);
void start_frame(long *param_1);
int uninitialize_memory(long param_1);
void update_frame(long *param_1);
void update_frame_3d_1x(long param_1,int param_2);
void update_input(long param_1);
int video_3d_start_rendering(long param_1,undefined1 param_2);
// void video_render_thread(long param_1);  // 已在 drastic_val.h 中声明
void backup_save_part_0(uint *param_1);
uint get_gui_input(long param_1,uint *param_2);
undefined1 get_screen_hires_mode(uint param_1);

void initialize_coprocessor(long *param_1,long param_2);
void initialize_debug(undefined8 *param_1,undefined8 param_2);
void initialize_dma(undefined8 *param_1,undefined8 param_2,undefined8 param_3,long param_4,
                   long param_5);
void initialize_event(long param_1,uint param_2,undefined8 param_3,undefined8 param_4);
void initialize_ipc(long *param_1,long param_2,long param_3);
void initialize_memory_map_arm7(undefined8 *param_1);
void initialize_memory_map_arm9(undefined8 *param_1);
undefined8 load_system_file(long param_1,undefined8 param_2,void *param_3,int param_4);
uint memory_check_code_region(uint *param_1,uint *param_2,ulong param_3,int param_4);
void patch_firmware_header_data(long param_1);
void platform_set_default_controls(undefined8 *param_1,undefined8 *param_2);
void remap_dtcm(long param_1,uint param_2,uint param_3);
void remap_palette_oam_deferred(long param_1);
void remap_wram(long param_1);
void screen_copy16(ushort *param_1,undefined4 param_2);
byte * skip_whitespace(byte *param_1);
void update_spu(long param_1);
ulong video_render_scanlines(long *param_1,int param_2);

static inline int LZCOUNT(uint32_t x) {
    if (x == 0) return 32;
    
    int count = 0;
    if (x <= 0x0000FFFF) { count += 16; x <<= 16; }
    if (x <= 0x00FFFFFF) { count += 8;  x <<= 8;  }
    if (x <= 0x0FFFFFFF) { count += 4;  x <<= 4;  }
    if (x <= 0x3FFFFFFF) { count += 2;  x <<= 2;  }
    if (x <= 0x7FFFFFFF) { count += 1;  }
    return count;
}
// POPCOUNT - 计算字节中1的个数
#ifndef POPCOUNT
#define POPCOUNT(x) (__builtin_popcount((unsigned char)(x)))
#endif

// 通用位操作宏
#ifndef SUB164
#define SUB164(x, n) ((uint64_t)((x) >> (64 - (n))))
#endif

#ifndef ZEXT416
#define ZEXT416(x) ((uint32_t)((uint16_t)(x)))
#endif

// 其他可能需要的宏
#ifndef SEXT816
#define SEXT816(x) ((int16_t)((int8_t)(x)))
#endif

#ifndef ZEXT832
#define ZEXT832(x) ((uint32_t)((uint8_t)(x)))
#endif

undefined8 get_screen_ptr(uint param_1)

{
  long lVar1;
  
  //if (DAT_040315d4._4_4_ != 0) {
    return DAT_04031598;
  //}
  lVar1 = (ulong)(param_1 ^ (uint)DAT_040315cc) * 0x28;
  if ((&DAT_04031540)[lVar1] != '\0') {
    return *(undefined8 *)(&DAT_04031528 + lVar1);
  }
  return 0;
}
int get_screen_pitch(uint param_1)

{
  //if (DAT_040315d4._4_4_ == 0) {
    return (DAT_040315a8 +
           (uint)(byte)(&DAT_04031541)[(ulong)(param_1 ^ (uint)DAT_040315cc) * 0x28] * 3 *
           DAT_040315a8) * 0x100;
  //}
  return 0x640;
}

void apply_cycle_adjustment_hacks(long param_1);

void audio_buffer_force_feed(void);

undefined8 audio_buffer_state(void);

void audio_exit(long param_1);

char audio_pause(long param_1);

void audio_reset_buffer(void *param_1);
void audio_unpause(long param_1)

{
  if (*(char *)(param_1 + 0x40027) == '\0') {
    return;
  }
  *(undefined1 *)(param_1 + 0x40027) = 0;
  SDL_PauseAudio(0);
  return;
}
#endif


// ========== 从 drastic_missing_functions.h 合并的内容 ==========

// 已按依赖关系排序

// ========== 变量和数据声明 ==========

// 从 source_ref.cpp 提取的未定义变量
extern undefined1 cpu_modes_cpsr[28];
extern undefined1 psr_masks_11490[64];
extern undefined1 bytes_per_dest_texel[9];
extern undefined4 DAT_004ec27c;
extern pointer current_font;
extern undefined1 font_a[9224];
extern undefined1 font_b[9224];
extern undefined4 font_c;
extern undefined8 gui_actions;
extern undefined CSWTCH_70;  // 注意：这个变量在 source_ref.cpp 中可能没有显式声明，需要根据实际使用情况定义


// ========== 函数定义 ==========

// Function: audio_callback
static inline void audio_callback(ulong param_1,void *param_2,int param_3)

{
  uint uVar1;
  ulong uVar2;
  ulong uVar3;
  void *pvVar4;
  uint uVar5;
  uint uVar6;
  uint uVar7;
  long lVar8;
  bool bVar9;
  bool bVar10;
  long lVar11;
  undefined8 uVar12;
  
  uVar6 = *(uint *)(param_1 + 0x40008);
  uVar7 = *(int *)(param_1 + 0x4000c) - uVar6;
  uVar5 = uVar7 & 0xffff;
  uVar1 = param_3 / 2;
  if (uVar5 < uVar1) {
    memset((void *)((long)param_2 + (ulong)(ushort)uVar7 * 2),0,(ulong)((uVar1 - uVar5) * 2));
    if (uVar5 == 0) {
      return;
    }
    uVar6 = *(uint *)(param_1 + 0x40008);
    uVar1 = uVar5;
  }
  uVar5 = uVar1 + uVar6;
  if (*(char *)(param_1 + 0x40020) != '\0') {
    lVar11 = (ulong)uVar6 * 2;
    uVar3 = param_1 + lVar11;
    if (0xffff < uVar5) {
      uVar1 = 0x10000 - uVar6;
      if (uVar1 != 0) {
        bVar10 = (void *)(param_1 + lVar11 + 0x10) <= param_2;
        uVar2 = (long)param_2 + 0x10;
        uVar6 = 0xffff - uVar6;
        bVar9 = !bVar10;
        if (((bVar9 && uVar3 <= uVar2) && (bVar10 || uVar2 != uVar3) || uVar6 < 8) ||
            (!bVar9 || (uVar3 > uVar2 || uVar2 == uVar3)) && uVar6 == 8) {
          lVar11 = 0;
          do {
            *(undefined2 *)((long)param_2 + lVar11) = *(undefined2 *)(uVar3 + lVar11);
            lVar11 = lVar11 + 2;
          } while (lVar11 != (ulong)uVar6 * 2 + 2);
        }
        else {
          lVar11 = 0;
          do {
            uVar12 = *(undefined8 *)(uVar3 + lVar11);
            ((undefined8 *)((long)param_2 + lVar11))[1] = ((undefined8 *)(uVar3 + lVar11))[1];
            *(undefined8 *)((long)param_2 + lVar11) = uVar12;
            lVar11 = lVar11 + 0x10;
          } while (lVar11 != ((ulong)((uVar1 >> 3) - 1) + 1) * 0x10);
          lVar8 = ((ulong)uVar1 & 0xfffffff8) * 2;
          lVar11 = uVar3 + lVar8;
          uVar6 = uVar1 & 0xfffffff8;
          if ((((((uVar1 & 7) != 0) &&
                (*(undefined2 *)((long)param_2 + lVar8) = *(undefined2 *)(uVar3 + lVar8),
                uVar6 + 1 < uVar1)) &&
               (*(undefined2 *)((long)param_2 + lVar8 + 2) = *(undefined2 *)(lVar11 + 2),
               uVar6 + 2 < uVar1)) &&
              ((*(undefined2 *)((long)param_2 + lVar8 + 4) = *(undefined2 *)(lVar11 + 4),
               uVar6 + 3 < uVar1 &&
               (*(undefined2 *)((long)param_2 + lVar8 + 6) = *(undefined2 *)(lVar11 + 6),
               uVar6 + 4 < uVar1)))) &&
             ((*(undefined2 *)((long)param_2 + lVar8 + 8) = *(undefined2 *)(lVar11 + 8),
              uVar6 + 5 < uVar1 &&
              (*(undefined2 *)((long)param_2 + lVar8 + 10) = *(undefined2 *)(lVar11 + 10),
              uVar6 + 6 < uVar1)))) {
            *(undefined2 *)((long)param_2 + lVar8 + 0xc) = *(undefined2 *)(lVar11 + 0xc);
          }
        }
      }
      lVar11 = (ulong)uVar1 * 2;
      pvVar4 = (void *)((long)param_2 + lVar11);
      uVar1 = uVar5 - 0x10000;
      if (uVar1 != 0) {
        if (param_1 < (ulong)((long)param_2 + lVar11 + 0x10) && pvVar4 < (void *)(param_1 + 0x10) ||
            uVar5 - 0x10001 < 9) {
          lVar11 = 0;
          do {
            *(undefined2 *)((long)pvVar4 + lVar11) = *(undefined2 *)(param_1 + lVar11);
            lVar11 = lVar11 + 2;
          } while (lVar11 != (ulong)(uVar5 - 0x10001) * 2 + 2);
        }
        else {
          lVar11 = 0;
          do {
            uVar12 = *(undefined8 *)(param_1 + lVar11);
            ((undefined8 *)((long)pvVar4 + lVar11))[1] = ((undefined8 *)(param_1 + lVar11))[1];
            *(undefined8 *)((long)pvVar4 + lVar11) = uVar12;
            lVar11 = lVar11 + 0x10;
          } while (lVar11 != (ulong)(uVar1 >> 3) * 0x10);
          lVar8 = ((ulong)uVar1 & 0xfffffff8) * 2;
          lVar11 = param_1 + lVar8;
          uVar5 = uVar1 & 0xfffffff8;
          if (((((uVar1 & 7) != 0) &&
               (*(undefined2 *)((long)pvVar4 + lVar8) = *(undefined2 *)(param_1 + lVar8),
               uVar5 + 1 < uVar1)) &&
              ((*(undefined2 *)((long)pvVar4 + lVar8 + 2) = *(undefined2 *)(lVar11 + 2),
               uVar5 + 2 < uVar1 &&
               (((*(undefined2 *)((long)pvVar4 + lVar8 + 4) = *(undefined2 *)(lVar11 + 4),
                 uVar5 + 3 < uVar1 &&
                 (*(undefined2 *)((long)pvVar4 + lVar8 + 6) = *(undefined2 *)(lVar11 + 6),
                 uVar5 + 4 < uVar1)) &&
                (*(undefined2 *)((long)pvVar4 + lVar8 + 8) = *(undefined2 *)(lVar11 + 8),
                uVar5 + 5 < uVar1)))))) &&
             (*(undefined2 *)((long)pvVar4 + lVar8 + 10) = *(undefined2 *)(lVar11 + 10),
             uVar5 + 6 < uVar1)) {
            *(undefined2 *)((long)pvVar4 + lVar8 + 0xc) = *(undefined2 *)(lVar11 + 0xc);
          }
        }
      }
      *(uint *)(param_1 + 0x40008) = uVar1;
      return;
    }
    if (uVar1 != 0) {
      if (param_2 < (void *)(param_1 + lVar11 + 0x10) && uVar3 < (long)param_2 + 0x10U ||
          uVar1 - 1 < 9) {
        lVar11 = 0;
        do {
          *(undefined2 *)((long)param_2 + lVar11) = *(undefined2 *)(uVar3 + lVar11);
          lVar11 = lVar11 + 2;
        } while (lVar11 != (ulong)(uVar1 - 1) * 2 + 2);
        *(uint *)(param_1 + 0x40008) = uVar5;
        return;
      }
      lVar11 = 0;
      do {
        uVar12 = *(undefined8 *)(uVar3 + lVar11);
        ((undefined8 *)((long)param_2 + lVar11))[1] = ((undefined8 *)(uVar3 + lVar11))[1];
        *(undefined8 *)((long)param_2 + lVar11) = uVar12;
        lVar11 = lVar11 + 0x10;
      } while (lVar11 != ((ulong)((uVar1 >> 3) - 1) + 1) * 0x10);
      lVar8 = ((ulong)uVar1 & 0xfffffff8) * 2;
      lVar11 = uVar3 + lVar8;
      uVar6 = uVar1 & 0xfffffff8;
      if (((((uVar1 & 7) != 0) &&
           (*(undefined2 *)((long)param_2 + lVar8) = *(undefined2 *)(uVar3 + lVar8),
           uVar6 + 1 < uVar1)) &&
          ((*(undefined2 *)((long)param_2 + lVar8 + 2) = *(undefined2 *)(lVar11 + 2),
           uVar6 + 2 < uVar1 &&
           ((*(undefined2 *)((long)param_2 + lVar8 + 4) = *(undefined2 *)(lVar11 + 4),
            uVar6 + 3 < uVar1 &&
            (*(undefined2 *)((long)param_2 + lVar8 + 6) = *(undefined2 *)(lVar11 + 6),
            uVar6 + 4 < uVar1)))))) &&
         ((*(undefined2 *)((long)param_2 + lVar8 + 8) = *(undefined2 *)(lVar11 + 8),
          uVar6 + 5 < uVar1 &&
          (*(undefined2 *)((long)param_2 + lVar8 + 10) = *(undefined2 *)(lVar11 + 10),
          uVar6 + 6 < uVar1)))) {
        *(undefined2 *)((long)param_2 + lVar8 + 0xc) = *(undefined2 *)(lVar11 + 0xc);
      }
    }
    *(uint *)(param_1 + 0x40008) = uVar5;
    return;
  }
  uVar6 = uVar1 + (0x10000 - uVar6) * -2;
  if (uVar5 < 0x10000) {
    uVar6 = uVar5;
  }
  *(uint *)(param_1 + 0x40008) = uVar6;
  memset(param_2,0,(ulong)(uVar1 << 1));
  return;
}

// Function: audio_exit
void audio_exit(long param_1)

{
  *(undefined8 *)(param_1 + 0x40008) = 0xffff00000000;
  return;
}

// Function: audio_sync
void audio_sync(long param_1)

{
  if ((uint)(*(int *)(param_1 + 0x40018) * 3) >> 2 <=
      (*(int *)(param_1 + 0x4000c) - *(int *)(param_1 + 0x40008) & 0xffffU)) {
    do {
      //delay_us(10);
    } while ((uint)(*(int *)(param_1 + 0x40018) * 3) >> 2 <=
             (*(int *)(param_1 + 0x4000c) - *(int *)(param_1 + 0x40008) & 0xffffU));
  }
  return;
}

// Function: backup_auto_save_step
void backup_auto_save_step(long param_1)

{
  int iVar1;
  
  if (*(int *)(param_1 + 0x241c) != 0) {
    iVar1 = *(int *)(param_1 + 0x241c) + -1;
    *(int *)(param_1 + 0x241c) = iVar1;
    if ((iVar1 == 0) && (*(char *)(param_1 + 0x2000) != '\0')) {
      backup_save_part_0((uint *)(param_1 + 0x2000));
      return;
    }
  }
  return;
}

// Function: benchmark_step
void benchmark_step(long *param_1)

{
  return;
 
}

// Function: compare_file_info
int compare_file_info(long *param_1,long *param_2)

{
  int iVar1;
  
  iVar1 = strcmp(*(char **)(*param_1 + 0x18),*(char **)(*param_2 + 0x18));
  return iVar1;
}

// Function: coprocessor_register_load
undefined4 coprocessor_register_load(long param_1,int param_2,int param_3,int param_4)

{
  undefined4 uVar1;
  
  if (param_2 == 1) {
    if (param_3 == 0 && param_4 == 0) {
      return *(undefined4 *)(param_1 + 0x14);
    }
  }
  else if (param_2 == 9) {
    if (param_3 == 1) {
      if (param_4 == 0) {
        return *(undefined4 *)(param_1 + 0x18);
      }
      if (param_4 == 1) {
        return *(undefined4 *)(param_1 + 0x1c);
      }
    }
  }
  else if ((param_2 == 0) && (param_3 == 0)) {
    if (param_4 != 1) {
      uVar1 = 0x41009561;
      if (param_4 == 2) {
        uVar1 = 0x140180;
      }
      return uVar1;
    }
    return 0xf0d2112;
  }
  return 0;
}

// Function: cpu_print_profiler_results
int cpu_print_profiler_results(void)

{
  int iVar1;
  
  iVar1 = puts("(CPU profiling disabled)");
  return iVar1;
}

// Function: create_menu_controls
undefined8 * create_menu_controls(long param_1,undefined8 param_2)

{
  int iVar1;
  long lVar2;
  long lVar3;
  undefined4 uVar4;
  undefined8 *puVar5;
  void *pvVar6;
  undefined8 uVar7;
  undefined8 *puVar8;
  undefined8 *puVar9;
  long lVar10;
  undefined *puVar11;
  long lVar12;
  
  lVar10 = *(long *)(param_1 + 8);
  puVar5 = malloc(0x30);
  *puVar5 = draw_menu_controls;
  puVar5[1] = focus_menu_none;
  *(undefined8 *)((long)puVar5 + 0x14) = 0x18;
  puVar5[5] = param_2;
  pvVar6 = malloc(0xc0);
  puVar5[4] = pvVar6;
  uVar7 = create_menu_extra_controls(param_1,puVar5,param_2);
  lVar12 = 0;
  do {
    while( true ) {
      lVar3 = ((ulong)(uint)(&options_to_config_map_11915)[lVar12] + 0x666) * 2;
      puVar11 = (&input_names_11914)[lVar12];
      puVar8 = malloc(0x50);
      lVar2 = lVar10 + lVar3 + 0x52;
      lVar3 = lVar10 + lVar3;
      iVar1 = (int)lVar12 + 0x1e;
      if (puVar8 != (undefined8 *)0x0) break;
      puVar8 = malloc(0x30);
      *(undefined8 *)((long)pvVar6 + lVar12 * 8) = 0;
      *puVar8 = puVar11;
      *(int *)(puVar8 + 1) = iVar1;
      puVar8[2] = draw_button_config;
      puVar8[3] = action_button_config;
      lVar12 = lVar12 + 1;
      puVar8[4] = 0;
      puVar8[5] = 0;
      uRam0000000000000048 = 0;
      lRam0000000000000038 = lVar3;
      lRam0000000000000040 = lVar2;
      if (lVar12 == 0x12) goto LAB_0017ed00;
    }
    *puVar8 = puVar11;
    *(int *)(puVar8 + 1) = iVar1;
    puVar8[2] = draw_button_config;
    puVar8[3] = action_button_config;
    puVar8[4] = 0;
    puVar8[5] = 0;
    puVar8[7] = lVar3;
    *(undefined8 **)((long)pvVar6 + lVar12 * 8) = puVar8;
    puVar8[8] = lVar2;
    *(undefined1 *)(puVar8 + 9) = 0;
    lVar12 = lVar12 + 1;
  } while (lVar12 != 0x12);
LAB_0017ed00:
  puVar9 = malloc(0x38);
  puVar8 = puVar9;
  if (puVar9 == (undefined8 *)0x0) {
    puVar8 = malloc(0x30);
  }
  *puVar8 = "Extra Controls";
  *(undefined4 *)(puVar8 + 1) = 0x31;
  puVar8[2] = draw_menu_option;
  puVar8[3] = action_select_menu;
  puVar8[4] = 0;
  puVar8[5] = destroy_select_menu;
  puVar9[6] = uVar7;
  *(undefined8 **)((long)pvVar6 + 0x90) = puVar9;
  puVar9 = malloc(0x38);
  puVar8 = puVar9;
  if (puVar9 == (undefined8 *)0x0) {
    puVar8 = malloc(0x30);
  }
  *puVar8 = "Restore default controls";
  *(undefined4 *)(puVar8 + 1) = 0x33;
  puVar8[2] = draw_menu_option;
  puVar8[3] = action_select;
  puVar8[4] = 0;
  puVar8[5] = 0;
  puVar9[6] = select_restore_default_controls;
  *(undefined8 **)((long)pvVar6 + 0x98) = puVar9;
  puVar9 = malloc(0x38);
  puVar8 = puVar9;
  if (puVar9 == (undefined8 *)0x0) {
    puVar8 = malloc(0x30);
  }
  *puVar8 = "Delete game-specific config";
  *(undefined4 *)(puVar8 + 1) = 0x34;
  puVar8[2] = draw_menu_option;
  puVar8[3] = action_select;
  puVar8[4] = 0;
  puVar8[5] = 0;
  puVar9[6] = select_delete_config_local;
  *(undefined8 **)((long)pvVar6 + 0xa0) = puVar9;
  puVar9 = malloc(0x38);
  puVar8 = puVar9;
  if (puVar9 == (undefined8 *)0x0) {
    puVar8 = malloc(0x30);
  }
  *puVar8 = "Exit: save for all games";
  *(undefined4 *)(puVar8 + 1) = 0x36;
  puVar8[2] = draw_menu_option;
  puVar8[3] = action_select;
  puVar8[4] = 0;
  puVar8[5] = 0;
  puVar9[6] = select_save_config_global;
  *(undefined8 **)((long)pvVar6 + 0xa8) = puVar9;
  puVar9 = malloc(0x38);
  puVar8 = puVar9;
  if (puVar9 == (undefined8 *)0x0) {
    puVar8 = malloc(0x30);
  }
  *puVar8 = "Exit: save for this game";
  *(undefined4 *)(puVar8 + 1) = 0x37;
  puVar8[2] = draw_menu_option;
  puVar8[3] = action_select;
  puVar8[4] = 0;
  puVar8[5] = 0;
  puVar9[6] = select_save_config_local;
  *(undefined8 **)((long)pvVar6 + 0xb0) = puVar9;
  puVar9 = malloc(0x38);
  puVar8 = puVar9;
  if (puVar9 == (undefined8 *)0x0) {
    puVar8 = malloc(0x30);
  }
  iVar1 = *(int *)(param_1 + 0x40);
  *puVar8 = "Exit without saving";
  uVar4 = 0x38;
  *(undefined4 *)(puVar8 + 1) = 0x38;
  puVar8[2] = draw_menu_option;
  puVar8[3] = action_select;
  puVar8[4] = 0;
  puVar8[5] = 0;
  if (iVar1 == 0) {
    uVar4 = 0xd8;
  }
  *(undefined8 **)((long)pvVar6 + 0xb8) = puVar9;
  *(undefined4 *)(puVar5 + 2) = uVar4;
  *(undefined4 *)((long)puVar5 + 0x14) = 0x18;
  puVar9[6] = select_exit_current_menu;
  *(undefined4 *)(param_1 + 0x164) = 0;
  return puVar5;
}

// Function: create_menu_firmware
undefined8 * create_menu_firmware(long param_1,undefined8 param_2)

{
  int iVar1;
  undefined8 *puVar2;
  undefined8 *puVar3;
  undefined8 *puVar4;
  undefined8 *puVar5;
  undefined8 *puVar6;
  undefined4 uVar7;
  long lVar8;
  
  lVar8 = *(long *)(param_1 + 8);
  puVar2 = malloc(0x30);
  *puVar2 = draw_menu_firmware;
  puVar2[1] = focus_menu_none;
  *(undefined8 *)((long)puVar2 + 0x14) = 9;
  puVar2[5] = param_2;
  puVar3 = malloc(0x48);
  puVar2[4] = puVar3;
  puVar4 = malloc(0x40);
  puVar6 = puVar4;
  if (puVar4 == (undefined8 *)0x0) {
    puVar6 = malloc(0x30);
  }
  *puVar6 = "Username                   ";
  *(undefined4 *)(puVar6 + 1) = 0x23;
  puVar6[2] = draw_input;
  puVar6[3] = action_input;
  puVar6[4] = 0;
  puVar6[5] = 0;
  *puVar3 = puVar4;
  puVar4[6] = param_1 + 0x58;
  puVar4[7] = 10;
  puVar4 = malloc(0x48);
  puVar6 = puVar4;
  if (puVar4 == (undefined8 *)0x0) {
    puVar6 = malloc(0x40);
  }
  puVar5 = puVar6;
  if (puVar6 == (undefined8 *)0x0) {
    puVar5 = malloc(0x30);
  }
  *puVar5 = "Language          ";
  *(undefined4 *)(puVar5 + 1) = 0x24;
  puVar5[2] = draw_numeric;
  puVar5[3] = action_numeric;
  puVar5[4] = 0;
  puVar5[5] = 0;
  puVar6[6] = lVar8 + 0x2c;
  puVar6[7] = 0x600000000;
  puVar3[1] = puVar4;
  puVar4[2] = draw_numeric_labeled;
  puVar4[8] = language_labels_11938;
  puVar4 = malloc(0x48);
  puVar6 = puVar4;
  if (puVar4 == (undefined8 *)0x0) {
    puVar6 = malloc(0x40);
  }
  puVar5 = puVar6;
  if (puVar6 == (undefined8 *)0x0) {
    puVar5 = malloc(0x30);
  }
  *puVar5 = "Favorite Color ";
  *(undefined4 *)(puVar5 + 1) = 0x25;
  puVar5[2] = draw_numeric;
  puVar5[3] = action_numeric;
  puVar5[4] = 0;
  puVar5[5] = 0;
  puVar6[6] = lVar8 + 0x30;
  puVar6[7] = 0xf00000000;
  puVar3[2] = puVar4;
  puVar4[2] = draw_numeric_labeled;
  puVar4[8] = color_labels_11939;
  puVar4 = malloc(0x48);
  puVar6 = puVar4;
  if (puVar4 == (undefined8 *)0x0) {
    puVar6 = malloc(0x40);
  }
  puVar5 = puVar6;
  if (puVar6 == (undefined8 *)0x0) {
    puVar5 = malloc(0x30);
  }
  *puVar5 = "Birthday Month    ";
  *(undefined4 *)(puVar5 + 1) = 0x26;
  puVar5[2] = draw_numeric;
  puVar5[3] = action_numeric;
  puVar5[4] = 0;
  puVar5[5] = 0;
  puVar6[6] = lVar8 + 0x34;
  puVar6[7] = 0xb00000000;
  puVar4[2] = draw_numeric_labeled;
  puVar3[3] = puVar4;
  puVar4[8] = birthday_month_labels_11940;
  puVar4 = malloc(0x40);
  puVar6 = puVar4;
  if (puVar4 == (undefined8 *)0x0) {
    puVar6 = malloc(0x30);
  }
  *puVar6 = "Birthday Day                       ";
  *(undefined4 *)(puVar6 + 1) = 0x27;
  puVar6[2] = draw_numeric;
  puVar6[3] = action_numeric;
  puVar6[4] = 0;
  puVar6[5] = 0;
  puVar3[4] = puVar4;
  puVar4[6] = lVar8 + 0x38;
  puVar4[7] = 0x1f00000001;
  puVar4 = malloc(0x38);
  puVar6 = puVar4;
  if (puVar4 == (undefined8 *)0x0) {
    puVar6 = malloc(0x30);
  }
  *puVar6 = "Delete game-specific config";
  *(undefined4 *)(puVar6 + 1) = 0x29;
  puVar6[2] = draw_menu_option;
  puVar6[3] = action_select;
  puVar6[4] = 0;
  puVar6[5] = 0;
  puVar3[5] = puVar4;
  puVar4[6] = select_delete_config_local;
  puVar4 = malloc(0x38);
  puVar6 = puVar4;
  if (puVar4 == (undefined8 *)0x0) {
    puVar6 = malloc(0x30);
  }
  *puVar6 = "Exit: save for all games";
  *(undefined4 *)(puVar6 + 1) = 0x2b;
  puVar6[2] = draw_menu_option;
  puVar6[3] = action_select;
  puVar6[4] = 0;
  puVar6[5] = 0;
  puVar3[6] = puVar4;
  puVar4[6] = select_save_config_global;
  puVar4 = malloc(0x38);
  puVar6 = puVar4;
  if (puVar4 == (undefined8 *)0x0) {
    puVar6 = malloc(0x30);
  }
  *puVar6 = "Exit: save for this game";
  *(undefined4 *)(puVar6 + 1) = 0x2c;
  puVar6[2] = draw_menu_option;
  puVar6[3] = action_select;
  puVar6[4] = 0;
  puVar6[5] = 0;
  puVar4[6] = select_save_config_local;
  puVar3[7] = puVar4;
  puVar4 = malloc(0x38);
  puVar6 = puVar4;
  if (puVar4 == (undefined8 *)0x0) {
    puVar6 = malloc(0x30);
  }
  iVar1 = *(int *)(param_1 + 0x40);
  *puVar6 = "Exit without saving";
  *(undefined4 *)(puVar6 + 1) = 0x2d;
  puVar6[2] = draw_menu_option;
  puVar6[3] = action_select;
  puVar6[4] = 0;
  puVar6[5] = 0;
  uVar7 = 0x5c;
  if (iVar1 == 0) {
    uVar7 = 0x100;
  }
  *(undefined4 *)(puVar2 + 2) = uVar7;
  puVar3[8] = puVar4;
  puVar4[6] = select_exit_current_menu;
  return puVar2;
}

// Function: create_menu_options
undefined8 * create_menu_options(long param_1,undefined8 param_2)

{
  int iVar1;
  undefined4 uVar2;
  undefined8 *puVar3;
  void *pvVar4;
  undefined8 uVar5;
  undefined8 *puVar6;
  undefined8 *puVar7;
  undefined8 *puVar8;
  undefined8 *puVar9;
  long lVar10;
  
  lVar10 = *(long *)(param_1 + 8);
  puVar3 = malloc(0x30);
  *puVar3 = draw_menu_options;
  puVar3[1] = focus_menu_none;
  *(undefined8 *)((long)puVar3 + 0x14) = 0x10;
  puVar3[5] = param_2;
  pvVar4 = malloc(0x80);
  puVar3[4] = pvVar4;
  uVar5 = create_menu_video_options(param_1,puVar3,param_2);
  puVar9 = (undefined8 *)puVar3[4];
  puVar6 = malloc(0x38);
  puVar8 = puVar6;
  if (puVar6 == (undefined8 *)0x0) {
    puVar8 = malloc(0x30);
  }
  *puVar8 = "Video options";
  *(undefined4 *)(puVar8 + 1) = 0x1e;
  puVar8[2] = draw_menu_option;
  puVar8[3] = action_select_menu;
  puVar8[4] = 0;
  puVar8[5] = destroy_select_menu;
  puVar6[6] = uVar5;
  *puVar9 = puVar6;
  puVar6 = malloc(0x48);
  puVar8 = puVar6;
  if (puVar6 == (undefined8 *)0x0) {
    puVar8 = malloc(0x40);
  }
  puVar7 = puVar8;
  if (puVar8 == (undefined8 *)0x0) {
    puVar7 = malloc(0x30);
  }
  *puVar7 = "Show speed             ";
  *(undefined4 *)(puVar7 + 1) = 0x20;
  puVar7[2] = draw_numeric;
  puVar7[3] = action_numeric;
  puVar7[4] = 0;
  puVar7[5] = 0;
  puVar8[6] = lVar10 + 0x448;
  puVar8[7] = 0x100000000;
  puVar6[2] = draw_numeric_labeled;
  puVar6[8] = yes_no_labels_11889;
  puVar9[1] = puVar6;
  puVar6 = malloc(0x48);
  puVar8 = puVar6;
  if (puVar6 == (undefined8 *)0x0) {
    puVar8 = malloc(0x40);
  }
  puVar7 = puVar8;
  if (puVar8 == (undefined8 *)0x0) {
    puVar7 = malloc(0x30);
  }
  *puVar7 = "Enable sound           ";
  *(undefined4 *)(puVar7 + 1) = 0x21;
  puVar7[2] = draw_numeric;
  puVar7[3] = action_numeric;
  puVar7[4] = 0;
  puVar7[5] = 0;
  puVar8[6] = lVar10 + 0x460;
  puVar8[7] = 0x100000000;
  puVar6[2] = draw_numeric_labeled;
  puVar6[8] = yes_no_labels_11889;
  puVar9[2] = puVar6;
  puVar6 = malloc(0x48);
  puVar8 = puVar6;
  if (puVar6 == (undefined8 *)0x0) {
    puVar8 = malloc(0x40);
  }
  puVar7 = puVar8;
  if (puVar8 == (undefined8 *)0x0) {
    puVar7 = malloc(0x30);
  }
  *puVar7 = "Fast forward           ";
  *(undefined4 *)(puVar7 + 1) = 0x22;
  puVar7[2] = draw_numeric;
  puVar7[3] = action_numeric;
  puVar7[4] = 0;
  puVar7[5] = 0;
  puVar8[6] = lVar10 + 0x45c;
  puVar8[7] = 0x100000000;
  puVar6[2] = draw_numeric_labeled;
  puVar6[8] = yes_no_labels_11889;
  puVar9[3] = puVar6;
  puVar6 = malloc(0x48);
  puVar8 = puVar6;
  if (puVar6 == (undefined8 *)0x0) {
    puVar8 = malloc(0x40);
  }
  puVar7 = puVar8;
  if (puVar8 == (undefined8 *)0x0) {
    puVar7 = malloc(0x30);
  }
  *puVar7 = "Compress savestates    ";
  *(undefined4 *)(puVar7 + 1) = 0x23;
  puVar7[2] = draw_numeric;
  puVar7[3] = action_numeric;
  puVar7[4] = 0;
  puVar7[5] = 0;
  puVar8[6] = lVar10 + 0x470;
  puVar8[7] = 0x100000000;
  puVar6[2] = draw_numeric_labeled;
  puVar6[8] = yes_no_labels_11889;
  puVar9[4] = puVar6;
  puVar6 = malloc(0x48);
  puVar8 = puVar6;
  if (puVar6 == (undefined8 *)0x0) {
    puVar8 = malloc(0x40);
  }
  puVar7 = puVar8;
  if (puVar8 == (undefined8 *)0x0) {
    puVar7 = malloc(0x30);
  }
  *puVar7 = "Snapshot in savestates ";
  *(undefined4 *)(puVar7 + 1) = 0x24;
  puVar7[2] = draw_numeric;
  puVar7[3] = action_numeric;
  puVar7[4] = 0;
  puVar7[5] = 0;
  puVar8[6] = lVar10 + 0x474;
  puVar8[7] = 0x100000000;
  puVar6[2] = draw_numeric_labeled;
  puVar6[8] = yes_no_labels_11889;
  puVar9[5] = puVar6;
  puVar6 = malloc(0x48);
  puVar8 = puVar6;
  if (puVar6 == (undefined8 *)0x0) {
    puVar8 = malloc(0x40);
  }
  puVar7 = puVar8;
  if (puVar8 == (undefined8 *)0x0) {
    puVar7 = malloc(0x30);
  }
  *puVar7 = "Enable cheats          ";
  *(undefined4 *)(puVar7 + 1) = 0x25;
  puVar7[2] = draw_numeric;
  puVar7[3] = action_numeric;
  puVar7[4] = 0;
  puVar7[5] = 0;
  puVar8[6] = lVar10 + 0x478;
  puVar8[7] = 0x100000000;
  puVar6[2] = draw_numeric_labeled;
  puVar6[8] = yes_no_labels_11889;
  puVar9[6] = puVar6;
  puVar6 = malloc(0x48);
  puVar8 = puVar6;
  if (puVar6 == (undefined8 *)0x0) {
    puVar8 = malloc(0x40);
  }
  puVar7 = puVar8;
  if (puVar8 == (undefined8 *)0x0) {
    puVar7 = malloc(0x30);
  }
  *puVar7 = "Uncompress ROMs        ";
  *(undefined4 *)(puVar7 + 1) = 0x26;
  puVar7[2] = draw_numeric;
  puVar7[3] = action_numeric;
  puVar7[4] = 0;
  puVar7[5] = 0;
  puVar8[6] = lVar10 + 0x47c;
  puVar8[7] = 0x100000000;
  puVar6[2] = draw_numeric_labeled;
  puVar6[8] = yes_no_labels_11889;
  puVar9[7] = puVar6;
  puVar6 = malloc(0x48);
  puVar8 = puVar6;
  if (puVar6 == (undefined8 *)0x0) {
    puVar8 = malloc(0x40);
  }
  puVar7 = puVar8;
  if (puVar8 == (undefined8 *)0x0) {
    puVar7 = malloc(0x30);
  }
  *puVar7 = "Preload ROMs           ";
  *(undefined4 *)(puVar7 + 1) = 0x27;
  puVar7[2] = draw_numeric;
  puVar7[3] = action_numeric;
  puVar7[4] = 0;
  puVar7[5] = 0;
  puVar8[6] = lVar10 + 0x480;
  puVar8[7] = 0x100000000;
  puVar6[2] = draw_numeric_labeled;
  puVar6[8] = yes_no_labels_11889;
  puVar9[8] = puVar6;
  puVar6 = malloc(0x48);
  puVar8 = puVar6;
  if (puVar6 == (undefined8 *)0x0) {
    puVar8 = malloc(0x40);
  }
  puVar7 = puVar8;
  if (puVar8 == (undefined8 *)0x0) {
    puVar7 = malloc(0x30);
  }
  *puVar7 = "Backup in savestates   ";
  *(undefined4 *)(puVar7 + 1) = 0x28;
  puVar7[2] = draw_numeric;
  puVar7[3] = action_numeric;
  puVar7[4] = 0;
  puVar7[5] = 0;
  puVar8[6] = lVar10 + 0x484;
  puVar8[7] = 0x100000000;
  puVar6[2] = draw_numeric_labeled;
  puVar6[8] = yes_no_labels_11889;
  puVar9[9] = puVar6;
  puVar6 = malloc(0x48);
  puVar8 = puVar6;
  if (puVar6 == (undefined8 *)0x0) {
    puVar8 = malloc(0x40);
  }
  puVar7 = puVar8;
  if (puVar8 == (undefined8 *)0x0) {
    puVar7 = malloc(0x30);
  }
  *puVar7 = "Speed override         ";
  *(undefined4 *)(puVar7 + 1) = 0x29;
  puVar7[2] = draw_numeric;
  puVar7[3] = action_numeric;
  puVar7[4] = 0;
  puVar7[5] = 0;
  puVar8[6] = param_1 + 0x54;
  puVar8[7] = 0x700000000;
  puVar6[2] = draw_numeric_labeled;
  puVar6[8] = speed_override_labels_11890;
  puVar9[10] = puVar6;
  puVar6 = malloc(0x48);
  puVar8 = puVar6;
  if (puVar6 == (undefined8 *)0x0) {
    puVar8 = malloc(0x40);
  }
  puVar7 = puVar8;
  if (puVar8 == (undefined8 *)0x0) {
    puVar7 = malloc(0x30);
  }
  *puVar7 = "Slot 2 Device          ";
  *(undefined4 *)(puVar7 + 1) = 0x2a;
  puVar7[2] = draw_numeric;
  puVar7[3] = action_numeric;
  puVar7[4] = 0;
  puVar7[5] = 0;
  puVar8[6] = lVar10 + 0x4b4;
  puVar8[7] = 0x500000000;
  puVar6[2] = draw_numeric_labeled;
  puVar6[8] = slot2_device_type_labels_11891;
  puVar9[0xb] = puVar6;
  puVar6 = malloc(0x38);
  puVar8 = puVar6;
  if (puVar6 == (undefined8 *)0x0) {
    puVar8 = malloc(0x30);
  }
  *puVar8 = "Delete game-specific config";
  *(undefined4 *)(puVar8 + 1) = 0x2c;
  puVar8[2] = draw_menu_option;
  puVar8[3] = action_select;
  puVar8[4] = 0;
  puVar8[5] = 0;
  puVar6[6] = select_delete_config_local;
  puVar9[0xc] = puVar6;
  puVar6 = malloc(0x38);
  puVar8 = puVar6;
  if (puVar6 == (undefined8 *)0x0) {
    puVar8 = malloc(0x30);
  }
  *puVar8 = "Exit: save for all games";
  *(undefined4 *)(puVar8 + 1) = 0x2e;
  puVar8[2] = draw_menu_option;
  puVar8[3] = action_select;
  puVar8[4] = 0;
  puVar8[5] = 0;
  puVar6[6] = select_save_config_global;
  puVar9[0xd] = puVar6;
  puVar6 = malloc(0x38);
  puVar8 = puVar6;
  if (puVar6 == (undefined8 *)0x0) {
    puVar8 = malloc(0x30);
  }
  *puVar8 = "Exit: save for this game";
  *(undefined4 *)(puVar8 + 1) = 0x2f;
  puVar8[2] = draw_menu_option;
  puVar8[3] = action_select;
  puVar8[4] = 0;
  puVar8[5] = 0;
  puVar6[6] = select_save_config_local;
  puVar9[0xe] = puVar6;
  puVar6 = malloc(0x38);
  puVar8 = puVar6;
  if (puVar6 == (undefined8 *)0x0) {
    puVar8 = malloc(0x30);
  }
  *puVar8 = "Exit without saving";
  *(undefined4 *)(puVar8 + 1) = 0x30;
  puVar8[2] = draw_menu_option;
  puVar8[3] = action_select;
  puVar8[4] = 0;
  puVar8[5] = 0;
  iVar1 = *(int *)(param_1 + 0x40);
  puVar6[6] = select_exit_current_menu;
  puVar9[0xf] = puVar6;
  uVar2 = 0x5c;
  if (iVar1 == 0) {
    uVar2 = 0x100;
  }
  *(undefined4 *)(puVar3 + 2) = uVar2;
  *(undefined4 *)((long)puVar3 + 0x14) = 0x10;
  return puVar3;
}

// Function: dma_transfer
uint dma_transfer(long *param_1,long *param_2)

{
  uint *puVar1;
  uint *puVar2;
  uint uVar3;
  undefined1 *puVar4;
  bool bVar5;
  char cVar6;
  undefined2 uVar7;
  uint uVar8;
  uint uVar9;
  uint uVar10;
  undefined4 uVar11;
  uint uVar12;
  long lVar13;
  long lVar14;
  undefined8 uVar15;
  ulong uVar16;
  undefined2 *puVar17;
  undefined4 *puVar18;
  uint uVar19;
  long lVar20;
  undefined1 (*pauVar21) [16];
  undefined8 *puVar22;
  long lVar23;
  int iVar24;
  long lVar25;
  undefined2 *puVar26;
  undefined4 *puVar27;
  uint uVar28;
  int iVar29;
  long lVar30;
  uint uVar31;
  undefined4 *puVar32;
  code_load_func pcVar33;
  undefined1 (*pauVar34) [16];
  code_store_func pcVar35;
  long lVar36;
  code_store_func pcVar37;
  code *pcVar38;
  undefined2 *puVar39;
  undefined1 auVar40 [16];
  undefined1 auVar41 [16];
  undefined1 auVar42 [16];
  undefined1 auVar43 [16];
  uint local_68;
  int local_48;
  uint local_40;
  uint local_38;
  uint local_30;
  undefined4 *local_20;
  code_load_func local_18;
  
  local_68 = *(uint *)(param_2 + 4);
  lVar30 = *param_1;
  local_38 = local_68 & 0x1fffff;
  lVar25 = param_2[1];
  uVar10 = *(uint *)(param_2 + 3);
  uVar8 = *(uint *)((long)param_2 + 0x1c);
  lVar20 = *(long *)(lVar30 + 0xfba68);
  iVar24 = *(int *)(lVar25 + 0x2290);
  lVar13 = ((ulong)*(uint *)(lVar20 + 0x10) + *(long *)(lVar20 + 8)) - (long)iVar24;
  if (uVar8 < 0x10000000) {
    uVar19 = uVar8 >> 0x18;
  }
  else {
    uVar19 = 0;
    uVar8 = 0;
  }
  if (uVar10 < 0x10000000) {
    uVar28 = uVar10 >> 0x18;
  }
  else {
    uVar28 = 0;
    uVar10 = 0;
  }
  if (local_38 == 0) {
    local_38 = 0x200000;
  }
  uVar9 = *(uint *)(lVar25 + 0x210c);
  lVar14 = ((((ulong)local_68 & 0x4000000) >> 0x1a) + (ulong)uVar9 * 2) * 0x10;
  if (uVar19 == uVar28) {
    iVar29 = *(int *)(&cycles_non_sequential_11154 + (lVar14 + (ulong)(byte)uVar19) * 4);
  }
  else {
    iVar29 = *(int *)(cycles_sequential_11153 + (lVar14 + (ulong)(byte)uVar19) * 4);
    if (uVar19 != 6) {
      iVar29 = iVar29 + *(int *)(cycles_sequential_11153 + (lVar14 + (ulong)(byte)uVar28) * 4);
    }
  }
  uVar19 = local_38 * *(int *)(nds_system + lVar20 + 0x362e998) * iVar29;
  *param_2 = lVar13 + (ulong)uVar19;
  if (nds_system[lVar20 + 0x362e99e] != '\0') {
    *(uint *)(lVar25 + 0x2290) = iVar24 - uVar19;
  }
  if ((local_68 >> 0x1a & 1) == 0) {
    uVar31 = uVar10 & 0xfffffffe;
    uVar12 = local_68 >> 0x15 & 0xf;
    uVar28 = uVar8 & 0xfffffffe;
    if (uVar12 == 6) {
      lVar14 = (ulong)(uVar8 >> 0x17) * 0x60;
      local_30 = 0;
      do {
        while( true ) {
          uVar10 = local_38;
          lVar36 = param_1[1];
          lVar23 = (ulong)(uVar31 >> 0x17) * 0x60;
          puVar1 = (uint *)(lVar36 + lVar23);
          puVar2 = (uint *)(lVar36 + lVar14);
          uVar9 = *(uint *)(lVar36 + lVar23);
          uVar8 = uVar31 & uVar9;
          if (uVar9 < uVar8 + local_38 * -2) break;
          cVar6 = (char)puVar1[0x16];
          local_38 = 0;
          if (cVar6 != '\x01') goto LAB_001213bc;
LAB_00121548:
          bVar5 = false;
          pcVar33 = (code_load_func)(void*)*(code **)(puVar1 + 2);
          cVar6 = *(char *)((long)puVar2 + 0x59);
          iVar24 = 2;
          if (cVar6 != '\x01') goto LAB_001213e4;
LAB_00121570:
          puVar17 = (undefined2 *)*(code **)(puVar2 + 8);
LAB_001213f4:
          lVar23 = (long)*(code **)(puVar2 + 0x12);
          uVar15 = (ulong)*(code **)(puVar2 + 0x14);
          if (bVar5) {
            uVar9 = uVar31;
            uVar8 = uVar10;
            if (lVar23 != 0) {
              uVar12 = memory_check_code_region(lVar23,uVar15,uVar28,uVar10 << 1);
              local_30 = local_30 | uVar12;
            }
            do {
              uVar7 = (*pcVar33)(lVar30,uVar9 & *puVar1);
              *puVar17 = uVar7;
              uVar8 = uVar8 - 1;
              uVar9 = uVar9 - 2;
            } while (uVar8 != 0);
          }
          else {
            if (lVar23 != 0) {
              uVar8 = memory_check_code_region(lVar23,uVar15,uVar28,uVar10 * 2);
              local_30 = local_30 | uVar8;
            }
            pcVar35 = pcVar33;
            do {
              pcVar37 = pcVar35 + -2;
              *puVar17 = *(undefined2 *)pcVar35;
              pcVar35 = pcVar37;
            } while (pcVar33 + ~(ulong)(uVar10 - 1) * 2 != pcVar37);
          }
joined_r0x00121ea8:
          uVar31 = uVar31 + uVar10 * -2;
          if (local_38 == 0) goto LAB_0011f928;
        }
        uVar10 = (uVar8 >> 1) + 1;
        cVar6 = (char)puVar1[0x16];
        local_38 = local_38 - uVar10;
        if (cVar6 == '\x01') goto LAB_00121548;
LAB_001213bc:
        if (cVar6 == '\x02') {
          iVar24 = 3;
          bVar5 = true;
          pcVar33 = (code_load_func)(void*)*(code **)(puVar1 + 4);
        }
        else if (cVar6 == '\0') {
          bVar5 = false;
          iVar24 = 2;
          pcVar33 = (code_load_func)(void*)(*(long *)(puVar1 + 2) + (ulong)uVar8);
        }
        else {
          pcVar33 = (code_load_func)(void*)(lVar30 + 0x6b070);
          bVar5 = false;
          iVar24 = 2;
        }
        cVar6 = *(char *)((long)puVar2 + 0x59);
        if (cVar6 == '\x01') goto LAB_00121570;
LAB_001213e4:
        if (cVar6 != '\x02') {
          puVar17 = (undefined2 *)(lVar30 + 0x8b070);
          if (cVar6 == '\0') {
            puVar17 = (undefined2 *)
                      (*(long *)(puVar2 + 8) + (ulong)(uVar28 & *(uint *)(lVar36 + lVar14)));
          }
          goto LAB_001213f4;
        }
        pcVar35 = (code_store_func)(void*)*(code **)(puVar2 + 10);
        lVar23 = (long)*(code **)(puVar2 + 0x12);
        uVar15 = (ulong)*(code **)(puVar2 + 0x14);
        if (iVar24 != 2) {
          uVar9 = uVar31;
          uVar8 = uVar10;
          if (lVar23 != 0) {
            uVar12 = memory_check_code_region(lVar23,uVar15,uVar28,uVar10 << 1);
            local_30 = local_30 | uVar12;
          }
          do {
            uVar11 = (*pcVar33)(lVar30,uVar9 & *puVar1);
            (*pcVar35)(lVar30,uVar28 & *puVar2,uVar11);
            uVar8 = uVar8 - 1;
            uVar9 = uVar9 - 2;
          } while (uVar8 != 0);
          goto joined_r0x00121ea8;
        }
        if (lVar23 != 0) {
          uVar8 = memory_check_code_region(lVar23,uVar15,uVar28,uVar10 * 2);
          local_30 = local_30 | uVar8;
        }
        uVar31 = uVar31 + uVar10 * -2;
        pcVar37 = (code_store_func)(void*)pcVar33;
        do {
          pcVar38 = (code*)((char*)pcVar37 + -2);
          (*pcVar35)(lVar30,uVar28 & *puVar2,*(undefined2 *)pcVar37);
          pcVar37 = (code_store_func)(void*)pcVar38;
        } while (pcVar33 + ~(ulong)(uVar10 - 1) * 2 != pcVar38);
      } while (local_38 != 0);
LAB_0011f928:
      bVar5 = *(int *)(lVar25 + 0x210c) == 1;
      goto LAB_0011f93c;
    }
    if (6 < uVar12) {
      if (uVar12 != 9) {
        if (uVar12 < 10) {
          if (uVar12 == 7) goto LAB_001203e8;
          if (uVar12 == 8) goto LAB_0011fd74;
        }
        else {
          if (uVar12 == 10) {
            lVar36 = param_1[1];
            lVar14 = (ulong)(uVar10 >> 0x17) * 0x60;
            lVar23 = (ulong)(uVar8 >> 0x17) * 0x60;
            puVar1 = (uint *)(lVar36 + lVar14);
            puVar2 = (uint *)(lVar36 + lVar23);
            cVar6 = (char)puVar1[0x16];
            if (cVar6 == '\x01') {
              local_30 = 0;
              pcVar33 = (code_load_func)(void*)*(code **)(puVar1 + 2);
              iVar24 = 2;
            }
            else if (cVar6 == '\x02') {
              iVar24 = 3;
              local_30 = 1;
              pcVar33 = (code_load_func)(void*)*(code **)(puVar1 + 4);
            }
            else if (cVar6 == '\0') {
              local_30 = 0;
              pcVar33 = (code_load_func)(void*)(*(long *)(puVar1 + 2) +
                                (ulong)(uVar31 & *(uint *)(lVar36 + lVar14)));
              iVar24 = 2;
            }
            else {
              pcVar33 = (code_load_func)(void*)(lVar30 + 0x6b070);
              local_30 = 0;
              iVar24 = 2;
            }
            cVar6 = *(char *)((long)puVar2 + 0x59);
            if (cVar6 == '\x01') {
              puVar17 = (undefined2 *)*(code **)(puVar2 + 8);
            }
            else {
              if (cVar6 == '\x02') {
                pcVar35 = (code_store_func)(void*)*(code **)(puVar2 + 10);
                lVar14 = (long)*(code **)(puVar2 + 0x12);
                uVar15 = (ulong)*(code **)(puVar2 + 0x14);
                if (iVar24 == 2) {
                  local_30 = 0;
                  if (lVar14 != 0) {
                    local_30 = memory_check_code_region(lVar14,uVar15,uVar28,local_38 << 1);
                  }
                  do {
                    (*pcVar35)(lVar30,uVar28 & *puVar2,*(undefined2 *)pcVar33);
                    local_38 = local_38 - 1;
                  } while (local_38 != 0);
                }
                else {
                  local_30 = 0;
                  if (lVar14 != 0) {
                    local_30 = memory_check_code_region(lVar14,uVar15,uVar28,local_38 << 1);
                  }
                  do {
                    uVar11 = (*pcVar33)(lVar30,uVar31 & *puVar1);
                    (*pcVar35)(lVar30,uVar28 & *puVar2,uVar11);
                    local_38 = local_38 - 1;
                  } while (local_38 != 0);
                }
                goto LAB_0011fd58;
              }
              if (cVar6 == '\0') {
                puVar17 = (undefined2 *)
                          (*(long *)(puVar2 + 8) + (ulong)(uVar28 & *(uint *)(lVar36 + lVar23)));
              }
              else {
                puVar17 = (undefined2 *)(lVar30 + 0x8b070);
              }
            }
            lVar14 = (long)*(code **)(puVar2 + 0x12);
            uVar15 = (ulong)*(code **)(puVar2 + 0x14);
            if (local_30 == 1) {
              local_30 = 0;
              if (lVar14 != 0) {
                local_30 = memory_check_code_region(lVar14,uVar15,uVar28,local_38 << 1);
              }
              do {
                uVar7 = (*pcVar33)(lVar30,uVar31 & *puVar1);
                *puVar17 = uVar7;
                local_38 = local_38 - 1;
              } while (local_38 != 0);
            }
            else {
              if (lVar14 != 0) {
                local_30 = memory_check_code_region(lVar14,uVar15,uVar28,local_38 << 1);
              }
              do {
                *puVar17 = *(undefined2 *)pcVar33;
                local_38 = local_38 - 1;
              } while (local_38 != 0);
            }
            goto LAB_0011fd58;
          }
          if (uVar12 == 0xb) {
LAB_0011fd74:
            lVar14 = (ulong)(uVar10 >> 0x17) * 0x60;
            local_30 = 0;
            do {
              while( true ) {
                uVar8 = local_38;
                lVar23 = param_1[1];
                lVar36 = (ulong)(uVar28 >> 0x17) * 0x60;
                puVar1 = (uint *)(lVar23 + lVar36);
                puVar2 = (uint *)(lVar23 + lVar14);
                uVar10 = *(uint *)(lVar23 + lVar36);
                if (uVar10 < (uVar28 & uVar10) + local_38 * 2) break;
                cVar6 = (char)puVar2[0x16];
                local_38 = 0;
                if (cVar6 != '\x01') goto LAB_0011fdf8;
LAB_00120ebc:
                pcVar33 = (code_load_func)(void*)*(code **)(puVar2 + 2);
                cVar6 = *(char *)((long)puVar1 + 0x59);
                uVar10 = 0;
                iVar24 = 2;
                if (cVar6 != '\x01') goto LAB_0011fe1c;
LAB_00120eec:
                pcVar35 = (code_store_func)(void*)*(code **)(puVar1 + 8);
LAB_0011fe30:
                lVar23 = (long)*(code **)(puVar1 + 0x12);
                uVar15 = (ulong)*(code **)(puVar1 + 0x14);
                if (uVar10 == 1) {
                  if (lVar23 != 0) {
                    uVar10 = memory_check_code_region(lVar23,uVar15,uVar28,uVar8 * 2);
                    local_30 = local_30 | uVar10;
                  }
                  pcVar37 = pcVar35;
                  do {
                    uVar7 = (*pcVar33)(lVar30,uVar31 & *puVar2);
                    pcVar38 = (code*)((char*)pcVar37 + 2);
                    *(undefined2 *)pcVar37 = uVar7;
                    pcVar37 = (code_store_func)(void*)pcVar38;
                  } while (pcVar35 + ((ulong)(uVar8 - 1) + 1) * 2 != pcVar38);
                }
                else {
                  if (lVar23 != 0) {
                    uVar9 = memory_check_code_region(lVar23,uVar15,uVar28,uVar8 * 2);
                    local_30 = local_30 | uVar9;
                  }
                  uVar9 = uVar8 - 1;
                  if (pcVar33 < pcVar35 + (ulong)uVar8 * 2 && pcVar35 < pcVar33 + 2 || uVar9 < 9) {
                    pcVar37 = pcVar35;
                    do {
                      pcVar38 = (code*)((char*)pcVar37 + 2);
                      *(undefined2 *)pcVar37 = *(undefined2 *)pcVar33;
                      pcVar37 = (code_store_func)(void*)pcVar38;
                    } while (pcVar35 + (ulong)uVar9 * 2 + 2 != pcVar38);
                  }
                  else {
                    uVar7 = *(undefined2 *)pcVar33;
                    *(undefined8 *)auVar40 = CONCAT26(uVar7,CONCAT24(uVar7,CONCAT22(uVar7,uVar7)));
                    *(undefined2 *)(auVar40 + 8) = uVar7;
                    *(undefined2 *)(auVar40 + 10) = uVar7;
                    *(undefined2 *)(auVar40 + 12) = uVar7;
                    *(undefined2 *)(auVar40 + 14) = uVar7;
                    uVar12 = (uVar8 - 8 >> 3) + 1;
                    pcVar37 = pcVar35;
                    do {
                      uVar10 = uVar10 + 1;
                      *(long *)(pcVar37 + 8) = *(long *)(auVar40 + 8);
                      *(undefined8 *)pcVar37 = *(undefined8 *)auVar40;
                      pcVar37 = pcVar37 + 0x10;
                    } while (uVar10 < uVar12);
                    lVar23 = (ulong)(uVar12 * 8) * 2;
                    if (uVar8 != uVar12 * 8) {
                      uVar7 = *(undefined2 *)pcVar33;
                      *(undefined2 *)(pcVar35 + lVar23) = uVar7;
                      iVar24 = uVar9 + uVar12 * -8;
                      if ((iVar24 != 0) &&
                         (*(undefined2 *)(pcVar35 + lVar23 + 2) = uVar7, iVar24 != 1)) {
                        uVar7 = *(undefined2 *)pcVar33;
                        *(undefined2 *)(pcVar35 + lVar23 + 4) = uVar7;
                        if ((iVar24 != 2) &&
                           (*(undefined2 *)(pcVar35 + lVar23 + 6) = uVar7, iVar24 != 3)) {
                          uVar7 = *(undefined2 *)pcVar33;
                          *(undefined2 *)(pcVar35 + lVar23 + 8) = uVar7;
                          if ((iVar24 != 4) &&
                             (*(undefined2 *)(pcVar35 + lVar23 + 10) = uVar7, iVar24 != 5)) {
                            *(undefined2 *)(pcVar35 + lVar23 + 0xc) = *(undefined2 *)pcVar33;
                          }
                        }
                      }
                    }
                  }
                }
                uVar28 = uVar28 + uVar8 * 2;
                if (local_38 == 0) goto LAB_0011f928;
              }
              uVar8 = (uVar10 + 1) - (uVar28 & uVar10) >> 1;
              local_38 = local_38 - uVar8;
              cVar6 = (char)puVar2[0x16];
              if (cVar6 == '\x01') goto LAB_00120ebc;
LAB_0011fdf8:
              if (cVar6 == '\x02') {
                iVar24 = 3;
                uVar10 = 1;
                pcVar33 = (code_load_func)(void*)*(code **)(puVar2 + 4);
              }
              else if (cVar6 == '\0') {
                uVar10 = 0;
                iVar24 = 2;
                pcVar33 = (code_load_func)(void*)(*(long *)(puVar2 + 2) +
                                  (ulong)(uVar31 & *(uint *)(lVar23 + lVar14)));
              }
              else {
                uVar10 = 0;
                iVar24 = 2;
                pcVar33 = (code_load_func)(void*)(lVar30 + 0x6b070);
              }
              cVar6 = *(char *)((long)puVar1 + 0x59);
              if (cVar6 == '\x01') goto LAB_00120eec;
LAB_0011fe1c:
              if (cVar6 != '\x02') {
                pcVar35 = (code_store_func)(void*)(lVar30 + 0x8b070);
                if (cVar6 == '\0') {
                  pcVar35 = (code_store_func)(void*)(*(long *)(puVar1 + 8) +
                                    (ulong)(uVar28 & *(uint *)(lVar23 + lVar36)));
                }
                goto LAB_0011fe30;
              }
              pcVar35 = (code_store_func)(void*)*(code **)(puVar1 + 10);
              lVar23 = (long)*(code **)(puVar1 + 0x12);
              uVar15 = (ulong)*(code **)(puVar1 + 0x14);
              if (iVar24 == 2) {
                uVar9 = uVar28;
                uVar10 = uVar8;
                if (lVar23 != 0) {
                  uVar12 = memory_check_code_region(lVar23,uVar15,uVar28,uVar8 << 1);
                  local_30 = local_30 | uVar12;
                }
                do {
                  (*pcVar35)(lVar30,uVar9 & *puVar1,*(undefined2 *)pcVar33);
                  uVar10 = uVar10 - 1;
                  uVar9 = uVar9 + 2;
                } while (uVar10 != 0);
              }
              else {
                uVar10 = uVar8;
                uVar9 = uVar28;
                if (lVar23 != 0) {
                  uVar12 = memory_check_code_region(lVar23,uVar15,uVar28,uVar8 << 1);
                  local_30 = local_30 | uVar12;
                }
                do {
                  uVar11 = (*pcVar33)(lVar30,uVar31 & *puVar2);
                  (*pcVar35)(lVar30,uVar9 & *puVar1,uVar11);
                  uVar10 = uVar10 - 1;
                  uVar9 = uVar9 + 2;
                } while (uVar10 != 0);
              }
              uVar28 = uVar28 + uVar8 * 2;
            } while (local_38 != 0);
            goto LAB_0011f928;
          }
        }
LAB_001203a8:
        bVar5 = uVar9 == 1;
        local_30 = 0;
        goto LAB_0011f93c;
      }
      lVar14 = (ulong)(uVar10 >> 0x17) * 0x60;
      local_30 = 0;
      do {
        while( true ) {
          uVar10 = local_38;
          lVar23 = param_1[1];
          lVar36 = (ulong)(uVar28 >> 0x17) * 0x60;
          puVar1 = (uint *)(lVar23 + lVar36);
          puVar2 = (uint *)(lVar23 + lVar14);
          uVar8 = uVar28 & *(uint *)(lVar23 + lVar36);
          if (*(uint *)(lVar23 + lVar36) < uVar8 + local_38 * -2) break;
          cVar6 = (char)puVar2[0x16];
          local_38 = 0;
          if (cVar6 != '\x01') goto LAB_00121004;
LAB_001214ec:
          pcVar33 = (code_load_func)(void*)*(code **)(puVar2 + 2);
          cVar6 = *(char *)((long)puVar1 + 0x59);
          uVar8 = 0;
          iVar24 = 2;
          if (cVar6 != '\x01') goto LAB_00121028;
LAB_0012151c:
          puVar17 = (undefined2 *)*(code **)(puVar1 + 8);
LAB_0012103c:
              lVar23 = (long)*(code **)(puVar1 + 0x12);
              uVar15 = (ulong)*(code **)(puVar1 + 0x14);
          if (uVar8 == 1) {
            if (lVar23 != 0) {
              uVar8 = memory_check_code_region(lVar23,uVar15,uVar28,uVar10 * 2);
              local_30 = local_30 | uVar8;
            }
            puVar26 = puVar17;
            do {
              uVar7 = (*pcVar33)(lVar30,uVar31 & *puVar2);
              puVar39 = puVar26 + -1;
              *puVar26 = uVar7;
              puVar26 = puVar39;
            } while (puVar17 + ~(ulong)(uVar10 - 1) != puVar39);
          }
          else {
            if (lVar23 != 0) {
              uVar9 = memory_check_code_region(lVar23,uVar15,uVar28,uVar10 * 2);
              local_30 = local_30 | uVar9;
            }
            uVar9 = uVar10 - 1;
            if (puVar17 + (1 - (ulong)uVar10) < pcVar33 + 2 && pcVar33 < puVar17 + 1 || uVar9 < 9) {
              puVar26 = puVar17;
              do {
                puVar39 = puVar26 + -1;
                *puVar26 = *(undefined2 *)pcVar33;
                puVar26 = puVar39;
              } while ((undefined2 *)((long)puVar17 + ((ulong)uVar9 << 1 ^ 0xfffffffffffffffe)) !=
                       puVar39);
            }
            else {
              uVar12 = (uVar10 - 8 >> 3) + 1;
              uVar7 = *(undefined2 *)pcVar33;
              *(undefined8 *)auVar42 = CONCAT26(uVar7,CONCAT24(uVar7,CONCAT22(uVar7,uVar7)));
              *(undefined2 *)(auVar42 + 8) = uVar7;
              *(undefined2 *)(auVar42 + 10) = uVar7;
              *(undefined2 *)(auVar42 + 12) = uVar7;
              *(undefined2 *)(auVar42 + 14) = uVar7;
              puVar22 = (undefined8 *)(puVar17 + -7);
              do {
                uVar8 = uVar8 + 1;
                puVar22[1] = *(long *)(auVar42 + 8);
                *puVar22 = *(undefined8 *)auVar42;
                puVar22 = puVar22 + -2;
              } while (uVar8 < uVar12);
              uVar16 = (ulong)(uVar12 * 8);
              if (uVar10 != uVar12 * 8) {
                uVar7 = *(undefined2 *)pcVar33;
                puVar17[-uVar16] = uVar7;
                iVar24 = uVar9 + uVar12 * -8;
                if ((iVar24 != 0) && (puVar17[-1 - uVar16] = uVar7, iVar24 != 1)) {
                  uVar7 = *(undefined2 *)pcVar33;
                  puVar17[-2 - uVar16] = uVar7;
                  if ((iVar24 != 2) && (puVar17[-3 - uVar16] = uVar7, iVar24 != 3)) {
                    uVar7 = *(undefined2 *)pcVar33;
                    puVar17[-4 - uVar16] = uVar7;
                    if ((iVar24 != 4) && (puVar17[-5 - uVar16] = uVar7, iVar24 != 5)) {
                      puVar17[-6 - uVar16] = *(undefined2 *)pcVar33;
                    }
                  }
                }
              }
            }
          }
          uVar28 = uVar28 + uVar10 * -2;
          if (local_38 == 0) goto LAB_0011f928;
        }
        uVar10 = (uVar8 >> 1) + 1;
        local_38 = local_38 - uVar10;
        cVar6 = (char)puVar2[0x16];
        if (cVar6 == '\x01') goto LAB_001214ec;
LAB_00121004:
        if (cVar6 == '\x02') {
          iVar24 = 3;
          uVar8 = 1;
          pcVar33 = (code_load_func)(void*)*(code **)(puVar2 + 4);
        }
        else if (cVar6 == '\0') {
          uVar8 = 0;
          iVar24 = 2;
          pcVar33 = (code_load_func)(void*)(*(long *)(puVar2 + 2) + (ulong)(uVar31 & *(uint *)(lVar23 + lVar14)));
        }
        else {
          uVar8 = 0;
          iVar24 = 2;
          pcVar33 = (code_load_func)(void*)(lVar30 + 0x6b070);
        }
        cVar6 = *(char *)((long)puVar1 + 0x59);
        if (cVar6 == '\x01') goto LAB_0012151c;
LAB_00121028:
        if (cVar6 != '\x02') {
          puVar17 = (undefined2 *)(lVar30 + 0x8b070);
          if (cVar6 == '\0') {
            puVar17 = (undefined2 *)
                      (*(long *)(puVar1 + 8) + (ulong)(uVar28 & *(uint *)(lVar23 + lVar36)));
          }
          goto LAB_0012103c;
        }
        pcVar35 = (code_store_func)(void*)*(code **)(puVar1 + 10);
        lVar23 = (long)*(code **)(puVar1 + 0x12);
        uVar15 = (ulong)*(code **)(puVar1 + 0x14);
        if (iVar24 == 2) {
          uVar9 = uVar28;
          uVar8 = uVar10;
          if (lVar23 != 0) {
            uVar12 = memory_check_code_region(lVar23,uVar15,uVar28,uVar10 << 1);
            local_30 = local_30 | uVar12;
          }
          do {
            (*pcVar35)(lVar30,uVar9 & *puVar1,*(undefined2 *)pcVar33);
            uVar8 = uVar8 - 1;
            uVar9 = uVar9 - 2;
          } while (uVar8 != 0);
        }
        else {
          uVar8 = uVar10;
          uVar9 = uVar28;
          if (lVar23 != 0) {
            uVar12 = memory_check_code_region(lVar23,uVar15,uVar28,uVar10 << 1);
            local_30 = local_30 | uVar12;
          }
          do {
            uVar11 = (*pcVar33)(lVar30,uVar31 & *puVar2);
            (*pcVar35)(lVar30,uVar9 & *puVar1,uVar11);
            uVar8 = uVar8 - 1;
            uVar9 = uVar9 - 2;
          } while (uVar8 != 0);
        }
        uVar28 = uVar28 + uVar10 * -2;
      } while (local_38 != 0);
      goto LAB_0011f928;
    }
    if (uVar12 == 2) {
      lVar14 = (ulong)(uVar8 >> 0x17) * 0x60;
      local_30 = 0;
      do {
        uVar9 = local_38;
        lVar36 = param_1[1];
        lVar23 = (ulong)(uVar31 >> 0x17) * 0x60;
        puVar1 = (uint *)(lVar36 + lVar23);
        uVar8 = *(uint *)(lVar36 + lVar23);
        puVar2 = (uint *)(lVar36 + lVar14);
        uVar10 = uVar31 & uVar8;
        if (uVar8 < uVar10 + local_38 * 2) {
          uVar9 = (uVar8 + 1) - uVar10 >> 1;
          local_38 = local_38 - uVar9;
          cVar6 = (char)puVar1[0x16];
          if (cVar6 == '\x01') goto LAB_00121490;
LAB_001211f0:
          if (cVar6 == '\x02') {
            iVar24 = 3;
            bVar5 = true;
            pcVar33 = (code_load_func)(void*)*(code **)(puVar1 + 4);
          }
          else if (cVar6 == '\0') {
            iVar24 = 2;
            bVar5 = false;
            pcVar33 = (code_load_func)(void*)(*(long *)(puVar1 + 2) + (ulong)uVar10);
          }
          else {
            pcVar33 = (code_load_func)(void*)(lVar30 + 0x6b070);
            iVar24 = 2;
            bVar5 = false;
          }
          cVar6 = *(char *)((long)puVar2 + 0x59);
          if (cVar6 == '\x01') goto LAB_001214c0;
LAB_00121218:
          if (cVar6 != '\x02') {
            puVar17 = (undefined2 *)(lVar30 + 0x8b070);
            if (cVar6 == '\0') {
              puVar17 = (undefined2 *)
                        (*(long *)(puVar2 + 8) + (ulong)(uVar28 & *(uint *)(lVar36 + lVar14)));
            }
            goto LAB_00121228;
          }
          pcVar35 = (code_store_func)(void*)*(code **)(puVar2 + 10);
          lVar23 = (long)*(code **)(puVar2 + 0x12);
          uVar15 = (ulong)*(code **)(puVar2 + 0x14);
          if (iVar24 == 2) {
            if (lVar23 != 0) {
              uVar10 = memory_check_code_region(lVar23,uVar15,uVar28,uVar9 * 2);
              local_30 = local_30 | uVar10;
            }
            uVar31 = uVar31 + uVar9 * 2;
            pcVar37 = pcVar33;
            do {
              pcVar38 = (code*)((char*)pcVar37 + 2);
              (*pcVar35)(lVar30,uVar28 & *puVar2,*(undefined2 *)pcVar37);
              pcVar37 = (code_store_func)(void*)pcVar38;
            } while (pcVar33 + ((ulong)(uVar9 - 1) + 1) * 2 != pcVar38);
          }
          else {
            uVar8 = uVar31;
            uVar10 = uVar9;
            if (lVar23 != 0) {
              uVar12 = memory_check_code_region(lVar23,uVar15,uVar28,uVar9 << 1);
              local_30 = local_30 | uVar12;
            }
            do {
              uVar11 = (*pcVar33)(lVar30,uVar8 & *puVar1);
              (*pcVar35)(lVar30,uVar28 & *puVar2,uVar11);
              uVar10 = uVar10 - 1;
              uVar8 = uVar8 + 2;
            } while (uVar10 != 0);
            uVar31 = uVar31 + uVar9 * 2;
          }
        }
        else {
          cVar6 = (char)puVar1[0x16];
          local_38 = 0;
          if (cVar6 != '\x01') goto LAB_001211f0;
LAB_00121490:
          pcVar33 = (code_load_func)(void*)*(code **)(puVar1 + 2);
          cVar6 = *(char *)((long)puVar2 + 0x59);
          iVar24 = 2;
          bVar5 = false;
          if (cVar6 != '\x01') goto LAB_00121218;
LAB_001214c0:
          puVar17 = (undefined2 *)*(code **)(puVar2 + 8);
LAB_00121228:
          lVar23 = (long)*(code **)(puVar2 + 0x12);
          uVar15 = (ulong)*(code **)(puVar2 + 0x14);
          if (bVar5) {
            uVar8 = uVar31;
            uVar10 = uVar9;
            if (lVar23 != 0) {
              uVar12 = memory_check_code_region(lVar23,uVar15,uVar28,uVar9 << 1);
              local_30 = local_30 | uVar12;
            }
            do {
              uVar7 = (*pcVar33)(lVar30,uVar8 & *puVar1);
              *puVar17 = uVar7;
              uVar10 = uVar10 - 1;
              uVar8 = uVar8 + 2;
            } while (uVar10 != 0);
            uVar31 = uVar31 + uVar9 * 2;
          }
          else {
            if (lVar23 != 0) {
              uVar10 = memory_check_code_region(lVar23,uVar15,uVar28,uVar9 * 2);
              local_30 = local_30 | uVar10;
            }
            uVar31 = uVar31 + uVar9 * 2;
            pcVar35 = pcVar33;
            do {
              pcVar37 = pcVar35 + 2;
              *puVar17 = *(undefined2 *)pcVar35;
              pcVar35 = pcVar37;
            } while (pcVar33 + ((ulong)(uVar9 - 1) + 1) * 2 != pcVar37);
          }
        }
      } while (local_38 != 0);
    }
    else {
      if (2 < uVar12) {
        if (uVar12 == 4) {
LAB_001203e8:
          local_30 = 0;
          do {
            while( true ) {
              lVar23 = param_1[1];
              lVar14 = (ulong)(uVar31 >> 0x17) * 0x60;
              lVar36 = (ulong)(uVar28 >> 0x17) * 0x60;
              puVar1 = (uint *)(lVar23 + lVar14);
              puVar2 = (uint *)(lVar23 + lVar36);
              uVar9 = *(uint *)(lVar23 + lVar14);
              uVar8 = uVar31 & uVar9;
              uVar10 = local_38;
              if (uVar9 < uVar8 + local_38 * -2) {
                uVar10 = (uVar8 >> 1) + 1;
              }
              uVar12 = *(uint *)(lVar23 + lVar36);
              cVar6 = (char)puVar1[0x16];
              uVar9 = (uVar12 + 1) - (uVar28 & uVar12) >> 1;
              if ((uVar28 & uVar12) + uVar10 * 2 <= uVar12) {
                uVar9 = uVar10;
              }
              if (cVar6 == '\x01') break;
              if (cVar6 == '\x02') {
                iVar24 = 3;
                uVar10 = 1;
                pcVar33 = (code_load_func)(void*)*(code **)(puVar1 + 4);
                goto LAB_00120484;
              }
              if (cVar6 != '\0') {
                pcVar33 = (code_load_func)(void*)(lVar30 + 0x6b070);
                uVar10 = 0;
                iVar24 = 2;
                goto LAB_00120484;
              }
              uVar10 = 0;
              iVar24 = 2;
              pcVar33 = (code_load_func)(void*)(*(long *)(puVar1 + 2) + (ulong)uVar8);
              cVar6 = *(char *)((long)puVar2 + 0x59);
              if (cVar6 != '\x01') goto LAB_00120490;
LAB_00122028:
              pcVar35 = (code_store_func)(void*)*(code **)(puVar2 + 8);
LAB_001204a4:
              lVar14 = (long)*(code **)(puVar2 + 0x12);
              uVar15 = (ulong)*(code **)(puVar2 + 0x14);
              local_38 = local_38 - uVar9;
              if (uVar10 == 1) {
                if (lVar14 != 0) {
                  uVar10 = memory_check_code_region((uint*)&lVar14,(uint*)&uVar15,uVar28,0);
                  local_30 = local_30 | uVar10;
                }
                uVar28 = uVar28 + uVar9 * 2;
                pcVar37 = pcVar35;
                do {
                  uVar7 = (*pcVar33)(lVar30,(uVar31 + (int)pcVar35) - (int)pcVar37 & *puVar1);
                  pcVar38 = (code*)((char*)pcVar37 + 2);
                  *(undefined2 *)pcVar37 = uVar7;
                  pcVar37 = (code_store_func)(void*)pcVar38;
                } while (pcVar35 + ((ulong)(uVar9 - 1) + 1) * 2 != pcVar38);
                uVar31 = uVar31 + uVar9 * -2;
              }
              else {
                if (lVar14 != 0) {
                  uVar8 = memory_check_code_region(lVar14,uVar15,uVar28,uVar9 * 2);
                  local_30 = local_30 | uVar8;
                }
                memcpy(auVar40, _DAT_0021d610, 16);
                uVar8 = uVar9 - 1;
                uVar31 = uVar31 + uVar9 * -2;
                uVar28 = uVar28 + uVar9 * 2;
                if (pcVar33 + (ulong)uVar9 * -2 + 2 < pcVar35 + (ulong)uVar9 * 2 &&
                    pcVar35 < pcVar33 + 2 || uVar8 < 9) {
                  pcVar37 = pcVar35;
                  do {
                    pcVar38 = (code*)((char*)pcVar37 + 2);
                    *(undefined2 *)pcVar37 = *(undefined2 *)pcVar33;
                    pcVar37 = (code_store_func)(void*)pcVar38;
                    pcVar33 = pcVar33 + -2;
                  } while (pcVar35 + (ulong)uVar8 * 2 + 2 != pcVar38);
                }
                else {
                  uVar12 = (uVar9 - 8 >> 3) + 1;
                  pauVar34 = (undefined1 (*) [16])(pcVar33 + -0xe);
                  pcVar37 = pcVar35;
                  do {
                    uVar10 = uVar10 + 1;
                    a64_TBL(ZEXT816(0),*pauVar34,auVar40,auVar42);
                    *(long *)(pcVar37 + 8) = *(long *)(auVar42 + 8);
                    *(long *)pcVar37 = *(long *)auVar42;
                    pauVar34 = pauVar34 + -1;
                    pcVar37 = pcVar37 + 0x10;
                  } while (uVar10 < uVar12);
                  uVar10 = uVar12 * 8;
                  lVar14 = (ulong)uVar10 * -2;
                  lVar23 = (ulong)uVar10 * 2;
                  if (uVar9 != uVar10) {
                    *(undefined2 *)(pcVar35 + lVar23) = *(undefined2 *)(pcVar33 + lVar14);
                    iVar24 = uVar8 + uVar12 * -8;
                    if (((((iVar24 != 0) &&
                          (*(undefined2 *)(pcVar35 + lVar23 + 2) =
                                *(undefined2 *)(pcVar33 + lVar14 + -2), iVar24 != 1)) &&
                         (*(undefined2 *)(pcVar35 + lVar23 + 4) =
                               *(undefined2 *)(pcVar33 + lVar14 + -4), iVar24 != 2)) &&
                        ((*(undefined2 *)(pcVar35 + lVar23 + 6) =
                               *(undefined2 *)(pcVar33 + lVar14 + -6), iVar24 != 3 &&
                         (*(undefined2 *)(pcVar35 + lVar23 + 8) =
                               *(undefined2 *)(pcVar33 + lVar14 + -8), iVar24 != 4)))) &&
                       (*(undefined2 *)(pcVar35 + lVar23 + 10) =
                             *(undefined2 *)(pcVar33 + lVar14 + -10), iVar24 != 5)) {
                      *(undefined2 *)(pcVar35 + lVar23 + 0xc) =
                           *(undefined2 *)(pcVar33 + lVar14 + -0xc);
                    }
                  }
                }
              }
              if (local_38 == 0) goto LAB_0011f928;
            }
            pcVar33 = (code_load_func)(void*)*(code **)(puVar1 + 2);
            uVar10 = 0;
            iVar24 = 2;
LAB_00120484:
            cVar6 = *(char *)((long)puVar2 + 0x59);
            if (cVar6 == '\x01') goto LAB_00122028;
LAB_00120490:
            if (cVar6 != '\x02') {
              pcVar35 = (code_store_func)(void*)(lVar30 + 0x8b070);
              if (cVar6 == '\0') {
                pcVar35 = (code_store_func)(void*)(*(long *)(puVar2 + 8) +
                                  (ulong)(uVar28 & *(uint *)(lVar23 + lVar36)));
              }
              goto LAB_001204a4;
            }
            pcVar35 = (code_store_func)(void*)*(code **)(puVar2 + 10);
            lVar14 = (long)*(code **)(puVar2 + 0x12);
            uVar15 = (ulong)*(code **)(puVar2 + 0x14);
            local_38 = local_38 - uVar9;
            if (iVar24 == 2) {
              if (lVar14 != 0) {
                uVar10 = memory_check_code_region(lVar14,uVar15,uVar28,uVar9 * 2);
                local_30 = local_30 | uVar10;
              }
              pcVar37 = pcVar33;
              do {
                pcVar38 = (code*)((char*)pcVar37 + -2);
                (*pcVar35)(lVar30,(uVar28 + (int)pcVar33) - (int)pcVar37 & *puVar2,
                           *(undefined2 *)pcVar37);
                pcVar37 = (code_store_func)(void*)pcVar38;
              } while (pcVar33 + ((ulong)(uVar9 - 1) << 1 ^ 0xfffffffffffffffe) != pcVar38);
              uVar28 = uVar28 + 2 + (uVar9 - 1) * 2;
            }
            else {
              if (lVar14 != 0) {
                uVar10 = memory_check_code_region(lVar14,uVar15,uVar28,uVar9 << 1);
                local_30 = local_30 | uVar10;
              }
              uVar8 = uVar9;
              uVar10 = uVar31;
              do {
                uVar11 = (*pcVar33)(lVar30,uVar10 & *puVar1);
                (*pcVar35)(lVar30,(uVar31 + uVar28) - uVar10 & *puVar2,uVar11);
                uVar10 = uVar10 - 2;
                uVar8 = uVar8 - 1;
              } while (uVar8 != 0);
              uVar28 = uVar28 + uVar9 * 2;
            }
            uVar31 = uVar31 + uVar9 * -2;
          } while (local_38 != 0);
        }
        else {
          if (uVar12 != 5) {
            if (uVar12 != 3) goto LAB_001203a8;
            goto LAB_00120178;
          }
          local_30 = 0;
          do {
            while( true ) {
              lVar23 = param_1[1];
              lVar36 = (ulong)(uVar28 >> 0x17) * 0x60;
              lVar14 = (ulong)(uVar31 >> 0x17) * 0x60;
              puVar1 = (uint *)(lVar23 + lVar14);
              uVar9 = *(uint *)(lVar23 + lVar14);
              puVar2 = (uint *)(lVar23 + lVar36);
              uVar8 = uVar31 & uVar9;
              uVar10 = local_38;
              if (uVar9 < uVar8 + local_38 * -2) {
                uVar10 = (uVar8 >> 1) + 1;
              }
              cVar6 = (char)puVar1[0x16];
              uVar9 = uVar28 & *(uint *)(lVar23 + lVar36);
              if (*(uint *)(lVar23 + lVar36) < uVar9 + uVar10 * -2) {
                uVar10 = (uVar9 >> 1) + 1;
              }
              if (cVar6 == '\x01') break;
              if (cVar6 == '\x02') {
                iVar24 = 3;
                uVar9 = 1;
                pcVar33 = (code_load_func)(void*)*(code **)(puVar1 + 4);
                goto LAB_0011fb08;
              }
              if (cVar6 != '\0') {
                uVar9 = 0;
                iVar24 = 2;
                pcVar33 = (code_load_func)(void*)(lVar30 + 0x6b070);
                goto LAB_0011fb08;
              }
              uVar9 = 0;
              iVar24 = 2;
              pcVar33 = (code_load_func)(void*)(*(long *)(puVar1 + 2) + (ulong)uVar8);
              cVar6 = *(char *)((long)puVar2 + 0x59);
              if (cVar6 != '\x01') goto LAB_0011fb14;
LAB_00122094:
              puVar17 = (undefined2 *)*(code **)(puVar2 + 8);
LAB_0011fb24:
              lVar14 = (long)*(code **)(puVar2 + 0x12);
              uVar15 = (ulong)*(code **)(puVar2 + 0x14);
              local_38 = local_38 - uVar10;
              if (uVar9 == 1) {
                if (lVar14 != 0) {
                  uVar8 = memory_check_code_region((uint*)&lVar14,(uint*)&uVar15,uVar28,0);
                  local_30 = local_30 | uVar8;
                }
                uVar28 = uVar28 + uVar10 * -2;
                puVar26 = puVar17;
                do {
                  uVar7 = (*pcVar33)(lVar30,(uVar31 - (int)puVar17) + (int)puVar26 & *puVar1);
                  puVar39 = puVar26 + -1;
                  *puVar26 = uVar7;
                  puVar26 = puVar39;
                } while (puVar17 + ~(ulong)(uVar10 - 1) != puVar39);
                uVar31 = uVar31 + uVar10 * -2;
              }
              else {
                if (lVar14 != 0) {
                  uVar8 = memory_check_code_region(lVar14,uVar15,uVar28,uVar10 * 2);
                  local_30 = local_30 | uVar8;
                }
                uVar8 = uVar10 - 1;
                uVar31 = uVar31 + uVar10 * -2;
                uVar28 = uVar28 + uVar10 * -2;
                if (pcVar33 + -0xe < puVar17 + 1 && puVar17 + -7 < pcVar33 + 2 || uVar8 < 9) {
                  uVar16 = 0;
                  do {
                    *(undefined2 *)((long)puVar17 + uVar16) = *(undefined2 *)(pcVar33 + uVar16);
                    uVar16 = uVar16 - 2;
                  } while (((ulong)uVar8 << 1 ^ 0xfffffffffffffffe) != uVar16);
                }
                else {
                  lVar14 = -0xe;
                  uVar12 = (uVar10 - 8 >> 3) + 1;
                  do {
                    memcpy(auVar40, (undefined1*)(pcVar33 + lVar14), 16);
                    uVar9 = uVar9 + 1;
                    ((undefined8 *)((long)puVar17 + lVar14))[1] = *(long *)(auVar40 + 8);
                    *(undefined8 *)((long)puVar17 + lVar14) = *(long *)auVar40;
                    lVar14 = lVar14 + -0x10;
                  } while (uVar9 < uVar12);
                  uVar16 = (ulong)(uVar12 * 8);
                  lVar14 = uVar16 * -2;
                  if (uVar10 != uVar12 * 8) {
                    puVar17[-uVar16] = *(undefined2 *)(pcVar33 + lVar14);
                    iVar24 = uVar8 + uVar12 * -8;
                    if (((iVar24 != 0) &&
                        (puVar17[-1 - uVar16] = *(undefined2 *)(pcVar33 + lVar14 + -2), iVar24 != 1)
                        ) && ((puVar17[-2 - uVar16] = *(undefined2 *)(pcVar33 + lVar14 + -4),
                              iVar24 != 2 &&
                              (((puVar17[-3 - uVar16] = *(undefined2 *)(pcVar33 + lVar14 + -6),
                                iVar24 != 3 &&
                                (puVar17[-4 - uVar16] = *(undefined2 *)(pcVar33 + lVar14 + -8),
                                iVar24 != 4)) &&
                               (puVar17[-5 - uVar16] = *(undefined2 *)(pcVar33 + lVar14 + -10),
                               iVar24 != 5)))))) {
                      puVar17[-6 - uVar16] = *(undefined2 *)(pcVar33 + lVar14 + -0xc);
                    }
                  }
                }
              }
joined_r0x00122690:
              if (local_38 == 0) goto LAB_0011f928;
            }
            pcVar33 = (code_load_func)(void*)*(code **)(puVar1 + 2);
            uVar9 = 0;
            iVar24 = 2;
LAB_0011fb08:
            cVar6 = *(char *)((long)puVar2 + 0x59);
            if (cVar6 == '\x01') goto LAB_00122094;
LAB_0011fb14:
            if (cVar6 != '\x02') {
              puVar17 = (undefined2 *)(lVar30 + 0x8b070);
              if (cVar6 == '\0') {
                puVar17 = (undefined2 *)
                          (*(long *)(puVar2 + 8) + (ulong)(uVar28 & *(uint *)(lVar23 + lVar36)));
              }
              goto LAB_0011fb24;
            }
            pcVar35 = (code_store_func)(void*)*(code **)(puVar2 + 10);
            lVar14 = (long)*(code **)(puVar2 + 0x12);
            uVar15 = (ulong)*(code **)(puVar2 + 0x14);
            local_38 = local_38 - uVar10;
            if (iVar24 != 2) {
              if (lVar14 != 0) {
                uVar8 = memory_check_code_region(lVar14,uVar15,uVar28,uVar10 << 1);
                local_30 = local_30 | uVar8;
              }
              uVar9 = uVar10;
              uVar8 = uVar31;
              do {
                uVar11 = (*pcVar33)(lVar30,uVar8 & *puVar1);
                (*pcVar35)(lVar30,(uVar28 - uVar31) + uVar8 & *puVar2,uVar11);
                uVar8 = uVar8 - 2;
                uVar9 = uVar9 - 1;
              } while (uVar9 != 0);
              uVar31 = uVar31 + uVar10 * -2;
              uVar28 = uVar28 + uVar10 * -2;
              goto joined_r0x00122690;
            }
            if (lVar14 != 0) {
              uVar8 = memory_check_code_region(lVar14,uVar15,uVar28,uVar10 * 2);
              local_30 = local_30 | uVar8;
            }
            uVar31 = uVar31 + uVar10 * -2;
            pcVar37 = pcVar33;
            do {
              pcVar38 = (code*)((char*)pcVar37 + -2);
              (*pcVar35)(lVar30,(uVar28 - (int)pcVar33) + (int)pcVar37 & *puVar2,
                         *(undefined2 *)pcVar37);
              pcVar37 = (code_store_func)(void*)pcVar38;
            } while (pcVar33 + ~(ulong)(uVar10 - 1) * 2 != pcVar38);
            uVar28 = uVar28 + uVar10 * -2;
          } while (local_38 != 0);
        }
        goto LAB_0011f928;
      }
      if (uVar12 == 0) {
LAB_00120178:
        local_30 = 0;
        do {
          while( true ) {
            uVar10 = local_38 * 2;
            lVar23 = param_1[1];
            lVar14 = (ulong)(uVar31 >> 0x17) * 0x60;
            lVar36 = (ulong)(uVar28 >> 0x17) * 0x60;
            puVar1 = (uint *)(lVar23 + lVar14);
            puVar2 = (uint *)(lVar23 + lVar36);
            uVar9 = *(uint *)(lVar23 + lVar14);
            uVar8 = uVar31 & uVar9;
            uVar12 = local_38;
            if (uVar9 < uVar10 + uVar8) {
              uVar12 = (uVar9 + 1) - uVar8;
              uVar10 = uVar12 & 0xfffffffe;
              uVar12 = uVar12 >> 1;
            }
            uVar3 = *(uint *)(lVar23 + lVar36);
            cVar6 = (char)puVar1[0x16];
            uVar9 = (uVar3 + 1) - (uVar28 & uVar3) >> 1;
            if ((uVar28 & uVar3) + uVar10 <= uVar3) {
              uVar9 = uVar12;
            }
            if (cVar6 == '\x01') break;
            if (cVar6 == '\x02') {
              iVar24 = 3;
              uVar10 = 1;
              pcVar33 = (code_load_func)(void*)*(code **)(puVar1 + 4);
              goto LAB_00120218;
            }
            if (cVar6 != '\0') {
              uVar10 = 0;
              iVar24 = 2;
              pcVar33 = (code_load_func)(void*)(lVar30 + 0x6b070);
              goto LAB_00120218;
            }
            uVar10 = 0;
            iVar24 = 2;
            pcVar33 = (code_load_func)(void*)(*(long *)(puVar1 + 2) + (ulong)uVar8);
            cVar6 = *(char *)((long)puVar2 + 0x59);
            if (cVar6 != '\x01') goto LAB_00120224;
LAB_00122100:
            puVar17 = (undefined2 *)*(code **)(puVar2 + 8);
LAB_00120234:
            lVar14 = (long)*(code **)(puVar2 + 0x12);
            uVar15 = (ulong)*(code **)(puVar2 + 0x14);
            local_38 = local_38 - uVar9;
            if (uVar10 == 1) {
              if (lVar14 != 0) {
                uVar10 = memory_check_code_region((uint*)&lVar14,(uint*)&uVar15,uVar28,0);
                local_30 = local_30 | uVar10;
              }
              uVar28 = uVar28 + uVar9 * 2;
              puVar26 = puVar17;
              do {
                uVar7 = (*pcVar33)(lVar30,(uVar31 - (int)puVar17) + (int)puVar26 & *puVar1);
                puVar39 = puVar26 + 1;
                *puVar26 = uVar7;
                puVar26 = puVar39;
              } while (puVar39 != puVar17 + (ulong)(uVar9 - 1) + 1);
              uVar31 = uVar31 + 2 + (uVar9 - 1) * 2;
            }
            else {
              iVar24 = uVar9 * 2;
              if (lVar14 != 0) {
                uVar8 = memory_check_code_region(lVar14,uVar15,uVar28,iVar24);
                local_30 = local_30 | uVar8;
              }
              uVar8 = uVar9 - 1;
              uVar31 = uVar31 + iVar24;
              uVar28 = uVar28 + iVar24;
              if (pcVar33 + (0xf - (long)puVar17) < (code *)0x1f || uVar8 < 9) {
                lVar14 = 0;
                do {
                  *(undefined2 *)((long)puVar17 + lVar14) = *(undefined2 *)(pcVar33 + lVar14);
                  lVar14 = lVar14 + 2;
                } while ((ulong)uVar8 * 2 + 2 != lVar14);
              }
              else {
                lVar14 = 0;
                uVar12 = (uVar9 - 8 >> 3) + 1;
                do {
                  memcpy(auVar40, (undefined1*)(pcVar33 + lVar14), 16);
                  uVar10 = uVar10 + 1;
                  ((undefined8 *)((long)puVar17 + lVar14))[1] = *(long *)(auVar40 + 8);
                  *(undefined8 *)((long)puVar17 + lVar14) = *(long *)auVar40;
                  lVar14 = lVar14 + 0x10;
                } while (uVar10 < uVar12);
                uVar16 = (ulong)(uVar12 * 8);
                lVar14 = uVar16 * 2;
                if (uVar9 != uVar12 * 8) {
                  puVar17[uVar16] = *(undefined2 *)(pcVar33 + lVar14);
                  iVar24 = uVar8 + uVar12 * -8;
                  if ((((iVar24 != 0) &&
                       (puVar17[uVar16 + 1] = *(undefined2 *)(pcVar33 + lVar14 + 2), iVar24 != 1))
                      && (puVar17[uVar16 + 2] = *(undefined2 *)(pcVar33 + lVar14 + 4), iVar24 != 2))
                     && (((puVar17[uVar16 + 3] = *(undefined2 *)(pcVar33 + lVar14 + 6), iVar24 != 3
                          && (puVar17[uVar16 + 4] = *(undefined2 *)(pcVar33 + lVar14 + 8),
                             iVar24 != 4)) &&
                         (puVar17[uVar16 + 5] = *(undefined2 *)(pcVar33 + lVar14 + 10), iVar24 != 5)
                         ))) {
                    puVar17[uVar16 + 6] = *(undefined2 *)(pcVar33 + lVar14 + 0xc);
                  }
                }
              }
            }
joined_r0x00122368:
            if (local_38 == 0) goto LAB_00120378;
          }
          pcVar33 = (code_load_func)(void*)*(code **)(puVar1 + 2);
          uVar10 = 0;
          iVar24 = 2;
LAB_00120218:
          cVar6 = *(char *)((long)puVar2 + 0x59);
          if (cVar6 == '\x01') goto LAB_00122100;
LAB_00120224:
          if (cVar6 != '\x02') {
            puVar17 = (undefined2 *)(lVar30 + 0x8b070);
            if (cVar6 == '\0') {
              puVar17 = (undefined2 *)
                        (*(long *)(puVar2 + 8) + (ulong)(uVar28 & *(uint *)(lVar23 + lVar36)));
            }
            goto LAB_00120234;
          }
          pcVar35 = (code_store_func)(void*)*(code **)(puVar2 + 10);
          lVar14 = (long)*(code **)(puVar2 + 0x12);
          uVar15 = (ulong)*(code **)(puVar2 + 0x14);
          local_38 = local_38 - uVar9;
          if (iVar24 != 2) {
            if (lVar14 != 0) {
              uVar10 = memory_check_code_region(lVar14,uVar15,uVar28,uVar9 << 1);
              local_30 = local_30 | uVar10;
            }
            uVar8 = uVar9;
            uVar10 = uVar31;
            do {
              uVar11 = (*pcVar33)(lVar30,uVar10 & *puVar1);
              (*pcVar35)(lVar30,(uVar28 - uVar31) + uVar10 & *puVar2,uVar11);
              uVar10 = uVar10 + 2;
              uVar8 = uVar8 - 1;
            } while (uVar8 != 0);
            iVar24 = (uVar9 - 1) * 2;
            uVar31 = uVar31 + 2 + iVar24;
            uVar28 = uVar28 + 2 + iVar24;
            goto joined_r0x00122368;
          }
          if (lVar14 != 0) {
            uVar10 = memory_check_code_region(lVar14,uVar15,uVar28,uVar9 * 2);
            local_30 = local_30 | uVar10;
          }
          uVar31 = uVar31 + uVar9 * 2;
          pcVar37 = pcVar33;
          do {
            pcVar38 = (code*)((char*)pcVar37 + 2);
            (*pcVar35)(lVar30,(uVar28 - (int)pcVar33) + (int)pcVar37 & *puVar2,
                       *(undefined2 *)pcVar37);
            pcVar37 = (code_store_func)(void*)pcVar38;
          } while (pcVar33 + (ulong)(uVar9 - 1) * 2 + 2 != pcVar38);
          uVar28 = uVar28 + 2 + (uVar9 - 1) * 2;
        } while (local_38 != 0);
        goto LAB_00120378;
      }
      local_30 = 0;
      if (uVar12 != 1) goto LAB_001203a8;
      do {
        while( true ) {
          uVar10 = local_38 * 2;
          lVar23 = param_1[1];
          lVar14 = (ulong)(uVar31 >> 0x17) * 0x60;
          lVar36 = (ulong)(uVar28 >> 0x17) * 0x60;
          puVar1 = (uint *)(lVar23 + lVar14);
          puVar2 = (uint *)(lVar23 + lVar36);
          uVar12 = *(uint *)(lVar23 + lVar14);
          uVar8 = uVar31 & uVar12;
          uVar9 = local_38;
          if (uVar12 < uVar10 + uVar8) {
            uVar9 = (uVar12 + 1) - uVar8;
            uVar10 = uVar9 & 0xfffffffe;
            uVar9 = uVar9 >> 1;
          }
          cVar6 = (char)puVar1[0x16];
          uVar12 = uVar28 & *(uint *)(lVar23 + lVar36);
          if (*(uint *)(lVar23 + lVar36) < uVar12 - uVar10) {
            uVar9 = (uVar12 >> 1) + 1;
          }
          if (cVar6 == '\x01') break;
          if (cVar6 == '\x02') {
            uVar10 = 1;
            iVar24 = 3;
            pauVar34 = *(undefined1 (**) [16])(puVar1 + 4);
            goto LAB_0011ffe0;
          }
          if (cVar6 != '\0') {
            pauVar34 = (undefined1 (*) [16])(lVar30 + 0x6b070);
            uVar10 = 0;
            iVar24 = 2;
            goto LAB_0011ffe0;
          }
          uVar10 = 0;
          iVar24 = 2;
          pauVar34 = (undefined1 (*) [16])(*(long *)(puVar1 + 2) + (ulong)uVar8);
          cVar6 = *(char *)((long)puVar2 + 0x59);
          if (cVar6 != '\x01') goto LAB_0011ffec;
LAB_0012216c:
          puVar17 = (undefined2 *)*(code **)(puVar2 + 8);
LAB_00120000:
          lVar14 = (long)*(code **)(puVar2 + 0x12);
          uVar15 = (ulong)*(code **)(puVar2 + 0x14);
          local_38 = local_38 - uVar9;
          if (uVar10 == 1) {
            if (lVar14 != 0) {
              uVar10 = memory_check_code_region((uint*)&lVar14,(uint*)&uVar15,uVar28,0);
              local_30 = local_30 | uVar10;
            }
            uVar28 = uVar28 + uVar9 * -2;
            puVar26 = puVar17;
            do {
              uVar7 = (*(code_load_func *)pauVar34)(lVar30,(uVar31 + (int)puVar17) - (int)puVar26 & *puVar1);
              puVar39 = puVar26 + -1;
              *puVar26 = uVar7;
              puVar26 = puVar39;
            } while ((undefined2 *)((long)puVar17 + ((ulong)(uVar9 - 1) << 1 ^ 0xfffffffffffffffe))
                     != puVar39);
            uVar31 = uVar31 + 2 + (uVar9 - 1) * 2;
          }
          else {
            if (lVar14 != 0) {
              uVar8 = memory_check_code_region(lVar14,uVar15,uVar28,uVar9 * 2);
              local_30 = local_30 | uVar8;
            }
            memcpy(auVar40, _DAT_0021d610, 16);
            uVar8 = uVar9 - 1;
            uVar31 = uVar31 + uVar9 * 2;
            uVar28 = uVar28 + uVar9 * -2;
            if (puVar17 + (1 - (ulong)uVar9) < *pauVar34 + (ulong)uVar9 * 2 &&
                pauVar34 < (undefined1 (*) [16])(puVar17 + 1) || uVar8 < 9) {
              puVar26 = puVar17;
              do {
                puVar39 = puVar26 + -1;
                *puVar26 = *(undefined2 *)*pauVar34;
                puVar26 = puVar39;
                pauVar34 = (undefined1 (*) [16])(*pauVar34 + 2);
              } while ((undefined2 *)((long)puVar17 + ((ulong)uVar8 << 1 ^ 0xfffffffffffffffe)) !=
                       puVar39);
            }
            else {
              uVar12 = (uVar9 - 8 >> 3) + 1;
              pauVar21 = pauVar34;
              puVar22 = (undefined8 *)(puVar17 + -7);
              do {
                uVar10 = uVar10 + 1;
                a64_TBL(ZEXT816(0),*pauVar21,auVar40,auVar42);
                puVar22[1] = *(long *)(auVar42 + 8);
                *puVar22 = *(long *)auVar42;
                pauVar21 = pauVar21 + 1;
                puVar22 = puVar22 + -2;
              } while (uVar10 < uVar12);
              uVar16 = (ulong)(uVar12 * 8);
              lVar14 = uVar16 * 2;
              if (uVar9 != uVar12 * 8) {
                puVar17[-uVar16] = *(undefined2 *)(*pauVar34 + lVar14);
                iVar24 = uVar8 + uVar12 * -8;
                if (((iVar24 != 0) &&
                    (puVar17[-1 - uVar16] = *(undefined2 *)(*pauVar34 + lVar14 + 2), iVar24 != 1))
                   && (((puVar17[-2 - uVar16] = *(undefined2 *)(*pauVar34 + lVar14 + 4), iVar24 != 2
                        && ((puVar17[-3 - uVar16] = *(undefined2 *)(*pauVar34 + lVar14 + 6),
                            iVar24 != 3 &&
                            (puVar17[-4 - uVar16] = *(undefined2 *)(*pauVar34 + lVar14 + 8),
                            iVar24 != 4)))) &&
                       (puVar17[-5 - uVar16] = *(undefined2 *)(*pauVar34 + lVar14 + 10), iVar24 != 5
                       )))) {
                  puVar17[-6 - uVar16] = *(undefined2 *)(*pauVar34 + lVar14 + 0xc);
                }
              }
            }
          }
          if (local_38 == 0) goto LAB_001212a8;
        }
        pauVar34 = (undefined1 (*) [16])(**(code_load_func **)(puVar1 + 2))(lVar30,uVar31);
        uVar10 = 0;
        iVar24 = 2;
LAB_0011ffe0:
        cVar6 = *(char *)((long)puVar2 + 0x59);
        if (cVar6 == '\x01') goto LAB_0012216c;
LAB_0011ffec:
        if (cVar6 != '\x02') {
          puVar17 = (undefined2 *)(lVar30 + 0x8b070);
          if (cVar6 == '\0') {
            puVar17 = (undefined2 *)
                      (*(long *)(puVar2 + 8) + (ulong)(uVar28 & *(uint *)(lVar23 + lVar36)));
          }
          goto LAB_00120000;
        }
        pcVar33 = (code_load_func)*(code_load_func **)(puVar2 + 10);
        lVar14 = (**(code_func_long **)(puVar2 + 0x12))(lVar30,puVar2,uVar28);
        uVar15 = (**(code_func_ulong **)(puVar2 + 0x14))(lVar30,puVar2,uVar28);
        local_38 = local_38 - uVar9;
        if (iVar24 == 2) {
          iVar24 = uVar9 * 2;
          if (lVar14 != 0) {
            uVar10 = memory_check_code_region((uint*)&lVar14,(uint*)&uVar15,uVar28,0);
            local_30 = local_30 | uVar10;
          }
          pauVar21 = pauVar34;
          do {
            puVar4 = *pauVar21;
            ((code_store_func)pcVar33)(lVar30,(uVar28 + (int)pauVar34) - (int)pauVar21 & *puVar2,
                       *(undefined2 *)*pauVar21);
            pauVar21 = (undefined1 (*) [16])(puVar4 + 2);
          } while ((undefined1 (*) [16])(*pauVar34 + (ulong)(uVar9 - 1) * 2 + 2) !=
                   (undefined1 (*) [16])(puVar4 + 2));
        }
        else {
          if (lVar14 != 0) {
            uVar10 = memory_check_code_region(lVar14,uVar15,uVar28,uVar9 << 1);
            local_30 = local_30 | uVar10;
          }
          uVar8 = uVar9;
          uVar10 = uVar31;
          do {
            uVar11 = (*(code_load_func *)pauVar34)(lVar30,uVar10 & *puVar1);
            ((code_store_func)pcVar33)(lVar30,(uVar31 + uVar28) - uVar10 & *puVar2,uVar11);
            uVar10 = uVar10 + 2;
            uVar8 = uVar8 - 1;
          } while (uVar8 != 0);
          iVar24 = uVar9 << 1;
        }
        uVar31 = uVar31 + iVar24;
        uVar28 = uVar28 + uVar9 * -2;
      } while (local_38 != 0);
    }
LAB_001212a8:
    if (uVar19 != 0 && *(int *)(lVar25 + 0x210c) == 1) goto LAB_001212d0;
  }
  else {
    bVar5 = uVar9 == 1;
    if (bVar5 && uVar8 == 0x4000400) {
      //dma_transfer_gxfifo(param_1,param_2);
      return 0;
    }
    uVar31 = uVar10 & 0xfffffffc;
    uVar12 = local_68 >> 0x15 & 0xf;
    uVar28 = uVar8 & 0xfffffffc;
    if (uVar12 == 6) {
      lVar14 = (ulong)(uVar8 >> 0x17) * 0x60;
      local_30 = 0;
      do {
        while( true ) {
          uVar10 = local_38;
          lVar36 = param_1[1];
          lVar23 = (ulong)(uVar31 >> 0x17) * 0x60;
          puVar1 = (uint *)(lVar36 + lVar23);
          puVar2 = (uint *)(lVar36 + lVar14);
          uVar9 = *(uint *)(lVar36 + lVar23);
          uVar8 = uVar31 & uVar9;
          if (uVar9 < uVar8 + local_38 * -4) break;
          cVar6 = (char)puVar1[0x16];
          local_38 = 0;
          if (cVar6 != '\x01') goto LAB_00123474;
LAB_00123548:
          pcVar33 = (code_load_func)(void*)*(code **)(puVar1 + 2);
          cVar6 = *(char *)((long)puVar2 + 0x59);
          iVar24 = 2;
          bVar5 = false;
          if (cVar6 != '\x01') goto LAB_0012349c;
LAB_00123578:
          puVar18 = (undefined4 *)(**(code_load_func **)(puVar2 + 8))(lVar30,uVar28);
LAB_001234ac:
          lVar23 = (long)*(code **)(puVar2 + 0x12);
          uVar15 = (ulong)*(code **)(puVar2 + 0x14);
          if (bVar5) {
            uVar9 = uVar31;
            uVar8 = uVar10;
            if (lVar23 != 0) {
              uVar12 = memory_check_code_region(lVar23,uVar15,uVar28,uVar10 << 2);
              local_30 = local_30 | uVar12;
            }
            do {
              uVar11 = (*pcVar33)(lVar30,uVar9 & *puVar1);
              *puVar18 = uVar11;
              uVar8 = uVar8 - 1;
              uVar9 = uVar9 - 4;
            } while (uVar8 != 0);
          }
          else {
            if (lVar23 != 0) {
              uVar8 = memory_check_code_region(lVar23,uVar15,uVar28,uVar10 * 4);
              local_30 = local_30 | uVar8;
            }
            pcVar35 = pcVar33;
            do {
              pcVar37 = pcVar35 + -4;
              *puVar18 = *(undefined4 *)pcVar35;
              pcVar35 = pcVar37;
            } while (pcVar37 != pcVar33 + ~(ulong)(uVar10 - 1) * 4);
          }
joined_r0x00123694:
          uVar31 = uVar31 + uVar10 * -4;
          if (local_38 == 0) goto LAB_0011f928;
        }
        uVar10 = (uVar8 >> 2) + 1;
        cVar6 = (char)puVar1[0x16];
        local_38 = local_38 - uVar10;
        if (cVar6 == '\x01') goto LAB_00123548;
LAB_00123474:
        if (cVar6 == '\x02') {
          iVar24 = 3;
          bVar5 = true;
          pcVar33 = (code_load_func)*(code_load_func **)(puVar1 + 6);
        }
        else if (cVar6 == '\0') {
          iVar24 = 2;
          bVar5 = false;
          pcVar33 = (code_load_func)(*(long *)(puVar1 + 2) + (ulong)uVar8);
        }
        else {
          pcVar33 = (code_load_func)(void*)(lVar30 + 0x6b070);
          iVar24 = 2;
          bVar5 = false;
        }
        cVar6 = *(char *)((long)puVar2 + 0x59);
        if (cVar6 == '\x01') goto LAB_00123578;
LAB_0012349c:
        if (cVar6 != '\x02') {
          puVar18 = (undefined4 *)(lVar30 + 0x8b070);
          if (cVar6 == '\0') {
            puVar18 = (undefined4 *)
                      (*(long *)(puVar2 + 8) + (ulong)(uVar28 & *(uint *)(lVar36 + lVar14)));
          }
          goto LAB_001234ac;
        }
        pcVar35 = (code_store_func)(void*)*(code **)(puVar2 + 0xc);
        lVar23 = (**(code_func_long **)(puVar2 + 0x12))(lVar30,puVar2,uVar28);
        uVar15 = (**(code_func_ulong **)(puVar2 + 0x14))(lVar30,puVar2,uVar28);
        if (iVar24 != 2) {
          uVar9 = uVar31;
          uVar8 = uVar10;
          if (lVar23 != 0) {
            uVar12 = memory_check_code_region(lVar23,uVar15,uVar28,uVar10 << 2);
            local_30 = local_30 | uVar12;
          }
          do {
            uVar11 = (*pcVar33)(lVar30,uVar9 & *puVar1);
            (*pcVar35)(lVar30,uVar28 & *puVar2,uVar11);
            uVar8 = uVar8 - 1;
            uVar9 = uVar9 - 4;
          } while (uVar8 != 0);
          goto joined_r0x00123694;
        }
        if (lVar23 != 0) {
          uVar8 = memory_check_code_region(lVar23,uVar15,uVar28,uVar10 * 4);
          local_30 = local_30 | uVar8;
        }
        uVar31 = uVar31 + uVar10 * -4;
        pcVar37 = pcVar33;
        do {
          pcVar38 = (code*)((char*)pcVar37 + -4);
          (*pcVar35)(lVar30,uVar28 & *puVar2,*(undefined4 *)pcVar37);
          pcVar37 = (code_store_func)(void*)pcVar38;
        } while (pcVar38 != pcVar33 + ~(ulong)(uVar10 - 1) * 4);
      } while (local_38 != 0);
      goto LAB_0011f928;
    }
    if (uVar12 < 7) {
      if (uVar12 == 2) {
        lVar14 = (ulong)(uVar8 >> 0x17) * 0x60;
        local_30 = 0;
        do {
          while( true ) {
            uVar9 = local_38;
            lVar36 = param_1[1];
            lVar23 = (ulong)(uVar31 >> 0x17) * 0x60;
            puVar1 = (uint *)(lVar36 + lVar23);
            uVar8 = *(uint *)(lVar36 + lVar23);
            puVar2 = (uint *)(lVar36 + lVar14);
            uVar10 = uVar31 & uVar8;
            if (uVar8 < uVar10 + local_38 * 4) break;
            cVar6 = (char)puVar1[0x16];
            local_38 = 0;
            if (cVar6 != '\x01') goto LAB_001237b8;
LAB_00123888:
            pcVar33 = (code_load_func)(void*)*(code **)(puVar1 + 2);
            cVar6 = *(char *)((long)puVar2 + 0x59);
            iVar24 = 2;
            bVar5 = false;
            if (cVar6 != '\x01') goto LAB_001237e0;
LAB_001238b8:
            puVar18 = (undefined4 *)(**(code_load_func **)(puVar2 + 8))(lVar30,uVar28);
LAB_001237f0:
            lVar23 = (**(code_func_long **)(puVar2 + 0x12))(lVar30,puVar2,uVar28);
            uVar15 = (**(code_func_ulong **)(puVar2 + 0x14))(lVar30,puVar2,uVar28);
            if (bVar5) {
              uVar8 = uVar31;
              uVar10 = uVar9;
              if (lVar23 != 0) {
                uVar12 = memory_check_code_region(lVar23,uVar15,uVar28,uVar9 << 2);
                local_30 = local_30 | uVar12;
              }
              do {
                uVar11 = (*pcVar33)(lVar30,uVar8 & *puVar1);
                *puVar18 = uVar11;
                uVar10 = uVar10 - 1;
                uVar8 = uVar8 + 4;
              } while (uVar10 != 0);
LAB_001239cc:
              iVar24 = uVar9 * 4;
            }
            else {
              iVar24 = uVar9 * 4;
              if (lVar23 != 0) {
                uVar10 = memory_check_code_region(lVar23,uVar15,uVar28,iVar24);
                local_30 = local_30 | uVar10;
              }
              pcVar35 = pcVar33;
              do {
                pcVar37 = pcVar35 + 4;
                *puVar18 = *(undefined4 *)pcVar35;
                pcVar35 = pcVar37;
              } while (pcVar37 != pcVar33 + ((ulong)(uVar9 - 1) + 1) * 4);
            }
            uVar31 = uVar31 + iVar24;
            if (local_38 == 0) goto LAB_001212a8;
          }
          uVar9 = (uVar8 + 1) - uVar10 >> 2;
          local_38 = local_38 - uVar9;
          cVar6 = (char)puVar1[0x16];
          if (cVar6 == '\x01') goto LAB_00123888;
LAB_001237b8:
          if (cVar6 == '\x02') {
            iVar24 = 3;
            bVar5 = true;
            pcVar33 = (code_load_func)*(code_load_func **)(puVar1 + 6);
          }
          else if (cVar6 == '\0') {
            iVar24 = 2;
            bVar5 = false;
            pcVar33 = (code_load_func)(void*)(*(long *)(puVar1 + 2) + (ulong)uVar10);
          }
          else {
            pcVar33 = (code_load_func)(void*)(lVar30 + 0x6b070);
            iVar24 = 2;
            bVar5 = false;
          }
          cVar6 = *(char *)((long)puVar2 + 0x59);
          if (cVar6 == '\x01') goto LAB_001238b8;
LAB_001237e0:
          if (cVar6 != '\x02') {
            puVar18 = (undefined4 *)(lVar30 + 0x8b070);
            if (cVar6 == '\0') {
              puVar18 = (undefined4 *)
                        (*(long *)(puVar2 + 8) + (ulong)(uVar28 & *(uint *)(lVar36 + lVar14)));
            }
            goto LAB_001237f0;
          }
          pcVar35 = (code_store_func)(void*)*(code **)(puVar2 + 0xc);
          lVar23 = (long)*(code **)(puVar2 + 0x12);
          uVar15 = (ulong)*(code **)(puVar2 + 0x14);
          if (iVar24 != 2) {
            uVar8 = uVar31;
            uVar10 = uVar9;
            if (lVar23 != 0) {
              uVar12 = memory_check_code_region(lVar23,uVar15,uVar28,uVar9 << 2);
              local_30 = local_30 | uVar12;
            }
            do {
              uVar11 = (*pcVar33)(lVar30,uVar8 & *puVar1);
              (*pcVar35)(lVar30,uVar28 & *puVar2,uVar11);
              uVar10 = uVar10 - 1;
              uVar8 = uVar8 + 4;
            } while (uVar10 != 0);
            goto LAB_001239cc;
          }
          if (lVar23 != 0) {
            uVar10 = memory_check_code_region(lVar23,uVar15,uVar28,uVar9 * 4);
            local_30 = local_30 | uVar10;
          }
          uVar31 = uVar31 + uVar9 * 4;
          pcVar37 = pcVar33;
          do {
            pcVar38 = (code*)((char*)pcVar37 + 4);
            (*pcVar35)(lVar30,uVar28 & *puVar2,*(undefined4 *)pcVar37);
            pcVar37 = (code_store_func)(void*)pcVar38;
          } while (pcVar38 != pcVar33 + ((ulong)(uVar9 - 1) + 1) * 4);
        } while (local_38 != 0);
      }
      else {
        if (2 < uVar12) {
          if (uVar12 == 4) {
LAB_00120ccc:
            local_30 = 0;
            do {
              while( true ) {
                lVar23 = param_1[1];
                lVar14 = (ulong)(uVar31 >> 0x17) * 0x60;
                lVar36 = (ulong)(uVar28 >> 0x17) * 0x60;
                puVar1 = (uint *)(lVar23 + lVar14);
                puVar2 = (uint *)(lVar23 + lVar36);
                uVar9 = *(uint *)(lVar23 + lVar14);
                uVar8 = uVar31 & uVar9;
                uVar10 = local_38;
                if (uVar9 < uVar8 + local_38 * -4) {
                  uVar10 = (uVar8 >> 2) + 1;
                }
                uVar12 = *(uint *)(lVar23 + lVar36);
                cVar6 = (char)puVar1[0x16];
                uVar9 = (uVar12 + 1) - (uVar28 & uVar12) >> 2;
                if ((uVar28 & uVar12) + uVar10 * 4 <= uVar12) {
                  uVar9 = uVar10;
                }
                if (cVar6 == '\x01') {
                  pcVar33 = (code_load_func)(void*)*(code **)(puVar1 + 2);
                  iVar24 = 2;
                  uVar10 = 0;
                }
                else if (cVar6 == '\x02') {
                  iVar24 = 3;
                  uVar10 = 1;
                  pcVar33 = (code_load_func)*(code_load_func **)(puVar1 + 6);
                }
                else if (cVar6 == '\0') {
                  iVar24 = 2;
                  uVar10 = 0;
                  pcVar33 = (code_load_func)(void*)(*(long *)(puVar1 + 2) + (ulong)uVar8);
                }
                else {
                  pcVar33 = (code_load_func)(void*)(lVar30 + 0x6b070);
                  iVar24 = 2;
                  uVar10 = 0;
                }
                cVar6 = *(char *)((long)puVar2 + 0x59);
                if (cVar6 != '\x01') break;
                pcVar35 = (code_store_func)(void*)*(code **)(puVar2 + 8);
LAB_00120d88:
                lVar14 = (**(code_func_long **)(puVar2 + 0x12))(lVar30,puVar2,uVar28);
                uVar15 = (**(code_func_ulong **)(puVar2 + 0x14))(lVar30,puVar2,uVar28);
                local_38 = local_38 - uVar9;
                if (uVar10 == 1) {
                  if (lVar14 != 0) {
                    uVar10 = memory_check_code_region((uint*)&lVar14,(uint*)&uVar15,uVar28,0);
                    local_30 = local_30 | uVar10;
                  }
                  uVar28 = uVar28 + uVar9 * 4;
                  pcVar37 = pcVar35;
                  do {
                    uVar11 = (*pcVar33)(lVar30,(uVar31 + (long)pcVar35) - (long)pcVar37 & *puVar1);
                    pcVar38 = (code *)((long)pcVar37 + 4);
                    *(undefined4 *)(long)pcVar37 = uVar11;
                    pcVar37 = (code_store_func)pcVar38;
                  } while ((long)pcVar38 != (long)pcVar35 + ((ulong)(uVar9 - 1) + 1) * 4);
                  uVar31 = uVar31 + uVar9 * -4;
                }
                else {
                  if (lVar14 != 0) {
                    uVar8 = memory_check_code_region(lVar14,uVar15,uVar28,uVar9 * 4);
                    local_30 = local_30 | uVar8;
                  }
                  memcpy(auVar40, _DAT_0021d600, 16);
                  uVar8 = uVar9 - 1;
                  uVar31 = uVar31 + uVar9 * -4;
                  uVar28 = uVar28 + uVar9 * 4;
                  if (pcVar33 + (ulong)uVar9 * -4 + 4 < pcVar35 + (ulong)uVar9 * 4 &&
                      pcVar35 < pcVar33 + 4 || uVar8 < 8) {
                    pcVar37 = pcVar35;
                    do {
                    pcVar38 = (code*)((char*)pcVar37 + 4);
                    *(undefined4 *)pcVar37 = *(undefined4 *)pcVar33;
                    pcVar37 = (code_store_func)(void*)pcVar38;
                      pcVar33 = pcVar33 + -4;
                    } while (pcVar35 + (ulong)uVar8 * 4 + 4 != pcVar38);
                  }
                  else {
                    uVar12 = (uVar9 - 4 >> 2) + 1;
                    pauVar34 = (undefined1 (*) [16])(pcVar33 + -0xc);
                    pcVar37 = pcVar35;
                    do {
                      uVar10 = uVar10 + 1;
                      a64_TBL(ZEXT816(0),*pauVar34,auVar40,auVar42);
                      *(long *)(pcVar37 + 8) = *(long *)(auVar42 + 8);
                      *(long *)pcVar37 = *(long *)auVar42;
                      pauVar34 = pauVar34 + -1;
                      pcVar37 = pcVar37 + 0x10;
                    } while (uVar10 < uVar12);
                    uVar16 = (ulong)(uVar12 * 4);
                    if (uVar9 != uVar12 * 4) {
                      *(undefined4 *)(pcVar35 + uVar16 * 4) = *(undefined4 *)(pcVar33 + uVar16 * -4)
                      ;
                      iVar24 = uVar8 + uVar12 * -4;
                      if ((iVar24 != 0) &&
                         (*(undefined4 *)(pcVar35 + uVar16 * 4 + 4) =
                               *(undefined4 *)(pcVar33 + uVar16 * -4 + -4), iVar24 != 1)) {
                        *(undefined4 *)(pcVar35 + uVar16 * 4 + 8) =
                             *(undefined4 *)(pcVar33 + uVar16 * -4 + -8);
                      }
                    }
                  }
                }
                if (local_38 == 0) goto LAB_0011f928;
              }
              if (cVar6 != '\x02') {
                pcVar35 = (code_store_func)(void*)(lVar30 + 0x8b070);
                if (cVar6 == '\0') {
                  pcVar35 = (code_store_func)(void*)(*(long *)(puVar2 + 8) +
                                    (ulong)(uVar28 & *(uint *)(lVar23 + lVar36)));
                }
                goto LAB_00120d88;
              }
              pcVar35 = (code_store_func)(void*)*(code **)(puVar2 + 0xc);
              lVar14 = (long)*(code **)(puVar2 + 0x12);
              uVar15 = (ulong)*(code **)(puVar2 + 0x14);
              local_38 = local_38 - uVar9;
              if (iVar24 == 2) {
                if (lVar14 != 0) {
                  uVar10 = memory_check_code_region(lVar14,uVar15,uVar28,uVar9 * 4);
                  local_30 = local_30 | uVar10;
                }
                pcVar37 = pcVar33;
                do {
                  pcVar38 = (code*)((char*)pcVar37 + -4);
                  (*pcVar35)(lVar30,(uVar28 + (int)pcVar33) - (int)pcVar37 & *puVar2,
                             *(undefined4 *)pcVar37);
                  pcVar37 = (code_store_func)(void*)pcVar38;
                } while (pcVar38 != pcVar33 + ((ulong)(uVar9 - 1) << 2 ^ 0xfffffffffffffffc));
                uVar28 = uVar28 + 4 + (uVar9 - 1) * 4;
              }
              else {
                if (lVar14 != 0) {
                  uVar10 = memory_check_code_region(lVar14,uVar15,uVar28,uVar9 << 2);
                  local_30 = local_30 | uVar10;
                }
                uVar8 = uVar9;
                uVar10 = uVar31;
                do {
                  uVar11 = (*pcVar33)(lVar30,uVar10 & *puVar1);
                  (*pcVar35)(lVar30,(uVar31 + uVar28) - uVar10 & *puVar2,uVar11);
                  uVar10 = uVar10 - 4;
                  uVar8 = uVar8 - 1;
                } while (uVar8 != 0);
                uVar28 = uVar28 + uVar9 * 4;
              }
              uVar31 = uVar31 + uVar9 * -4;
            } while (local_38 != 0);
          }
          else {
            if (uVar12 != 5) {
              local_30 = 0;
              if (uVar12 != 3) goto LAB_0011f93c;
              goto LAB_00120618;
            }
            local_30 = 0;
            do {
              while( true ) {
                lVar23 = param_1[1];
                lVar36 = (ulong)(uVar28 >> 0x17) * 0x60;
                lVar14 = (ulong)(uVar31 >> 0x17) * 0x60;
                puVar1 = (uint *)(lVar23 + lVar14);
                uVar9 = *(uint *)(lVar23 + lVar14);
                puVar2 = (uint *)(lVar23 + lVar36);
                uVar8 = uVar31 & uVar9;
                uVar10 = local_38;
                if (uVar9 < uVar8 + local_38 * -4) {
                  uVar10 = (uVar8 >> 2) + 1;
                }
                cVar6 = (char)puVar1[0x16];
                uVar9 = uVar28 & *(uint *)(lVar23 + lVar36);
                if (*(uint *)(lVar23 + lVar36) < uVar9 + uVar10 * -4) {
                  uVar10 = (uVar9 >> 2) + 1;
                }
                if (cVar6 == '\x01') break;
                if (cVar6 == '\x02') {
                  iVar24 = 3;
                  uVar9 = 1;
                  pcVar33 = (code_load_func)*(code_load_func **)(puVar1 + 6);
                  goto LAB_0011f7f4;
                }
                if (cVar6 != '\0') {
                  iVar24 = 2;
                  uVar9 = 0;
                  pcVar33 = (code_load_func)(void*)(lVar30 + 0x6b070);
                  goto LAB_0011f7f4;
                }
                iVar24 = 2;
                uVar9 = 0;
                pcVar33 = (code_load_func)(void*)(*(long *)(puVar1 + 2) + (ulong)uVar8);
                cVar6 = *(char *)((long)puVar2 + 0x59);
                if (cVar6 != '\x01') goto LAB_0011f800;
LAB_00122888:
                puVar18 = (undefined4 *)(**(code_load_func **)(puVar2 + 8))(lVar30,uVar28);
LAB_0011f810:
                lVar14 = (**(code_func_long **)(puVar2 + 0x12))(lVar30,puVar2,uVar28);
                uVar15 = (**(code_func_ulong **)(puVar2 + 0x14))(lVar30,puVar2,uVar28);
                local_38 = local_38 - uVar10;
                if (uVar9 == 1) {
                  if (lVar14 != 0) {
                    uVar8 = memory_check_code_region((uint*)&lVar14,(uint*)&uVar15,uVar28,0);
                    local_30 = local_30 | uVar8;
                  }
                  uVar28 = uVar28 + uVar10 * -4;
                  puVar27 = puVar18;
                  do {
                    uVar11 = (*pcVar33)(lVar30,(uVar31 - (int)puVar18) + (int)puVar27 & *puVar1);
                    puVar32 = puVar27 + -1;
                    *puVar27 = uVar11;
                    puVar27 = puVar32;
                  } while (puVar32 != puVar18 + ~(ulong)(uVar10 - 1));
                  uVar31 = uVar31 + uVar10 * -4;
                }
                else {
                  if (lVar14 != 0) {
                    uVar8 = memory_check_code_region(lVar14,uVar15,uVar28,uVar10 * 4);
                    local_30 = local_30 | uVar8;
                  }
                  uVar8 = uVar10 - 1;
                  uVar31 = uVar31 + uVar10 * -4;
                  uVar28 = uVar28 + uVar10 * -4;
                  if (pcVar33 + -0xc < puVar18 + 1 && puVar18 + -3 < pcVar33 + 4 || uVar8 < 8) {
                    uVar16 = 0;
                    do {
                      *(undefined4 *)((long)puVar18 + uVar16) = *(undefined4 *)(pcVar33 + uVar16);
                      uVar16 = uVar16 - 4;
                    } while (((ulong)uVar8 << 2 ^ 0xfffffffffffffffc) != uVar16);
                  }
                  else {
                    lVar14 = -0xc;
                    uVar12 = (uVar10 - 4 >> 2) + 1;
                    do {
                      memcpy(auVar40, (undefined1 (*) [16])(pcVar33 + lVar14), 16);
                      uVar9 = uVar9 + 1;
                      ((undefined8 *)((long)puVar18 + lVar14))[1] = *(undefined8 *)(auVar40 + 8);
                      *(undefined8 *)((long)puVar18 + lVar14) = *(undefined8 *)auVar40;
                      lVar14 = lVar14 + -0x10;
                    } while (uVar9 < uVar12);
                    uVar16 = (ulong)(uVar12 * 4);
                    if (uVar10 != uVar12 * 4) {
                      puVar18[-uVar16] = *(undefined4 *)(pcVar33 + uVar16 * -4);
                      iVar24 = uVar8 + uVar12 * -4;
                      if ((iVar24 != 0) &&
                         (puVar18[-1 - uVar16] = *(undefined4 *)(pcVar33 + uVar16 * -4 + -4),
                         iVar24 != 1)) {
                        puVar18[-2 - uVar16] = *(undefined4 *)(pcVar33 + uVar16 * -4 + -8);
                      }
                    }
                  }
                }
                if (local_38 == 0) goto LAB_0011f928;
              }
              pcVar33 = (code_load_func)(void*)*(code **)(puVar1 + 2);
              iVar24 = 2;
              uVar9 = 0;
LAB_0011f7f4:
              cVar6 = *(char *)((long)puVar2 + 0x59);
              if (cVar6 == '\x01') goto LAB_00122888;
LAB_0011f800:
              if (cVar6 != '\x02') {
                puVar18 = (undefined4 *)(lVar30 + 0x8b070);
                if (cVar6 == '\0') {
                  puVar18 = (undefined4 *)
                            (*(long *)(puVar2 + 8) + (ulong)(uVar28 & *(uint *)(lVar23 + lVar36)));
                }
                goto LAB_0011f810;
              }
              pcVar35 = (code_store_func)(void*)*(code **)(puVar2 + 0xc);
              lVar14 = (long)*(code **)(puVar2 + 0x12);
              uVar15 = (ulong)*(code **)(puVar2 + 0x14);
              local_38 = local_38 - uVar10;
              if (iVar24 == 2) {
                if (lVar14 != 0) {
                  uVar8 = memory_check_code_region(lVar14,uVar15,uVar28,uVar10 * 4);
                  local_30 = local_30 | uVar8;
                }
                pcVar37 = pcVar33;
                do {
                  pcVar38 = (code*)((char*)pcVar37 + -4);
                  (*pcVar35)(lVar30,(uVar28 - (int)pcVar33) + (int)pcVar37 & *puVar2,
                             *(undefined4 *)pcVar37);
                  pcVar37 = (code_store_func)(void*)pcVar38;
                } while (pcVar38 != pcVar33 + ~(ulong)(uVar10 - 1) * 4);
              }
              else {
                if (lVar14 != 0) {
                  uVar8 = memory_check_code_region(lVar14,uVar15,uVar28,uVar10 << 2);
                  local_30 = local_30 | uVar8;
                }
                uVar9 = uVar10;
                uVar8 = uVar31;
                do {
                  uVar11 = (*pcVar33)(lVar30,uVar8 & *puVar1);
                  (*pcVar35)(lVar30,(uVar28 - uVar31) + uVar8 & *puVar2,uVar11);
                  uVar8 = uVar8 - 4;
                  uVar9 = uVar9 - 1;
                } while (uVar9 != 0);
              }
              uVar28 = uVar28 + uVar10 * -4;
              uVar31 = uVar31 + uVar10 * -4;
            } while (local_38 != 0);
          }
          goto LAB_0011f928;
        }
        if (uVar12 == 0) {
LAB_00120618:
          local_30 = 0;
          do {
            while( true ) {
              local_18 = (code_load_func)(lVar30 + 0x6b070);
              uVar10 = local_38 * 4;
              lVar23 = param_1[1];
              lVar14 = (ulong)(uVar31 >> 0x17) * 0x60;
              lVar36 = (ulong)(uVar28 >> 0x17) * 0x60;
              puVar1 = (uint *)(lVar23 + lVar14);
              puVar2 = (uint *)(lVar23 + lVar36);
              uVar9 = *(uint *)(lVar23 + lVar14);
              uVar8 = uVar31 & uVar9;
              uVar12 = local_38;
              if (uVar9 < uVar10 + uVar8) {
                uVar12 = (uVar9 + 1) - uVar8;
                uVar10 = uVar12 & 0xfffffffc;
                uVar12 = uVar12 >> 2;
              }
              uVar3 = *(uint *)(lVar23 + lVar36);
              cVar6 = (char)puVar1[0x16];
              uVar9 = (uVar3 + 1) - (uVar28 & uVar3) >> 2;
              if ((uVar28 & uVar3) + uVar10 <= uVar3) {
                uVar9 = uVar12;
              }
              if (cVar6 == '\x01') {
                local_18 = (code_load_func)(**(code_load_func **)(puVar1 + 2))(lVar30,uVar31);
                iVar24 = 2;
                uVar10 = 0;
              }
              else if (cVar6 == '\x02') {
                iVar24 = 3;
                uVar10 = 1;
                local_18 = (code_load_func)*(code_load_func **)(puVar1 + 6);
              }
              else if (cVar6 == '\0') {
                iVar24 = 2;
                uVar10 = 0;
                local_18 = (code_load_func)(*(long *)(puVar1 + 2) + (ulong)uVar8);
              }
              else {
                iVar24 = 2;
                uVar10 = 0;
              }
              local_20 = (undefined4 *)(lVar30 + 0x8b070);
              cVar6 = *(char *)((long)puVar2 + 0x59);
              if (cVar6 != '\x01') break;
              local_20 = (undefined4 *)(**(code_load_func **)(puVar2 + 8))(lVar30,uVar28);
LAB_001206e4:
              lVar14 = (long)*(code **)(puVar2 + 0x12);
              uVar15 = (ulong)*(code **)(puVar2 + 0x14);
              local_38 = local_38 - uVar9;
              if (uVar10 == 1) {
                if (lVar14 != 0) {
                  uVar10 = memory_check_code_region((uint*)&lVar14,(uint*)&uVar15,uVar28,0);
                  local_30 = local_30 | uVar10;
                }
                uVar28 = uVar28 + uVar9 * 4;
                puVar18 = local_20;
                do {
                  uVar11 = (*local_18)(lVar30,(uVar31 - (int)local_20) + (int)puVar18 & *puVar1);
                  puVar27 = puVar18 + 1;
                  *puVar18 = uVar11;
                  puVar18 = puVar27;
                } while (local_20 + (ulong)(uVar9 - 1) + 1 != puVar27);
                uVar31 = uVar31 + 4 + (uVar9 - 1) * 4;
              }
              else {
                iVar24 = uVar9 * 4;
                if (lVar14 != 0) {
                  uVar8 = memory_check_code_region(lVar14,uVar15,uVar28,iVar24);
                  local_30 = local_30 | uVar8;
                }
                uVar8 = uVar9 - 1;
                uVar31 = uVar31 + iVar24;
                uVar28 = uVar28 + iVar24;
                if ((long)local_18 + (0xf - (long)local_20) < 0x1f || uVar8 < 8) {
                  uVar16 = 0;
                  do {
                    local_20[uVar16] = *(undefined4 *)(local_18 + uVar16 * 4);
                    bVar5 = uVar16 != uVar8;
                    uVar16 = uVar16 + 1;
                  } while (bVar5);
                }
                else {
                  lVar14 = 0;
                  uVar12 = (uVar9 - 4 >> 2) + 1;
                  do {
                    memcpy(auVar40, (undefined1 (*) [16])(local_18 + lVar14), 16);
                    uVar10 = uVar10 + 1;
                    ((undefined8 *)((long)local_20 + lVar14))[1] = *(undefined8 *)(auVar40 + 8);
                    *(undefined8 *)((long)local_20 + lVar14) = *(undefined8 *)auVar40;
                    lVar14 = lVar14 + 0x10;
                  } while (uVar10 < uVar12);
                  uVar16 = (ulong)(uVar12 * 4);
                  if (uVar9 != uVar12 * 4) {
                    local_20[uVar16] = *(undefined4 *)(local_18 + uVar16 * 4);
                    iVar24 = uVar8 + uVar12 * -4;
                    if ((iVar24 != 0) &&
                       (local_20[uVar16 + 1] = *(undefined4 *)(local_18 + uVar16 * 4 + 4),
                       iVar24 != 1)) {
                      local_20[uVar16 + 2] = *(undefined4 *)(local_18 + uVar16 * 4 + 8);
                    }
                  }
                }
              }
              if (local_38 == 0) goto LAB_00120378;
            }
            if (cVar6 != '\x02') {
              if (cVar6 == '\0') {
                local_20 = (undefined4 *)
                           (*(long *)(puVar2 + 8) + (ulong)(uVar28 & *(uint *)(lVar23 + lVar36)));
              }
              goto LAB_001206e4;
            }
            pcVar33 = (code_load_func)(void*)*(code **)(puVar2 + 0xc);
            lVar14 = (long)*(code **)(puVar2 + 0x12);
            uVar15 = (ulong)*(code **)(puVar2 + 0x14);
            local_38 = local_38 - uVar9;
            if (iVar24 == 2) {
              if (lVar14 != 0) {
                uVar10 = memory_check_code_region(lVar14,uVar15,uVar28,uVar9 * 4);
                local_30 = local_30 | uVar10;
              }
              uVar31 = uVar31 + uVar9 * 4;
              pcVar35 = (code_store_func)local_18;
              do {
                pcVar37 = (code_store_func)((long)pcVar35 + 4);
                ((code_store_func)pcVar33)(lVar30,(uVar28 - (long)local_18) + (long)pcVar35 & *puVar2,
                           *(undefined4 *)(long)pcVar35);
                pcVar35 = pcVar37;
              } while ((long)pcVar37 != (long)local_18 + (ulong)(uVar9 - 1) * 4 + 4);
              uVar28 = uVar28 + 4 + (uVar9 - 1) * 4;
            }
            else {
              if (lVar14 != 0) {
                uVar10 = memory_check_code_region(lVar14,uVar15,uVar28,uVar9 << 2);
                local_30 = local_30 | uVar10;
              }
              uVar8 = uVar9;
              uVar10 = uVar31;
              do {
                uVar11 = (*local_18)(lVar30,uVar10 & *puVar1);
                ((code_store_func)pcVar33)(lVar30,(uVar28 - uVar31) + uVar10 & *puVar2,uVar11);
                uVar10 = uVar10 + 4;
                uVar8 = uVar8 - 1;
              } while (uVar8 != 0);
              iVar24 = (uVar9 - 1) * 4;
              uVar31 = uVar31 + 4 + iVar24;
              uVar28 = uVar28 + 4 + iVar24;
            }
          } while (local_38 != 0);
LAB_00120378:
          bVar5 = *(int *)(lVar25 + 0x210c) == 1;
          goto LAB_0011f93c;
        }
        local_30 = 0;
        if (uVar12 != 1) goto LAB_001203a8;
        do {
          while( true ) {
            uVar10 = local_38 * 4;
            lVar23 = param_1[1];
            lVar14 = (ulong)(uVar31 >> 0x17) * 0x60;
            lVar36 = (ulong)(uVar28 >> 0x17) * 0x60;
            puVar1 = (uint *)(lVar23 + lVar14);
            puVar2 = (uint *)(lVar23 + lVar36);
            uVar12 = *(uint *)(lVar23 + lVar14);
            uVar8 = uVar31 & uVar12;
            uVar9 = local_38;
            if (uVar12 < uVar10 + uVar8) {
              uVar9 = (uVar12 + 1) - uVar8;
              uVar10 = uVar9 & 0xfffffffc;
              uVar9 = uVar9 >> 2;
            }
            cVar6 = (char)puVar1[0x16];
            uVar12 = uVar28 & *(uint *)(lVar23 + lVar36);
            if (*(uint *)(lVar23 + lVar36) < uVar12 - uVar10) {
              uVar9 = (uVar12 >> 2) + 1;
            }
            if (cVar6 == '\x01') {
              pauVar34 = (undefined1 (*) [16])(**(code_load_func **)(puVar1 + 2))(lVar30,uVar31);
              iVar24 = 2;
              uVar10 = 0;
            }
            else if (cVar6 == '\x02') {
              uVar10 = 1;
              iVar24 = 3;
              pauVar34 = *(undefined1 (**) [16])(puVar1 + 6);
            }
            else if (cVar6 == '\0') {
              iVar24 = 2;
              uVar10 = 0;
              pauVar34 = (undefined1 (*) [16])(*(long *)(puVar1 + 2) + (ulong)uVar8);
            }
            else {
              pauVar34 = (undefined1 (*) [16])(lVar30 + 0x6b070);
              iVar24 = 2;
              uVar10 = 0;
            }
            cVar6 = *(char *)((long)puVar2 + 0x59);
            if (cVar6 != '\x01') break;
            puVar18 = (undefined4 *)(**(code_load_func **)(puVar2 + 8))(lVar30,uVar28);
LAB_001208a8:
            lVar14 = (long)*(code **)(puVar2 + 0x12);
            uVar15 = (ulong)*(code **)(puVar2 + 0x14);
            local_38 = local_38 - uVar9;
            if (uVar10 == 1) {
              if (lVar14 != 0) {
                uVar10 = memory_check_code_region((uint*)&lVar14,(uint*)&uVar15,uVar28,0);
                local_30 = local_30 | uVar10;
              }
              uVar28 = uVar28 + uVar9 * -4;
              puVar27 = puVar18;
              do {
                uVar11 = (*(code_load_func *)pauVar34)(lVar30,(uVar31 + (int)puVar18) - (int)puVar27 & *puVar1
                                            );
                puVar32 = puVar27 + -1;
                *puVar27 = uVar11;
                puVar27 = puVar32;
              } while (puVar32 !=
                       (undefined4 *)
                       ((long)puVar18 + ((ulong)(uVar9 - 1) << 2 ^ 0xfffffffffffffffc)));
              uVar31 = uVar31 + 4 + (uVar9 - 1) * 4;
            }
            else {
              if (lVar14 != 0) {
                uVar8 = memory_check_code_region(lVar14,uVar15,uVar28,uVar9 * 4);
                local_30 = local_30 | uVar8;
              }
              memcpy(auVar40, _DAT_0021d600, 16);
              uVar8 = uVar9 - 1;
              uVar31 = uVar31 + uVar9 * 4;
              uVar28 = uVar28 + uVar9 * -4;
              if (puVar18 + (1 - (ulong)uVar9) < *pauVar34 + (ulong)uVar9 * 4 &&
                  pauVar34 < (undefined1 (*) [16])(puVar18 + 1) || uVar8 < 8) {
                puVar27 = puVar18;
                do {
                  puVar32 = puVar27 + -1;
                  *puVar27 = *(undefined4 *)*pauVar34;
                  puVar27 = puVar32;
                  pauVar34 = (undefined1 (*) [16])(*pauVar34 + 4);
                } while ((undefined4 *)((long)puVar18 + ((ulong)uVar8 << 2 ^ 0xfffffffffffffffc)) !=
                         puVar32);
              }
              else {
                uVar12 = (uVar9 - 4 >> 2) + 1;
                pauVar21 = pauVar34;
                puVar22 = (undefined8 *)(puVar18 + -3);
                do {
                  uVar10 = uVar10 + 1;
                  a64_TBL(ZEXT816(0),*pauVar21,auVar40,auVar42);
                  puVar22[1] = *(undefined8 *)(auVar42 + 8);
                  *puVar22 = *(undefined8 *)auVar42;
                  pauVar21 = pauVar21 + 1;
                  puVar22 = puVar22 + -2;
                } while (uVar10 < uVar12);
                uVar16 = (ulong)(uVar12 * 4);
                if (uVar9 != uVar12 * 4) {
                  puVar18[-uVar16] = *(undefined4 *)(*pauVar34 + uVar16 * 4);
                  iVar24 = uVar8 + uVar12 * -4;
                  if ((iVar24 != 0) &&
                     (puVar18[-1 - uVar16] = *(undefined4 *)(*pauVar34 + uVar16 * 4 + 4),
                     iVar24 != 1)) {
                    puVar18[-2 - uVar16] = *(undefined4 *)(*pauVar34 + uVar16 * 4 + 8);
                  }
                }
              }
            }
            if (local_38 == 0) goto LAB_001212a8;
          }
          if (cVar6 != '\x02') {
            puVar18 = (undefined4 *)(lVar30 + 0x8b070);
            if (cVar6 == '\0') {
              puVar18 = (undefined4 *)
                        (*(long *)(puVar2 + 8) + (ulong)(uVar28 & *(uint *)(lVar23 + lVar36)));
            }
            goto LAB_001208a8;
          }
          pcVar33 = (code_load_func)(void*)*(code **)(puVar2 + 0xc);
          lVar14 = (long)*(code **)(puVar2 + 0x12);
          uVar15 = (ulong)*(code **)(puVar2 + 0x14);
          local_38 = local_38 - uVar9;
          if (iVar24 == 2) {
            if (lVar14 != 0) {
              uVar10 = memory_check_code_region((uint*)&lVar14,(uint*)&uVar15,uVar28,0);
              local_30 = local_30 | uVar10;
            }
            pauVar21 = pauVar34;
            do {
              puVar4 = *pauVar21;
              ((code_store_func)pcVar33)(lVar30,(uVar28 + (int)pauVar34) - (int)pauVar21 & *puVar2,
                         *(undefined4 *)*pauVar21);
              pauVar21 = (undefined1 (*) [16])(puVar4 + 4);
            } while ((undefined1 (*) [16])(puVar4 + 4) !=
                     (undefined1 (*) [16])(*pauVar34 + (ulong)(uVar9 - 1) * 4 + 4));
          }
          else {
            if (lVar14 != 0) {
              uVar10 = memory_check_code_region(lVar14,uVar15,uVar28,uVar9 << 2);
              local_30 = local_30 | uVar10;
            }
            uVar8 = uVar9;
            uVar10 = uVar31;
            do {
              uVar11 = (*(code_load_func *)pauVar34)(lVar30,uVar10 & *puVar1);
              ((code_store_func)pcVar33)(lVar30,(uVar31 + uVar28) - uVar10 & *puVar2,uVar11);
              uVar10 = uVar10 + 4;
              uVar8 = uVar8 - 1;
            } while (uVar8 != 0);
          }
          uVar28 = uVar28 + uVar9 * -4;
          uVar31 = uVar31 + uVar9 * 4;
        } while (local_38 != 0);
      }
      goto LAB_001212a8;
    }
    if (uVar12 == 9) {
      lVar14 = (ulong)(uVar10 >> 0x17) * 0x60;
      local_30 = 0;
      do {
        uVar10 = local_38;
        lVar23 = param_1[1];
        lVar36 = (ulong)(uVar28 >> 0x17) * 0x60;
        puVar1 = (uint *)(lVar23 + lVar36);
        puVar2 = (uint *)(lVar23 + lVar14);
        uVar8 = uVar28 & *(uint *)(lVar23 + lVar36);
        if (*(uint *)(lVar23 + lVar36) < uVar8 + local_38 * -4) {
          uVar10 = (uVar8 >> 2) + 1;
          local_38 = local_38 - uVar10;
          cVar6 = (char)puVar2[0x16];
          if (cVar6 == '\x01') goto LAB_00123200;
LAB_001230b4:
          if (cVar6 == '\x02') {
            iVar24 = 3;
            uVar8 = 1;
            pcVar33 = (code_load_func)*(code_load_func **)(puVar2 + 6);
          }
          else if (cVar6 == '\0') {
            iVar24 = 2;
            uVar8 = 0;
            pcVar33 = (code_load_func)(*(long *)(puVar2 + 2) + (ulong)(uVar31 & *(uint *)(lVar23 + lVar14)))
            ;
          }
          else {
            iVar24 = 2;
            uVar8 = 0;
            pcVar33 = (code_load_func)(void*)(lVar30 + 0x6b070);
          }
          cVar6 = *(char *)((long)puVar1 + 0x59);
          if (cVar6 == '\x01') goto LAB_00123238;
LAB_001230d8:
          if (cVar6 != '\x02') {
            puVar18 = (undefined4 *)(lVar30 + 0x8b070);
            if (cVar6 == '\0') {
              puVar18 = (undefined4 *)
                        (*(long *)(puVar1 + 8) + (ulong)(uVar28 & *(uint *)(lVar23 + lVar36)));
            }
            goto LAB_001230ec;
          }
          pcVar35 = (code_store_func)(void*)*(code **)(puVar1 + 0xc);
              lVar23 = (long)*(code **)(puVar1 + 0x12);
              uVar15 = (ulong)*(code **)(puVar1 + 0x14);
          if (iVar24 == 2) {
            uVar9 = uVar28;
            uVar8 = uVar10;
            if (lVar23 != 0) {
              uVar12 = memory_check_code_region(lVar23,uVar15,uVar28,uVar10 << 2);
              local_30 = local_30 | uVar12;
            }
            do {
              (*pcVar35)(lVar30,uVar9 & *puVar1,*(undefined4 *)pcVar33);
              uVar8 = uVar8 - 1;
              uVar9 = uVar9 - 4;
            } while (uVar8 != 0);
            uVar28 = uVar28 + uVar10 * -4;
          }
          else {
            uVar8 = uVar10;
            uVar9 = uVar28;
            if (lVar23 != 0) {
              uVar12 = memory_check_code_region(lVar23,uVar15,uVar28,uVar10 << 2);
              local_30 = local_30 | uVar12;
            }
            do {
              uVar11 = (*pcVar33)(lVar30,uVar31 & *puVar2);
              (*pcVar35)(lVar30,uVar9 & *puVar1,uVar11);
              uVar8 = uVar8 - 1;
              uVar9 = uVar9 - 4;
            } while (uVar8 != 0);
            uVar28 = uVar28 + uVar10 * -4;
          }
        }
        else {
          cVar6 = (char)puVar2[0x16];
          local_38 = 0;
          if (cVar6 != '\x01') goto LAB_001230b4;
LAB_00123200:
          pcVar33 = (code_load_func)(**(code_load_func **)(puVar2 + 2))(lVar30,uVar31);
          cVar6 = *(char *)((long)puVar1 + 0x59);
          iVar24 = 2;
          uVar8 = 0;
          if (cVar6 != '\x01') goto LAB_001230d8;
LAB_00123238:
          puVar18 = (undefined4 *)(**(code_load_func **)(puVar1 + 8))(lVar30,uVar28);
LAB_001230ec:
              lVar23 = (long)*(code **)(puVar1 + 0x12);
              uVar15 = (ulong)*(code **)(puVar1 + 0x14);
          if (uVar8 == 1) {
            if (lVar23 != 0) {
              uVar8 = memory_check_code_region(lVar23,uVar15,uVar28,uVar10 * 4);
              local_30 = local_30 | uVar8;
            }
            uVar28 = uVar28 + uVar10 * -4;
            puVar27 = puVar18;
            do {
              uVar11 = (*pcVar33)(lVar30,uVar31 & *puVar2);
              puVar32 = puVar27 + -1;
              *puVar27 = uVar11;
              puVar27 = puVar32;
            } while (puVar18 + ~(ulong)(uVar10 - 1) != puVar32);
          }
          else {
            if (lVar23 != 0) {
              uVar9 = memory_check_code_region(lVar23,uVar15,uVar28,uVar10 * 4);
              local_30 = local_30 | uVar9;
            }
            uVar9 = uVar10 - 1;
            uVar28 = uVar28 + uVar10 * -4;
            if (puVar18 + (1 - (ulong)uVar10) < pcVar33 + 4 && pcVar33 < puVar18 + 1 || uVar9 < 8) {
              puVar27 = puVar18;
              do {
                puVar32 = puVar27 + -1;
                *puVar27 = *(undefined4 *)pcVar33;
                puVar27 = puVar32;
              } while ((undefined4 *)((long)puVar18 + ((ulong)uVar9 << 2 ^ 0xfffffffffffffffc)) !=
                       puVar32);
            }
            else {
              uVar12 = (uVar10 - 4 >> 2) + 1;
              uVar11 = *(undefined4 *)pcVar33;
              *(undefined8 *)auVar43 = CONCAT44(uVar11,uVar11);
              *(undefined4 *)(auVar43 + 8) = uVar11;
              *(undefined4 *)(auVar43 + 12) = uVar11;
              puVar22 = (undefined8 *)(puVar18 + -3);
              do {
                uVar8 = uVar8 + 1;
                puVar22[1] = *(undefined8 *)(auVar43 + 8);
                *puVar22 = *(undefined8 *)auVar43;
                puVar22 = puVar22 + -2;
              } while (uVar8 < uVar12);
              uVar16 = (ulong)(uVar12 * 4);
              if (uVar10 != uVar12 * 4) {
                uVar11 = *(undefined4 *)pcVar33;
                puVar18[-uVar16] = uVar11;
                iVar24 = uVar9 + uVar12 * -4;
                if ((iVar24 != 0) && (puVar18[-1 - uVar16] = uVar11, iVar24 != 1)) {
                  puVar18[-2 - uVar16] = *(undefined4 *)pcVar33;
                }
              }
            }
          }
        }
      } while (local_38 != 0);
      goto LAB_0011f928;
    }
    if (uVar12 < 10) {
      if (uVar12 == 7) goto LAB_00120ccc;
      if (uVar12 != 8) goto LAB_001203a8;
LAB_00120ac4:
      lVar14 = (ulong)(uVar10 >> 0x17) * 0x60;
      local_30 = 0;
      do {
        uVar8 = local_38;
        lVar23 = param_1[1];
        lVar36 = (ulong)(uVar28 >> 0x17) * 0x60;
        puVar1 = (uint *)(lVar23 + lVar36);
        puVar2 = (uint *)(lVar23 + lVar14);
        uVar10 = *(uint *)(lVar23 + lVar36);
        if (uVar10 < (uVar28 & uVar10) + local_38 * 4) {
          uVar8 = (uVar10 + 1) - (uVar28 & uVar10) >> 2;
          local_38 = local_38 - uVar8;
          cVar6 = (char)puVar2[0x16];
          if (cVar6 == '\x01') goto LAB_00120f18;
LAB_00120b48:
          if (cVar6 == '\x02') {
            iVar24 = 3;
            uVar10 = 1;
            pcVar33 = (code_load_func)*(code_load_func **)(puVar2 + 6);
          }
          else if (cVar6 == '\0') {
            iVar24 = 2;
            uVar10 = 0;
            pcVar33 = (code_load_func)(*(long *)(puVar2 + 2) + (ulong)(uVar31 & *(uint *)(lVar23 + lVar14)))
            ;
          }
          else {
            iVar24 = 2;
            uVar10 = 0;
            pcVar33 = (code_load_func)(void*)(lVar30 + 0x6b070);
          }
          cVar6 = *(char *)((long)puVar1 + 0x59);
          if (cVar6 == '\x01') goto LAB_00120f50;
LAB_00120b6c:
          if (cVar6 != '\x02') {
            pcVar35 = (code_store_func)(lVar30 + 0x8b070);
            if (cVar6 == '\0') {
              pcVar35 = (code_store_func)(*(long *)(puVar1 + 8) +
                                (ulong)(uVar28 & *(uint *)(lVar23 + lVar36)));
            }
            goto LAB_00120b80;
          }
          pcVar35 = (code_store_func)(void*)*(code **)(puVar1 + 0xc);
              lVar23 = (long)*(code **)(puVar1 + 0x12);
              uVar15 = (ulong)*(code **)(puVar1 + 0x14);
          if (iVar24 == 2) {
            uVar9 = uVar28;
            uVar10 = uVar8;
            if (lVar23 != 0) {
              uVar12 = memory_check_code_region(lVar23,uVar15,uVar28,uVar8 << 2);
              local_30 = local_30 | uVar12;
            }
            do {
              (*pcVar35)(lVar30,uVar9 & *puVar1,*(undefined4 *)pcVar33);
              uVar10 = uVar10 - 1;
              uVar9 = uVar9 + 4;
            } while (uVar10 != 0);
            uVar28 = uVar28 + uVar8 * 4;
          }
          else {
            uVar10 = uVar8;
            uVar9 = uVar28;
            if (lVar23 != 0) {
              uVar12 = memory_check_code_region(lVar23,uVar15,uVar28,uVar8 << 2);
              local_30 = local_30 | uVar12;
            }
            do {
              uVar11 = (*pcVar33)(lVar30,uVar31 & *puVar2);
              (*pcVar35)(lVar30,uVar9 & *puVar1,uVar11);
              uVar10 = uVar10 - 1;
              uVar9 = uVar9 + 4;
            } while (uVar10 != 0);
            uVar28 = uVar28 + uVar8 * 4;
          }
        }
        else {
          cVar6 = (char)puVar2[0x16];
          local_38 = 0;
          if (cVar6 != '\x01') goto LAB_00120b48;
LAB_00120f18:
          pcVar33 = (code_load_func)(**(code_load_func **)(puVar2 + 2))(lVar30,uVar31);
          cVar6 = *(char *)((long)puVar1 + 0x59);
          iVar24 = 2;
          uVar10 = 0;
          if (cVar6 != '\x01') goto LAB_00120b6c;
LAB_00120f50:
          pcVar35 = (code_store_func)(**(code_load_func **)(puVar1 + 8))(lVar30,uVar28);
LAB_00120b80:
              lVar23 = (long)*(code **)(puVar1 + 0x12);
              uVar15 = (ulong)*(code **)(puVar1 + 0x14);
          if (uVar10 == 1) {
            if (lVar23 != 0) {
              uVar10 = memory_check_code_region(lVar23,uVar15,uVar28,uVar8 * 4);
              local_30 = local_30 | uVar10;
            }
            uVar28 = uVar28 + uVar8 * 4;
            pcVar37 = pcVar35;
            do {
              uVar11 = (*pcVar33)(lVar30,uVar31 & *puVar2);
              pcVar38 = (code*)((char*)pcVar37 + 4);
              *(undefined4 *)pcVar37 = uVar11;
              pcVar37 = (code_store_func)(void*)pcVar38;
            } while (pcVar38 != pcVar35 + ((ulong)(uVar8 - 1) + 1) * 4);
          }
          else {
            if (lVar23 != 0) {
              uVar9 = memory_check_code_region(lVar23,uVar15,uVar28,uVar8 * 4);
              local_30 = local_30 | uVar9;
            }
            uVar9 = uVar8 - 1;
            uVar28 = uVar28 + uVar8 * 4;
            if (pcVar33 < pcVar35 + (ulong)uVar8 * 4 && pcVar35 < pcVar33 + 4 || uVar9 < 8) {
              pcVar37 = pcVar35;
              do {
                    pcVar38 = (code*)((char*)pcVar37 + 4);
                    *(undefined4 *)pcVar37 = *(undefined4 *)pcVar33;
                    pcVar37 = (code_store_func)(void*)pcVar38;
              } while (pcVar35 + (ulong)uVar9 * 4 + 4 != pcVar38);
            }
            else {
              uVar11 = *(undefined4 *)pcVar33;
              *(undefined8 *)auVar41 = CONCAT44(uVar11,uVar11);
              *(undefined4 *)(auVar41 + 8) = uVar11;
              *(undefined4 *)(auVar41 + 12) = uVar11;
              uVar12 = (uVar8 - 4 >> 2) + 1;
              pcVar37 = pcVar35;
              do {
                uVar10 = uVar10 + 1;
                *(long *)(pcVar37 + 8) = *(undefined8 *)(auVar41 + 8);
                *(undefined8 *)pcVar37 = *(undefined8 *)auVar41;
                pcVar37 = pcVar37 + 0x10;
              } while (uVar10 < uVar12);
              uVar16 = (ulong)(uVar12 * 4);
              if (uVar8 != uVar12 * 4) {
                uVar11 = *(undefined4 *)pcVar33;
                *(undefined4 *)(pcVar35 + uVar16 * 4) = uVar11;
                iVar24 = uVar9 + uVar12 * -4;
                if ((iVar24 != 0) &&
                   (*(undefined4 *)(pcVar35 + uVar16 * 4 + 4) = uVar11, iVar24 != 1)) {
                  *(undefined4 *)(pcVar35 + uVar16 * 4 + 8) = *(undefined4 *)pcVar33;
                }
              }
            }
          }
        }
      } while (local_38 != 0);
      goto LAB_0011f928;
    }
    if (uVar12 == 10) {
      lVar36 = param_1[1];
      lVar14 = (ulong)(uVar10 >> 0x17) * 0x60;
      lVar23 = (ulong)(uVar8 >> 0x17) * 0x60;
      puVar1 = (uint *)(lVar36 + lVar14);
      puVar2 = (uint *)(lVar36 + lVar23);
      cVar6 = (char)puVar1[0x16];
      if (cVar6 == '\x01') {
        pcVar33 = (code_load_func)(**(code_load_func **)(puVar1 + 2))(lVar30,uVar31);
        iVar24 = 2;
        local_30 = 0;
      }
      else if (cVar6 == '\x02') {
        iVar24 = 3;
        local_30 = 1;
        pcVar33 = (code_load_func)*(code_load_func **)(puVar1 + 6);
      }
      else if (cVar6 == '\0') {
        iVar24 = 2;
        pcVar33 = (code_load_func)(*(long *)(puVar1 + 2) + (ulong)(uVar31 & *(uint *)(lVar36 + lVar14)));
        local_30 = 0;
      }
      else {
            pcVar33 = (code_load_func)(void*)(lVar30 + 0x6b070);
        iVar24 = 2;
        local_30 = 0;
      }
      cVar6 = *(char *)((long)puVar2 + 0x59);
      if (cVar6 == '\x01') {
        puVar18 = (undefined4 *)(**(code_load_func **)(puVar2 + 8))(lVar30,uVar28);
      }
      else {
        if (cVar6 == '\x02') {
          pcVar35 = (code_store_func)(void*)*(code **)(puVar2 + 0xc);
          lVar14 = (long)*(code **)(puVar2 + 0x12);
          uVar15 = (ulong)*(code **)(puVar2 + 0x14);
          if (iVar24 == 2) {
            local_30 = 0;
            if (lVar14 != 0) {
              local_30 = memory_check_code_region(lVar14,uVar15,uVar28,local_38 << 2);
            }
            do {
              (*pcVar35)(lVar30,uVar28 & *puVar2,*(undefined4 *)pcVar33);
              local_38 = local_38 - 1;
            } while (local_38 != 0);
          }
          else {
            local_30 = 0;
            if (lVar14 != 0) {
              local_30 = memory_check_code_region(lVar14,uVar15,uVar28,local_38 << 2);
            }
            do {
              uVar11 = (*pcVar33)(lVar30,uVar31 & *puVar1);
              (*pcVar35)(lVar30,uVar28 & *puVar2,uVar11);
              local_38 = local_38 - 1;
            } while (local_38 != 0);
          }
          goto LAB_0011fd58;
        }
        if (cVar6 == '\0') {
          puVar18 = (undefined4 *)
                    (*(long *)(puVar2 + 8) + (ulong)(uVar28 & *(uint *)(lVar36 + lVar23)));
        }
        else {
          puVar18 = (undefined4 *)(lVar30 + 0x8b070);
        }
      }
                lVar14 = (**(code_func_long **)(puVar2 + 0x12))(lVar30,puVar2,uVar28);
                uVar15 = (**(code_func_ulong **)(puVar2 + 0x14))(lVar30,puVar2,uVar28);
      if (local_30 == 1) {
        local_30 = 0;
        if (lVar14 != 0) {
          local_30 = memory_check_code_region(lVar14,uVar15,uVar28,local_38 << 2);
        }
        do {
          uVar11 = (*pcVar33)(lVar30,uVar31 & *puVar1);
          *puVar18 = uVar11;
          local_38 = local_38 - 1;
        } while (local_38 != 0);
      }
      else {
        if (lVar14 != 0) {
          local_30 = memory_check_code_region(lVar14,uVar15,uVar28,local_38 << 2);
        }
        do {
          *puVar18 = *(undefined4 *)pcVar33;
          local_38 = local_38 - 1;
        } while (local_38 != 0);
      }
LAB_0011fd58:
      bVar5 = *(int *)(lVar25 + 0x210c) == 1;
    }
    else {
      if (uVar12 == 0xb) goto LAB_00120ac4;
      local_30 = 0;
    }
LAB_0011f93c:
    if (uVar19 != 0 && bVar5) {
LAB_001212d0:
      local_40 = local_68 >> 0x15;
      iVar24 = *(byte *)((long)param_2 + 0x25) + 0xc;
      if (*(char *)((long)param_2 + 0x26) != '\0') {
        remove_event(lVar20 + 0x18,iVar24);
        iVar24 = *(byte *)((long)param_2 + 0x25) + 0xc;
      }
      *(undefined1 *)((long)param_2 + 0x26) = 1;
      local_48 = (int)lVar13;
      uVar19 = (local_48 - (int)*(undefined8 *)(lVar20 + 8)) + uVar19;
      schedule_event(lVar20 + 0x18,uVar19,iVar24);
      if (uVar19 < *(uint *)(lVar20 + 0x10)) {
        *(uint *)(lVar25 + 0x22a8) = *(uint *)(lVar25 + 0x22a8) | 4;
      }
      goto LAB_0011f9c4;
    }
  }
  if ((local_68 >> 0x19 & 1) == 0) {
    local_68 = local_68 & 0x7fffffff;
    *(uint *)(param_2 + 4) = local_68;
    *(uint *)(param_2[2] + 8) = local_68;
  }
  local_40 = local_68 >> 0x15;
  if ((local_68 >> 0x1e & 1) != 0) {
    lVar13 = *(long *)(param_2[1] + 0x2080);
    uVar10 = 0x100 << (ulong)(*(byte *)((long)param_2 + 0x25) & 0x1f) | *(uint *)(lVar13 + 0x214);
    *(uint *)(lVar13 + 0x214) = uVar10;
    lVar20 = param_2[1];
    if ((*(uint *)(lVar20 + 0x2110) & 6) == 0) {
      uVar10 = -*(int *)(lVar13 + 0x208) & *(uint *)(lVar13 + 0x210) & uVar10;
      *(uint *)(lVar20 + 0x2108) = uVar10;
    }
    else {
      uVar10 = *(uint *)(lVar20 + 0x2108);
    }
    if (uVar10 != 0) {
      *(uint *)(lVar20 + 0x22a8) = *(uint *)(lVar20 + 0x22a8) | 2;
    }
  }
LAB_0011f9c4:
  if ((local_40 & 3) != 3) {
    *(uint *)((long)param_2 + 0x1c) = uVar28;
  }
  *(uint *)(param_2 + 3) = uVar31;
  if (local_30 == 0) {
                    // WARNING: Read-only address (ram,0x0021d600) is written
                    // WARNING: Read-only address (ram,0x0021d610) is written
    return 0;
  }
  *(uint *)(param_2[1] + 0x22a8) = *(uint *)(param_2[1] + 0x22a8) | 1;
  printf("DMA modified code (%x for %x).\n",uVar28,local_68 & 0x1fffff);
  return local_30;
}

// Function: draw_menu_main
void draw_menu_main(void)

{
  return;
}

// Function: event_timer_overflow_function
void event_timer_overflow_function(long param_1,long *param_2)

{
  long lVar1;
  int iVar2;
  ushort uVar3;
  uint uVar4;
  long lVar5;
  uint *puVar6;
  uint *puVar7;
  ulong uVar8;
  long lVar9;
  uint *puVar10;
  uint uVar11;
  
  iVar2 = *(int *)(*param_2 + 0x210c);
  uVar3 = *(ushort *)((long)param_2 + 0x1a);
  uVar11 = (uint)*(byte *)((long)param_2 + 0x1d);
  if (iVar2 == 0 && uVar11 == 1) {
    if ((*(int *)(param_1 + 0x85a08) != 0) && ((*(uint *)(param_1 + 0x8a374) >> 6 & 1) == 0)) {
      update_spu(param_1);
      goto LAB_0011d4dc;
    }
    if ((*(ushort *)((long)param_2 + 0x3a) >> 2 & 1) == 0) goto LAB_0011d418;
    lVar5 = *(long *)(*param_2 + 0x2260);
    uVar8 = 0x108;
  }
  else {
    if (uVar11 == 3) goto LAB_0011d418;
LAB_0011d4dc:
    if ((*(ushort *)((long)param_2 + 0x3a) >> 2 & 1) == 0) goto LAB_0011d418;
    uVar8 = (ulong)((uVar11 + 0x41) * 4);
    lVar5 = *(long *)(*param_2 + 0x2260);
    if (*(int *)(*param_2 + 0x210c) == 1) {
      *(short *)(lVar5 + 0x1b070 + uVar8) = *(short *)(lVar5 + 0x1b070 + uVar8) + 1;
      goto LAB_0011d418;
    }
  }
  *(short *)(lVar5 + 0x23070 + uVar8) = *(short *)(lVar5 + 0x23070 + uVar8) + 1;
LAB_0011d418:
  if ((uVar3 >> 6 & 1) != 0) {
    lVar5 = *(long *)(*param_2 + 0x2080);
    uVar4 = *(uint *)(lVar5 + 0x214) | *(uint *)(param_2 + 2);
    *(uint *)(lVar5 + 0x214) = uVar4;
    if ((*(uint *)(*param_2 + 0x2110) & 6) == 0) {
      *(uint *)(*param_2 + 0x2108) = -*(int *)(lVar5 + 0x208) & uVar4 & *(uint *)(lVar5 + 0x210);
    }
  }
  puVar6 = *(uint **)(param_1 + 0x318);
  lVar5 = param_1 + 0x18;
  uVar8 = (ulong)(uVar11 + 3 + iVar2 * 4);
  param_2[1] = *(long *)(param_1 + 8);
  lVar9 = lVar5 + uVar8 * 0x30;
  uVar11 = *(uint *)((long)param_2 + 0x14);
  if (puVar6 == (uint *)0x0) {
    lVar1 = lVar5 + uVar8 * 0x30;
    *(uint *)(lVar5 + uVar8 * 0x30) = uVar11;
    *(undefined8 *)(lVar1 + 0x18) = 0;
    *(undefined8 *)(lVar1 + 0x20) = 0;
    *(long *)(param_1 + 0x318) = lVar9;
  }
  else {
    puVar10 = (uint *)0x0;
    while (puVar7 = puVar6, *puVar7 < uVar11) {
      uVar11 = uVar11 - *puVar7;
      puVar6 = *(uint **)(puVar7 + 6);
      puVar10 = puVar7;
      if (*(uint **)(puVar7 + 6) == (uint *)0x0) {
        lVar1 = lVar5 + uVar8 * 0x30;
        *(uint *)(lVar5 + uVar8 * 0x30) = uVar11;
        *(undefined8 *)(lVar1 + 0x18) = 0;
        *(uint **)(lVar1 + 0x20) = puVar7;
        *(long *)(puVar7 + 6) = lVar9;
        return;
      }
    }
    lVar1 = lVar5 + uVar8 * 0x30;
    *(uint *)(lVar5 + uVar8 * 0x30) = uVar11;
    *(uint **)(lVar1 + 0x18) = puVar7;
    *(uint **)(lVar1 + 0x20) = puVar10;
    if (puVar10 == (uint *)0x0) {
      *(long *)(param_1 + 0x318) = lVar9;
    }
    else {
      *(long *)(puVar10 + 6) = lVar9;
    }
    *(long *)(puVar7 + 8) = lVar9;
    *puVar7 = *puVar7 - uVar11;
  }
  return;
}

// Function: execute_cpu
void execute_cpu(long param_1)

{
  execute_cpu(*(long *)(param_1 + 0x2258));
                    // WARNING: Could not recover jumptable at 0x00128258. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code1 **)(param_1 + 0x23b0))(*(undefined8 *)(param_1 + 0x2258));
  return;
}

// Function: game_database_generate_crc32_from_memory
uint game_database_generate_crc32_from_memory(byte *param_1,uint param_2)

{
  byte *pbVar1;
  byte bVar2;
  uint uVar3;
  byte *pbVar4;
  int iVar6;
  uint uVar7;
  byte *pbVar5;
  
  uVar3 = 0x80000000 >> (ulong)((uint)LZCOUNT(param_2) & 0x1f);
  if (param_2 == 0) {
    uVar7 = 0xffffffff;
  }
  else {
    pbVar1 = param_1 + (ulong)(param_2 - 1) + 1;
    uVar7 = 0xffffffff;
    pbVar5 = param_1;
    do {
      pbVar4 = pbVar5 + 1;
      uVar7 = *(uint *)(&crc32_table + ((ulong)(*pbVar5 ^ uVar7) & 0xff) * 4) ^ uVar7 >> 8;
      pbVar5 = pbVar4;
      param_1 = pbVar1;
    } while (pbVar4 != pbVar1);
  }
  if (param_2 != uVar3) {
    bVar2 = param_1[-1];
    iVar6 = uVar3 * 2;
    printf("Rounding up file CRC from %x to %x bytes, repeating with %x.\n",param_2,iVar6,
                 bVar2);
    iVar6 = iVar6 - param_2;
    if (iVar6 != 0) {
      do {
        iVar6 = iVar6 + -1;
        uVar7 = *(uint *)(&crc32_table + ((ulong)(bVar2 ^ uVar7) & 0xff) * 4) ^ uVar7 >> 8;
      } while (iVar6 != 0);
      return ~uVar7;
    }
  }
  return ~uVar7;
}

// Function: game_database_lookup_by_crc32
long game_database_lookup_by_crc32(long param_1,uint param_2)

{
  uint uVar1;
  long lVar2;
  ulong uVar3;
  ulong uVar4;
  ulong uVar5;
  
  uVar4 = (ulong)*(uint *)(param_1 + 0x20);
  uVar5 = 0;
  do {
    if (uVar4 <= uVar5) {
      return 0;
    }
    while( true ) {
      uVar3 = uVar4 + uVar5 >> 1;
      lVar2 = *(long *)(*(long *)(param_1 + 8) + uVar3 * 8);
      uVar1 = *(uint *)(lVar2 + 0x1c);
      if (param_2 == uVar1) {
        return lVar2;
      }
      if (uVar1 <= param_2) break;
      uVar4 = uVar3;
      if (uVar3 <= uVar5) {
        return 0;
      }
    }
    uVar5 = uVar3 + 1;
  } while( true );
}

// Function: gamecard_close
int gamecard_close(long param_1)

{
  int iVar1;
  FILE *__s;
  size_t sVar2;
  
  if (*(int *)(param_1 + 0x2d84) != 0) {
    backup_save(param_1 + 0x968);
  }
  if (((*(int *)(param_1 + 0x8dc) != 0) && (*(char *)(param_1 + 0x8e3) != '\0')) &&
     (*(long *)(param_1 + 0x8c8) != 0)) {
    __s = fopen((char *)(param_1 + 0x4a0),"wb");
    if (__s == (FILE *)0x0) {
      printf("ERROR: Couldn\'t save GBA backup %s\n",(char *)(param_1 + 0x4a0));
    }
    else {
      puts("Saving GBA backup file.");
      sVar2 = fwrite(*(void **)(param_1 + 0x8c8),(ulong)*(uint *)(param_1 + 0x8d4),1,__s);
      if (sVar2 != 1) {
        puts("ERROR: Couldn\'t write all of GBA backup.");
      }
      fclose(__s);
    }
  }
  free(*(void **)(param_1 + 0x2d90));
  *(undefined8 *)(param_1 + 0x2d90) = 0;
  nds_file_close(*(undefined8 *)(param_1 + 0x920));
  iVar1 = *(int *)(param_1 + 0x93c);
  *(undefined8 *)(param_1 + 0x920) = 0;
  if (iVar1 < 0) {
    return iVar1;
  }
  iVar1 = close(iVar1);
  return iVar1;
}

// Function: gamecard_decrypt_secure_region
void gamecard_decrypt_secure_region(long *param_1,uint param_2,void *param_3)

{
  uint uVar1;
  undefined8 uVar2;
  uint uVar3;
  uint uVar4;
  uint *puVar5;
  uint *puVar6;
  uint local_1070;
  uint local_106c;
  uint local_1068;
  uint local_1060 [17];
  uint auStack_101c [769];
  int aiStack_418 [256];
  long local_18;
  undefined1 local_10;
  long local_8;
  uint *puVar7;
  
  local_1068 = param_2 * 2;
  local_106c = param_2 >> 1;
  local_8 = __stack_chk_guard;
  local_1070 = param_2;
  memcpy(local_1060,param_3,0x1048);
  gamecard_apply_keycode(local_1060,&local_1070);
  gamecard_apply_keycode(local_1060,&local_1070);
  gamecard_decrypt_pair(local_1060,(uint*)param_1);
  local_106c = local_106c * 2;
  local_1068 = local_1068 >> 1;
  gamecard_apply_keycode(local_1060,&local_1070);
  gamecard_decrypt_pair(local_1060,(uint*)param_1);
  local_18 = *param_1;
  local_10 = 0;
  if (*param_1 == 0x6a624f7972636e65) {
    puVar5 = (uint *)(param_1 + 1);
    do {
      uVar3 = puVar5[1];
      puVar6 = auStack_101c;
      uVar4 = *puVar5;
      do {
        puVar7 = puVar6 + -1;
        uVar1 = uVar3 ^ *puVar6;
        uVar3 = (local_1060[(uVar1 >> 0x18) + 0x12] +
                 local_1060[((ulong)(uVar1 >> 0x10) & 0xff) + 0x112] ^
                local_1060[((ulong)(uVar1 >> 8) & 0xff) + 0x212]) + aiStack_418[(byte)uVar1] ^ uVar4
        ;
        puVar6 = puVar7;
        uVar4 = uVar1;
      } while (puVar7 != local_1060 + 1);
      *puVar5 = uVar3 ^ local_1060[1];
      puVar5[1] = uVar1 ^ local_1060[0];
      puVar5 = puVar5 + 2;
    } while (puVar5 != (uint *)(param_1 + 0x100));
    uVar2 = 0;
    *param_1 = -0x1800210018002101;
  }
  else {
    printf("ERROR: Secure area ID should contain \'encryObj\', instead contains \'%s\'\n",
                 &local_18);
    uVar2 = 0xffffffff;
  }
  if (local_8 - __stack_chk_guard == 0) {
    return;
  }
                    // WARNING: Subroutine does not return
  
}

// Function: gamecard_initialize_homebrew
void gamecard_initialize_homebrew(long param_1)

{
  char *__s;
  int iVar1;
  size_t sVar2;
  long lVar3;
  long lVar4;
  char acStack_428 [1056];
  long local_8;
  
  lVar4 = *(long *)(param_1 + 0x918);
  lVar3 = *(long *)(nds_system + lVar4 + 0x30d8930);
  local_8 = __stack_chk_guard;
  puts("Homebrew recognized. Setting up R4 flashcart emulation.");
  __s = (char *)(lVar3 + 0x3e0000);
  if (-1 < *(int *)(param_1 + 0x93c)) {
    close(*(int *)(param_1 + 0x93c));
  }
  sprintf(acStack_428,"%s%cdrastic_dldi.img",lVar4 + 0x8ab80,0x2f);
  iVar1 = open(acStack_428,2);
  *(int *)(param_1 + 0x93c) = iVar1;
  if (iVar1 < 0) {
    perror("Couldn\'t load drastic_dldi.img: ");
  }
  sprintf(__s,"fat:/%s",lVar4 + 0x8af80);
  printf("Using NitroFS path \'%s\'.\n",__s);
  *(undefined8 *)(polygon_sort_list_13776 + lVar3 + 0x15830) = 0x27e00005f617267;
  sVar2 = strlen(__s);
  *(int *)(polygon_sort_list_13776 + lVar3 + 0x15838) = (int)sVar2 + 1;
  if (local_8 - __stack_chk_guard == 0) {
    return;
  }
                    // WARNING: Subroutine does not return
  
}

// Function: gba_backup_auto_save_step
char * gba_backup_auto_save_step(char *param_1)

{
  int iVar1;
  uint uVar2;
  FILE *__s;
  size_t sVar3;
  char *pcVar4;
  
  if (*(int *)(param_1 + 0x43c) == 0) {
    return param_1;
  }
  iVar1 = *(int *)(param_1 + 0x43c) + -1;
  *(int *)(param_1 + 0x43c) = iVar1;
  if (((iVar1 == 0) && (param_1[0x443] != '\0')) && (*(long *)(param_1 + 0x428) != 0)) {
    __s = fopen(param_1,"wb");
    if (__s != (FILE *)0x0) {
      puts("Saving GBA backup file.");
      sVar3 = fwrite(*(void **)(param_1 + 0x428),(ulong)*(uint *)(param_1 + 0x434),1,__s);
      if (sVar3 != 1) {
        puts("ERROR: Couldn\'t write all of GBA backup.");
      }
      uVar2 = fclose(__s);
      return (char *)(ulong)uVar2;
    }
    pcVar4 = (char *)printf("ERROR: Couldn\'t save GBA backup %s\n",param_1);
    return pcVar4;
  }
  return param_1;
}

// Function: initialize_backup
void initialize_backup(void *param_1,int param_2,void *param_3,uint param_4,char *param_5)

{
  uint uVar1;
  int iVar2;
  ulong uVar3;
  undefined1 uVar4;
  FILE *__stream;
  size_t sVar5;
  long __off;
  ulong uVar6;
  void *pvVar7;
  uint uVar8;
  
  *(int *)((long)param_1 + 0x2400) = param_2;
  *(uint *)((long)param_1 + 0x2408) = param_4 - 1;
  *(void **)((long)param_1 + 0x2410) = param_3;
  *(undefined1 *)((long)param_1 + 0x2426) = 0;
  *(undefined4 *)((long)param_1 + 0x240c) = 0;
  if (param_2 != 1) {
    if (param_2 != 2) {
      if (param_2 == 0) {
        *(undefined1 *)((long)param_1 + 0x2424) = 0;
      }
      goto joined_r0x0017271c;
    }
    if (param_4 < 0x10001) {
      uVar4 = 2;
      if (param_4 < 0x201) {
        uVar4 = 1;
      }
      *(undefined1 *)((long)param_1 + 0x2424) = uVar4;
      goto joined_r0x0017271c;
    }
  }
  *(undefined1 *)((long)param_1 + 0x2424) = 3;
joined_r0x0017271c:
  if (param_5 == (char *)0x0) {
    *(char *)((long)param_1 + 0x2000) = '\0';
    *(undefined1 *)((long)param_1 + 0x2423) = 0;
    return;
  }
  __stream = fopen(param_5,"rb");
  *(undefined1 *)((long)param_1 + 0x2427) = 0;
  if (__stream == (FILE *)0x0) {
    puts("Failed to load backup file.");
    memset(param_3,param_4,0xff);
    memset(param_1,0xff,(ulong)(param_4 >> 0xc));
  }
  else {
    sVar5 = fread(param_3,(ulong)param_4,1,__stream);
    if (sVar5 != 1) {
      puts(" Failed to load entire size.");
    }
    __off = ftell(__stream);
    fseek(__stream,0,2);
    uVar6 = ftell(__stream);
    fseek(__stream,__off,0);
    fclose(__stream);
    printf("Loading backup file %s, %d bytes\n",param_5,uVar6 & 0xffffffff);
    uVar8 = (uint)uVar6;
    if (param_4 + 0x7a != uVar8) {
      *(uint *)((long)param_1 + 0x240c) = param_4 + 0x7a;
    }
    uVar1 = param_4 + 0x3fff >> 0xe;
    if (uVar8 < param_4) {
      iVar2 = uVar8 - 0x400;
      if (iVar2 < 0) {
        iVar2 = 0;
      }
      pvVar7 = memmem((void *)((long)param_3 + (long)iVar2),(ulong)(uVar8 - iVar2),
                      desmume_footer_str_11260,0x52);
      if (pvVar7 != (void *)0x0) {
        uVar6 = (long)pvVar7 - (long)param_3;
        printf(" Found DeSmuME footer at position %d. Truncating.\n");
      }
      uVar3 = (uVar6 & 0xffffffff) >> 0xe;
      printf(" Backup file less than full size (should be %d, loaded %d).\n",(ulong)param_4,
                   uVar6 & 0xffffffff);
      memset((void *)((long)param_3 + (uVar6 & 0xffffffff)),param_4 - (int)uVar6,0xff);
      memset(param_1,0,uVar3 << 2);
      memset((void *)((long)param_1 + uVar3 * 4),0xff,(ulong)((uVar1 - (int)uVar3) * 4));
    }
    else {
      memset(param_1,0,(ulong)uVar1);
    }
  }
  strncpy((char *)((long)param_1 + 0x2000),param_5,0x3ff);
  *(undefined1 *)((long)param_1 + 0x23ff) = 0;
  *(undefined1 *)((long)param_1 + 0x2423) = 0;
  return;
}

// Function: initialize_benchmark
void initialize_benchmark
               (undefined8 *param_1,undefined8 param_2,undefined4 param_3,undefined4 param_4,
               undefined8 param_5,undefined4 param_6)

{
  *param_1 = param_2;
  *(undefined4 *)((long)param_1 + 0x4c) = param_3;
  *(undefined4 *)(param_1 + 10) = param_4;
  *(undefined8 *)((long)param_1 + 0x54) = 0;
  *(undefined8 *)((long)param_1 + 0x5c) = 0x100000000;
  *(undefined4 *)((long)param_1 + 100) = param_6;
  return;
}

// Function: initialize_game_database
undefined4 initialize_game_database(undefined8 *param_1,char *param_2)

{
  uint uVar1;
  long *plVar2;
  char *__s1;
  char cVar3;
  undefined1 uVar4;
  int iVar5;
  int iVar6;
  uint uVar7;
  FILE *__stream;
  char *pcVar8;
  ulong uVar9;
  size_t sVar10;
  void *pvVar11;
  void *pvVar12;
  void *pvVar13;
  undefined8 uVar14;
  undefined8 *puVar15;
  ulong uVar17;
  undefined4 uVar18;
  long lVar19;
  undefined4 uVar20;
  uint uVar21;
  ulong uVar22;
  void *pvVar23;
  void *pvVar24;
  void *pvVar25;
  void *pvVar26;
  undefined4 uVar27;
  undefined4 uVar28;
  undefined8 *local_7e8;
  int local_7e0;
  uint local_7dc;
  uint local_7b8;
  undefined4 local_7b4;
  struct stat asStack_798 [2];
  char *local_618;
  undefined8 local_610 [32];
  long alStack_510 [6];
  long alStack_4e0 [26];
  uint local_410;
  char local_40c;
  char acStack_408 [256];
  undefined1 auStack_308 [256];
  char acStack_208 [256];
  char local_108 [256];
  long local_8;
  undefined8 *puVar16;
  
  local_8 = __stack_chk_guard;
  __stream = fopen(param_2,"rb");
  if (__stream == (FILE *)0x0) {
    uVar28 = 0xffffffff;
    printf("Error: could not load game database file %s.\n",param_2);
    goto LAB_001737a0;
  }
  stat(param_2,asStack_798);
  param_1[3] = asStack_798[0].st_mtim.tv_sec;
  local_7e8 = malloc(0x700);
  pcVar8 = fgets(acStack_408,0x100,__stream);
  if (pcVar8 == (char *)0x0) {
    uVar14 = 1;
LAB_00173768:
    printf("%d: Failed to parse game database file: %s\n",uVar14,auStack_308);
    fflush(stdout);
  }
  else {
    iVar5 = strncasecmp(acStack_408,"<?xml version=\'1.0\' encoding=\'UTF-8\'?>",0x26);
    if (iVar5 != 0) {
      uVar14 = 1;
      goto LAB_00173768;
    }
    plVar2 = (long *)(asStack_798[0].st_size + 1);
    iVar5 = xml_parse_line(__stream,plVar2,auStack_308);
    pcVar8 = local_618;
    if (((iVar5 == -1) || (iVar5 = strcasecmp(local_618,"database"), iVar5 != 0)) ||
       (local_40c != '\0')) {
      sprintf(auStack_308,1,0x100,"Wrong tag name: expected database, got %s\n",pcVar8);
      uVar14 = 2;
      goto LAB_00173768;
    }
    uVar28 = 0;
    local_7e0 = 3;
    local_7dc = 0;
    local_7b8 = 0x20;
    local_7b4 = 0;
LAB_001732a8:
    iVar6 = xml_parse_line(__stream,plVar2,auStack_308);
    pcVar8 = local_618;
    iVar5 = local_7e0;
    if (iVar6 != -1) {
      iVar5 = strcasecmp(local_618,"database");
      if ((iVar5 == 0) && (local_40c == '\x01')) {
        uVar22 = (ulong)local_7dc;
        pvVar12 = realloc(local_7e8,(ulong)local_7dc * 0x38);
        *param_1 = pvVar12;
        *(uint *)(param_1 + 4) = local_7dc;
        pvVar11 = malloc(uVar22 << 3);
        param_1[1] = pvVar11;
        pvVar13 = malloc(uVar22 << 3);
        param_1[2] = pvVar13;
        if (local_7dc == 0) goto LAB_00173cc0;
        if (local_7dc - 1 < 4) {
          uVar7 = 0;
          goto LAB_00173c54;
        }
        lVar19 = 0x10;
        uVar17 = 0x100000000;
        uVar9 = 0x300000002;
        do {
          pvVar23 = (void *)((long)pvVar12 + (uVar17 & 0xffffffff) * 0x38);
          pvVar24 = (void *)((long)pvVar12 + (uVar17 >> 0x20) * 0x38);
          pvVar25 = (void *)((long)pvVar12 + (uVar9 & 0xffffffff) * 0x38);
          pvVar26 = (void *)((long)pvVar12 + (uVar9 >> 0x20) * 0x38);
          puVar15 = (undefined8 *)((long)pvVar11 + lVar19 + -0x10);
          puVar15[1] = pvVar24;
          *puVar15 = pvVar23;
          puVar15 = (undefined8 *)((long)pvVar13 + lVar19 + -0x10);
          puVar15[1] = pvVar24;
          *puVar15 = pvVar23;
          ((undefined8 *)((long)pvVar11 + lVar19))[1] = pvVar26;
          *(undefined8 *)((long)pvVar11 + lVar19) = pvVar25;
          ((undefined8 *)((long)pvVar13 + lVar19))[1] = pvVar26;
          *(undefined8 *)((long)pvVar13 + lVar19) = pvVar25;
          lVar19 = lVar19 + 0x20;
          uVar17 = CONCAT44((int)(uVar17 >> 0x20) + 4,(int)uVar17 + 4);
          uVar9 = CONCAT44((int)(uVar9 >> 0x20) + 4,(int)uVar9 + 4);
        } while (lVar19 != (ulong)((local_7dc >> 2) - 1) * 0x20 + 0x30);
        uVar7 = local_7dc & 0xfffffffc;
        if ((local_7dc & 3) != 0) {
LAB_00173c54:
          pvVar23 = (void *)((long)pvVar12 + (ulong)uVar7 * 0x38);
          *(void **)((long)pvVar11 + (ulong)uVar7 * 8) = pvVar23;
          *(void **)((long)pvVar13 + (ulong)uVar7 * 8) = pvVar23;
          uVar21 = uVar7 + 1;
          if (uVar21 < local_7dc) {
            pvVar23 = (void *)((long)pvVar12 + (ulong)uVar21 * 0x38);
            uVar1 = uVar7 + 2;
            *(void **)((long)pvVar11 + (ulong)uVar21 * 8) = pvVar23;
            *(void **)((long)pvVar13 + (ulong)uVar21 * 8) = pvVar23;
            if (uVar1 < local_7dc) {
              pvVar23 = (void *)((long)pvVar12 + (ulong)uVar1 * 0x38);
              uVar7 = uVar7 + 3;
              *(void **)((long)pvVar11 + (ulong)uVar1 * 8) = pvVar23;
              *(void **)((long)pvVar13 + (ulong)uVar1 * 8) = pvVar23;
              if (uVar7 < local_7dc) {
                pvVar12 = (void *)((long)pvVar12 + (ulong)uVar7 * 0x38);
                *(void **)((long)pvVar11 + (ulong)uVar7 * 8) = pvVar12;
                *(void **)((long)pvVar13 + (ulong)uVar7 * 8) = pvVar12;
              }
            }
          }
        }
LAB_00173cc0:
        qsort(pvVar11,uVar22,8,compare_game_entry_crc32);
        qsort((void *)param_1[2],uVar22,8,compare_game_entry_game_code);
        printf("Loaded %d games in database file %s.\n",local_7dc,param_2);
        uVar28 = 0;
        goto LAB_001737a0;
      }
      iVar6 = strcasecmp(pcVar8,"cartridge");
      uVar7 = local_410;
      iVar5 = local_7e0 + 1;
      if ((iVar6 != 0) || ((local_40c != '\0' || (iVar5 = local_7e0 + 2, local_410 == 0))))
      goto LAB_00173810;
      uVar22 = 0;
      while( true ) {
        iVar6 = strcmp((char *)local_610[uVar22],"title");
        if (iVar6 == 0) break;
        uVar22 = uVar22 + 1;
        if (uVar7 <= (uint)uVar22) goto LAB_00173810;
      }
      if ((long *)(asStack_798[4].st_size + ((uVar22 & 0xffffffff) - 6) * sizeof(long)) == 0) goto LAB_00173810;
      strcpy(acStack_208,(char *)(asStack_798[4].st_size + ((uVar22 & 0xffffffff) - 6) * sizeof(long)));
      iVar6 = xml_parse_line(__stream,plVar2,auStack_308);
      if (((iVar6 == -1) || (iVar6 = strcasecmp(local_618,"slot1"), iVar6 != 0)) ||
         (local_40c != '\0')) goto LAB_00173810;
      iVar6 = xml_parse_line(__stream,plVar2,auStack_308);
      iVar5 = local_7e0 + 3;
      if (((iVar6 == -1) || (iVar6 = strcasecmp(local_618,"rom"), uVar7 = local_410, iVar6 != 0)) ||
         ((local_40c != '\x02' || (iVar5 = local_7e0 + 4, local_410 == 0)))) goto LAB_00173810;
      uVar22 = 0;
      while( true ) {
        iVar6 = strcmp((char *)local_610[uVar22],"size");
        if (iVar6 == 0) break;
        uVar22 = uVar22 + 1;
        if (uVar7 <= (uint)uVar22) goto LAB_00173810;
      }
      if ((char *)alStack_510[uVar22 & 0xffffffff] == (char *)0x0) goto LAB_00173810;
      uVar22 = strtoul((char *)alStack_510[uVar22 & 0xffffffff],(char **)0x0,0x10);
      uVar7 = local_410;
      if (local_410 == 0) goto LAB_00173810;
      uVar17 = 0;
      while( true ) {
        iVar6 = strcmp((char *)local_610[uVar17],"crc32");
        if (iVar6 == 0) break;
        uVar17 = uVar17 + 1;
        if (uVar7 <= (uint)uVar17) goto LAB_00173810;
      }
      if ((char *)alStack_510[uVar17 & 0xffffffff] == (char *)0x0) goto LAB_00173810;
      uVar17 = strtoul((char *)alStack_510[uVar17 & 0xffffffff],(char **)0x0,0x10);
      if (local_410 == 0) {
        uVar27 = 0xffffffff;
      }
      else {
        uVar9 = 0;
        do {
          pcVar8 = (char *)local_610[uVar9];
          if (((*pcVar8 == 'i') && (pcVar8[1] == 'd')) && (pcVar8[2] == '\0')) {
            if ((char *)alStack_510[uVar9 & 0xffffffff] != (char *)0x0) {
              uVar9 = strtoul((char *)alStack_510[uVar9 & 0xffffffff],(char **)0x0,0x10);
              uVar27 = (undefined4)uVar9;
              if (local_410 == 0) goto LAB_001738f8;
              goto LAB_00173504;
            }
            break;
          }
          uVar9 = uVar9 + 1;
        } while ((uint)uVar9 < local_410);
        uVar27 = 0xffffffff;
LAB_00173504:
        uVar7 = local_410;
        uVar9 = 0;
        do {
          iVar6 = strcmp((char *)local_610[uVar9],"title");
          if (iVar6 == 0) {
            if (alStack_510[uVar9 & 0xffffffff] != 0) {
              strcpy(local_108,(char *)alStack_510[uVar9 & 0xffffffff]);
              goto LAB_00173550;
            }
            break;
          }
          uVar9 = uVar9 + 1;
        } while ((uint)uVar9 < uVar7);
      }
LAB_001738f8:
      local_108[0] = '\0';
LAB_00173550:
      iVar6 = xml_parse_line(__stream,plVar2,auStack_308);
      pcVar8 = local_618;
      if (iVar6 == -1) goto LAB_00173810;
      iVar6 = strcasecmp(local_618,"save");
      uVar7 = local_410;
      uVar4 = 0;
      if (iVar6 == 0) {
        if (local_410 == 0) goto LAB_00173810;
        uVar9 = 0;
        while( true ) {
          iVar6 = strcmp((char *)local_610[uVar9],"size");
          if (iVar6 == 0) break;
          uVar9 = uVar9 + 1;
          if (uVar7 <= (uint)uVar9) goto LAB_00173810;
        }
        if ((char *)alStack_510[uVar9 & 0xffffffff] == (char *)0x0) goto LAB_00173810;
        uVar9 = strtoul((char *)alStack_510[uVar9 & 0xffffffff],(char **)0x0,0x10);
        uVar7 = local_410;
        uVar28 = (undefined4)uVar9;
        if (local_410 == 0) goto LAB_00173810;
        uVar9 = 0;
        while( true ) {
          iVar6 = strcmp((char *)local_610[uVar9],"type");
          if (iVar6 == 0) break;
          uVar9 = uVar9 + 1;
          if (uVar7 <= (uint)uVar9) goto LAB_00173810;
        }
        pcVar8 = (char *)alStack_510[uVar9 & 0xffffffff];
        if (pcVar8 == (char *)0x0) goto LAB_00173810;
        iVar6 = strcasecmp(pcVar8,"eeprom");
        if (iVar6 == 0) {
          uVar4 = 2;
        }
        else {
          iVar6 = strcasecmp(pcVar8,"flash");
          if (iVar6 == 0) {
            uVar9 = 0;
            do {
              pcVar8 = (char *)local_610[uVar9];
              if (((*pcVar8 == 'i') && (pcVar8[1] == 'd')) && (pcVar8[2] == '\0')) {
                if ((char *)alStack_510[uVar9 & 0xffffffff] != (char *)0x0) {
                  uVar9 = strtoul((char *)alStack_510[uVar9 & 0xffffffff],(char **)0x0,0x10);
                  local_7b4 = (undefined4)uVar9;
                }
                break;
              }
              uVar9 = uVar9 + 1;
            } while ((uint)uVar9 < uVar7);
            uVar4 = 1;
          }
          else {
            iVar6 = strcasecmp(pcVar8,"nand");
            if (iVar6 != 0) {
              sprintf(auStack_308,1,0x100,"Unknown save type %s.\n",pcVar8);
              goto LAB_00173810;
            }
            uVar4 = 3;
          }
        }
        iVar6 = xml_parse_line(__stream,plVar2,auStack_308);
        if (iVar6 == -1) goto LAB_00173810;
        iVar5 = local_7e0 + 5;
        pcVar8 = local_618;
      }
      iVar6 = strcasecmp(pcVar8,"irport");
      if (iVar6 == 0) {
        uVar20 = 0;
        if (local_40c == '\x02') {
          iVar6 = xml_parse_line(__stream,plVar2,auStack_308);
          if (iVar6 != -1) {
            iVar5 = iVar5 + 1;
            uVar18 = 3;
            uVar20 = 1;
            pcVar8 = local_618;
            goto LAB_001738ac;
          }
          goto LAB_00173810;
        }
      }
      else {
        uVar18 = 2;
        uVar20 = 0;
LAB_001738ac:
        iVar6 = strcasecmp(pcVar8,"bluetooth");
        if ((iVar6 == 0) && (local_40c == '\x02')) {
          iVar6 = xml_parse_line(__stream,plVar2,auStack_308);
          if (iVar6 == -1) goto LAB_00173810;
          iVar5 = iVar5 + 1;
          pcVar8 = local_618;
          uVar20 = uVar18;
        }
      }
      iVar6 = strcasecmp(pcVar8,"slot1");
      if ((iVar6 == 0) && (local_40c == '\x01')) {
        iVar6 = xml_parse_line(__stream,plVar2,auStack_308);
        pcVar8 = local_618;
        if ((iVar6 != -1) &&
           ((iVar6 = strcasecmp(local_618,"cartridge"), iVar6 == 0 && (local_40c == '\x01')))) {
          sVar10 = strlen(acStack_208);
          iVar6 = (int)sVar10 + 1;
          uVar9 = (ulong)local_7dc;
          lVar19 = uVar9 * 0x38;
          pvVar11 = malloc((ulong)((int)sVar10 + 1));
          local_7e8[uVar9 * 7] = pvVar11;
          *(undefined4 *)(local_7e8 + uVar9 * 7 + 5) = local_7b4;
          *(undefined4 *)((long)local_7e8 + lVar19 + 0x2c) = uVar20;
          *(undefined1 *)(local_7e8 + uVar9 * 7 + 6) = uVar4;
          local_7e8[uVar9 * 7 + 4] = CONCAT44(uVar27,uVar28);
          local_7e8[uVar9 * 7 + 3] = CONCAT44((int)uVar17,(int)uVar22);
          unescape_str(pvVar11,acStack_208,iVar6,iVar6);
          sVar10 = strlen(local_108);
          uVar7 = (int)sVar10 + 1;
          pcVar8 = (char *)(local_7e8 + uVar9 * 7 + 1);
          uVar21 = 0;
          do {
            cVar3 = local_108[uVar21];
            if (cVar3 == '&') {
              uVar22 = (ulong)(uVar21 + 1);
              __s1 = local_108 + uVar22;
              iVar6 = strncmp(__s1,"amp;",4);
              if (iVar6 == 0) {
                uVar21 = uVar21 + 4;
                *pcVar8 = '&';
              }
              else {
                iVar6 = strncmp(__s1,"apos;",5);
                if (iVar6 == 0) {
                  uVar21 = uVar21 + 5;
                  *pcVar8 = '\'';
                }
                else {
                  iVar6 = strncmp(__s1,"quot;",5);
                  if (iVar6 == 0) {
                    uVar21 = uVar21 + 5;
                    *pcVar8 = '\"';
                  }
                  else {
                    cVar3 = local_108[uVar21 + 1];
                    if (((cVar3 == 'l') && (local_108[uVar22 + 1] == 't')) &&
                       (local_108[uVar22 + 2] == ';')) {
                      uVar21 = uVar21 + 3;
                      *pcVar8 = '<';
                    }
                    else {
                      if (((cVar3 != 'g') || (local_108[uVar22 + 1] != 't')) ||
                         (local_108[uVar22 + 2] != ';')) {
                        printf("Unknown escape sequence in string %s\n",local_108);
                        *pcVar8 = '_';
                        goto LAB_00173694;
                      }
                      uVar21 = uVar21 + 3;
                      *pcVar8 = '>';
                    }
                  }
                }
              }
              if (uVar7 <= uVar21) goto LAB_001736f8;
            }
            else {
              *pcVar8 = cVar3;
            }
LAB_00173694:
            pcVar8 = pcVar8 + 1;
            if ((pcVar8 == (char *)((long)local_7e8 + lVar19 + 0x14)) ||
               (uVar21 = uVar21 + 1, uVar7 <= uVar21)) goto LAB_001736f8;
          } while( true );
        }
        sprintf(auStack_308,1,0x100,"Expected closing cartridge and got (%s, %d)\n",pcVar8,
                      local_40c);
      }
    }
LAB_00173810:
    printf("%d: Failed to parse game database file: %s\n",iVar5,auStack_308);
    fflush(stdout);
    if (local_7dc != 0) {
      puVar15 = local_7e8;
      do {
        puVar16 = puVar15 + 7;
        free((void *)*puVar15);
        puVar15 = puVar16;
      } while (puVar16 != local_7e8 + (ulong)(local_7dc - 1) * 7 + 7);
    }
  }
  uVar28 = 0xffffffff;
  free(local_7e8);
LAB_001737a0:
  if (local_8 - __stack_chk_guard != 0) {
                    // WARNING: Subroutine does not return
    
  }
  return uVar28;
LAB_001736f8:
  *(undefined1 *)((long)local_7e8 + lVar19 + 0x14) = 0;
  local_7dc = local_7dc + 1;
  local_7e0 = iVar5 + 1;
  if (local_7b8 == local_7dc) {
    local_7b8 = local_7b8 * 2;
    local_7e8 = realloc(local_7e8,(ulong)local_7b8 * 0x38);
  }
  goto LAB_001732a8;
}

// Function: initialize_geometry
void initialize_geometry(long param_1,undefined8 param_2,undefined8 param_3)

{
  *(undefined8 *)(param_1 + 0x9a30) = param_2;
  *(undefined8 *)(param_1 + 0x9a38) = param_3;
  *(long *)(param_1 + 0x9a58) = param_1 + 0x9764;
  *(long *)(param_1 + 0x9a60) = param_1 + 0x97a4;
  *(undefined1 *)(param_1 + 0x99b3) = 0;
  return;
}

// Function: initialize_system_directory
void initialize_system_directory(long param_1,undefined8 param_2)

{
  long *__filename;
  int iVar1;
  struct stat asStack_4a8 [8];
  long local_8;
  
  __filename = (long *)(asStack_4a8[0].st_size + 1);
  local_8 = __stack_chk_guard;
  snprintf((char *)__filename,0x420,"%s%c%s",param_1 + 0x8a780,0x2f,param_2);
  printf("Checking directory %s: ",__filename);
  iVar1 = stat((char *)__filename,asStack_4a8);
  if (iVar1 == 0) {
    puts("It\'s there.");
  }
  else {
    puts("Doesn\'t exist, creating.");
    mkdir((char *)__filename,0x1ed);
  }
  if (local_8 - __stack_chk_guard == 0) {
    return;
  }
                    // WARNING: Subroutine does not return
  
}

// Function: initialize_texture_cache
void initialize_texture_cache(undefined8 *param_1,undefined8 param_2)

{
  memset(param_1 + 1,0,0x8000);
  *param_1 = param_2;
  param_1[0x1001] = 0;
  param_1[0x1002] = 0;
  return;
}

// Function: initialize_video_2d
void initialize_video_2d(long *param_1,uint param_2,long *param_3)

{
  long lVar1;
  long lVar2;
  
  *param_1 = (long)param_3;
  param_1[3] = param_3[(ulong)param_2 + 0x5ca];
  lVar2 = param_3[(ulong)param_2 + 0x5cc];
  *(char *)((long)param_1 + 0xb7) = (char)param_2;
  lVar1 = *(long *)(*param_3 + 0xfd500);
  param_1[1] = lVar1;
  param_1[4] = (long)(param_3 + (ulong)param_2 * 4 + 0x426);
  param_1[6] = lVar2;
  *(uint *)((long)param_1 + 0x94) = param_2 << 0x15;
  *(uint *)(param_1 + 0x13) = param_2 << 0x15;
  param_1[0x18] = (long)param_1;
  param_1[0x19] = lVar1;
  param_1[0x2e] = (long)param_1;
  param_1[0x2f] = lVar1;
  param_1[0x44] = (long)param_1;
  param_1[0x45] = lVar1;
  param_1[0x5a] = (long)param_1;
  param_1[0x5b] = lVar1;
  return;
}

// Function: initialize_video_3d
int initialize_video_3d(void *param_1)

{
  uint uVar1;
  uint uVar2;
  int iVar3;
  uint uVar4;
  long lVar5;
  undefined8 *puVar6;
  
  lVar5 = 1;
  do {
    uVar4 = (uint)lVar5;
    uVar1 = 0;
    if (uVar4 != 0) {
      uVar1 = (uVar4 + 0x3fffffff) / uVar4;
    }
    uVar2 = 0;
    if (uVar4 != 0) {
      uVar2 = (uVar4 + 0x7fffffff) / uVar4;
    }
    *(uint *)(reciprocal_table + lVar5 * 4) = uVar1;
    *(uint *)(reciprocal_table_u + lVar5 * 4) = uVar2;
    lVar5 = lVar5 + 1;
  } while (lVar5 != 0x201);
  puVar6 = (undefined8 *)((long)param_1 + 0x2c1740);
  lVar5 = 0;
  printf("  video_3d render targets:");
  do {
    printf(&DAT_0021df58,puVar6 + -0x4800);
    *puVar6 = param_1;
    puVar6[1] = (long)param_1 + 0x356cf0;
    *(char *)((long)puVar6 + 0xe2) = (char)lVar5;
    if (lVar5 != 0) {
      pthread_create(puVar6 + 3,(pthread_attr_t *)0x0,video_3d_render_thread,puVar6 + -0x4800);
      pthread_mutex_init((pthread_mutex_t *)(puVar6 + 4),(pthread_mutexattr_t *)0x0);
      pthread_mutex_init((pthread_mutex_t *)(puVar6 + 10),(pthread_mutexattr_t *)0x0);
      pthread_cond_init((pthread_cond_t *)(puVar6 + 0x10),(pthread_condattr_t *)0x0);
      pthread_cond_init((pthread_cond_t *)(puVar6 + 0x16),(pthread_condattr_t *)0x0);
      *(undefined1 *)(puVar6 + 0x1c) = 0;
      *(undefined1 *)((long)puVar6 + 0xe1) = 0;
      if ((int)lVar5 == 3) {
        putchar(10);
        pthread_mutex_init((pthread_mutex_t *)((long)param_1 + 0x34eb70),(pthread_mutexattr_t *)0x0)
        ;
        pthread_mutex_init((pthread_mutex_t *)((long)param_1 + 0x34eba0),(pthread_mutexattr_t *)0x0)
        ;
        pthread_mutex_init((pthread_mutex_t *)((long)param_1 + 0x34ebd0),(pthread_mutexattr_t *)0x0)
        ;
        pthread_cond_init((pthread_cond_t *)((long)param_1 + 0x34ec00),(pthread_condattr_t *)0x0);
        pthread_cond_init((pthread_cond_t *)((long)param_1 + 0x34ec30),(pthread_condattr_t *)0x0);
        pthread_cond_init((pthread_cond_t *)((long)param_1 + 0x34ec60),(pthread_condattr_t *)0x0);
        *(undefined2 *)((long)param_1 + 0x34ec90) = 0;
        *(undefined1 *)((long)param_1 + 0x34ec92) = 0;
        iVar3 = pthread_create(&video_3d_thread,(pthread_attr_t *)0x0,video_3d_run_thread,param_1);
        return iVar3;
      }
    }
    lVar5 = lVar5 + 1;
    puVar6 = puVar6 + 0x4820;
  } while( true );
}

// Function: input_log_close
ulong input_log_close(long param_1)

{
  uint uVar1;
  ulong uVar2;
  
  uVar2 = param_1 + 0x80000;
  if ((*(char *)(param_1 + 0x80050) == '\x01') &&
     (uVar2 = 0, *(FILE **)(param_1 + 0x80048) != (FILE *)0x0)) {
    uVar1 = fclose(*(FILE **)(param_1 + 0x80048));
    return (ulong)uVar1;
  }
  return uVar2;
}

// Function: input_log_playback
